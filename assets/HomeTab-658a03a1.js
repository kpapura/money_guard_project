import{r as p,R as e,H as G,I as J,S as K,J as U,z as P,A,K as X,M as L,d as D,C as I,g as k}from"./vendor-336df391.js";import{s as S,e as Y,a as Z,u as O,b as H,d as j,c as Q,f as ee,M as te,g as ae,h as ne,B as se}from"../commonHelpers2.js";const ce="_labelExpense_quz5u_21",oe="_labelIncome_quz5u_27",re="_activeIncome_quz5u_33",le="_activeExpense_quz5u_40",ie="_slider_quz5u_46",me="_round_quz5u_91",E={"transaction-switcher":"_transaction-switcher_quz5u_2",switch:"_switch_quz5u_9",labelExpense:ce,labelIncome:oe,activeIncome:re,activeExpense:le,slider:ie,round:me},_e=({onChange:t})=>{const[n,c]=p.useState(!1),s=()=>{c(!n),t(!n)};return e.createElement("div",{className:E["transaction-switcher"]},e.createElement("span",{className:n?E.activeIncome:E.labelIncome},"Income"),e.createElement("label",{className:`${E.switch} ${n?E.income:E.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!n}),e.createElement("span",{className:`${E.slider} ${E.round}`})),e.createElement("span",{className:n?E.labelExpense:E.activeExpense},"Expense"))},de="_container_1pzgo_1",ue="_formWrapper_1pzgo_20",Ee="_header_1pzgo_32",pe="_secondContainer_1pzgo_42",be="_category_1pzgo_51",he="_boxDate_1pzgo_64",Ne="_incomeInput_1pzgo_78",ge="_customInput_1pzgo_79",xe="_svgBox_1pzgo_108",ve="_comment_1pzgo_137",fe="_selectExpense_1pzgo_138",we="_btnBox_1pzgo_157",ye="_activeIncome_1pzgo_164",Ce="_activeExpense_1pzgo_171",Ie="_checkBox_1pzgo_177",Se="_inputContainer_1pzgo_190",De="_active_1pzgo_164",Te="_hidden_1pzgo_205",i={container:de,formWrapper:ue,header:Ee,secondContainer:pe,category:be,boxDate:he,incomeInput:Ne,customInput:ge,svgBox:xe,comment:ve,selectExpense:fe,btnBox:we,activeIncome:ye,activeExpense:Ce,checkBox:Ie,inputContainer:Se,active:De,hidden:Te},$=({name:t,register:n,errors:c,placeholder:s,className:o})=>e.createElement("div",{className:i.inputContainer},e.createElement("input",{autoComplete:"off",className:o,...n(t),placeholder:s}),c[t]&&e.createElement("span",null,c[t].message)),q=t=>t<10?"0"+t:t,B=t=>{const n=t.getFullYear(),c=q(t.getMonth()+1),s=q(t.getDate());return`${n}-${c}-${s}`};function W({content:t,categories:n,toggle:c,typeForm:s,onDataSubmit:o,schema:_}){const{register:u,handleSubmit:h,formState:{errors:b},setValue:N}=G({resolver:J(_),mode:"onChange"}),[m,f]=p.useState(null),[r,g]=p.useState(""),[x,T]=p.useState(null),[w,y]=p.useState(!0);p.useEffect(()=>{g(t?t.type:"EXPENSE"),N("amount",t&&+t.amount.toString().replace("-","")),N("comment",t&&t.comment)},[t,N]);const v=p.useMemo(()=>n.map(({id:l,name:R})=>({value:l,label:R})),[n]),C=p.useMemo(()=>v.find(l=>(t==null?void 0:t.categoryId)===l.value),[t,v]),V=l=>{f(l)},F=l=>{if(s==="add"&&r==="EXPENSE"&&m||r==="INCOME")o({transactionDate:B(x),amount:r==="EXPENSE"?+`-${l.amount}`:+l.amount,comment:l.comment,type:r,categoryId:r==="EXPENSE"?m==null?void 0:m.value:"063f1132-ba5d-42b4-951d-44011ca46262"}),y(!0);else if(s==="add"&&!m){y(!1);return}else o({transactionDate:t?t.transactionDate:B(x),amount:r==="EXPENSE"?+`-${l.amount}`:+l.amount,comment:l.comment})},z=l=>{g(l?"INCOME":"EXPENSE")};return e.createElement("div",{className:i.container},e.createElement("form",{className:i.formWrapper,onSubmit:h(F)},e.createElement("h1",{className:i.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(_e,{onChange:z}):e.createElement("div",null,e.createElement("ul",{className:i.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&r==="EXPENSE"||z(!0)},className:t.type==="INCOME"||r==="INCOME"?i.activeIncome:"",disabled:s==="edit"&&r==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&r==="INCOME"||z(!1)},className:r==="EXPENSE"?i.activeExpense:"",disabled:s==="edit"&&r==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:i.secondContainer},r==="EXPENSE"&&e.createElement("div",{className:i.category},e.createElement(K,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:v,placeholder:"Select category",defaultValue:C&&C,onChange:V,isDisabled:s==="edit"}),e.createElement("span",{className:w?i.hidden:i.active},"Please, choose the category")),e.createElement("div",{className:i.boxDate},e.createElement($,{className:i.incomeInput,name:"amount",placeholder:"0.00",autoComplete:"false",errors:b,register:u}),e.createElement("div",{className:i.svgBox},e.createElement(U,{className:i.customInput,selected:t?t.transactionDate:x,placeholderText:"Enter the date",onChange:l=>{N("transactionDate",l),T(l)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{xlinkHref:`${S}#icon-date`})),b.transactionDate&&e.createElement("span",null,b.transactionDate.message))),e.createElement($,{className:i.comment,name:"comment",placeholder:"Comment",errors:b,register:u}),e.createElement("div",{className:i.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:c,className:"modalButton"},"CANCEL")))))}const ze=P({comment:A().min(5,"Give more details"),transactionDate:X(),amount:L().typeError("Please enter the number").min(1,"Number must be at least 1 character")});function ke({categories:t,editContent:n,toggle:c}){const s=D(),o=_=>{s(Y({content:{..._},id:n.id})).unwrap().then(u=>{I.success("Changed!"),c()}).catch(u=>{I.error("Credentials is not valid!")})};return e.createElement(W,{schema:ze,toggle:c,content:n.content,categories:t,onDataSubmit:o,typeForm:"edit"})}const $e=P({comment:A().required("Describe your transaction").min(5,"Give more details"),transactionDate:X().required("Please choose the date"),amount:L().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function qe({categories:t,toggle:n}){const c=D(),s=o=>{c(Z(o)).unwrap().then(()=>{I.success("Transaction was successfully added"),n()}).catch(_=>{I.error("Credentials is not valid!")})};return e.createElement(W,{schema:$e,categories:t,onDataSubmit:s,toggle:n,typeForm:"add"})}const Be="_transaction_item_172wv_1",Me="_income_border_172wv_6",Pe="_expense_border_172wv_10",Ae="_income_text_172wv_14",Xe="_expense_text_172wv_19",Le="_transactions_table_mobile_172wv_24",Oe="_transaction_colum_172wv_30",He="_transaction_first_column_172wv_34",We="_transaction_row_mobile_172wv_38",Ve="_transaction_row_172wv_38",Fe="_table_body_172wv_57",Re="_btn_delete_172wv_61",Ge="_btn_edit_172wv_75",Je="_btn_wrapper_172wv_84",Ke="_icon_edit_172wv_91",a={transaction_item:Be,income_border:Me,expense_border:Pe,income_text:Ae,expense_text:Xe,transactions_table_mobile:Le,transaction_colum:Oe,transaction_first_column:He,transaction_row_mobile:We,transaction_row:Ve,table_body:Fe,btn_delete:Re,btn_edit:Ge,btn_wrapper:Je,icon_edit:Ke},M=({transaction:t,handleEditItem:n})=>{const{id:c,transactionDate:s,type:o,categoryId:_,comment:u,amount:h}=t,{isBigScreenOrTablet:b,isMobile:N}=O(),m=D(),f=k(H);function r(y){const v=f.find(C=>C.id===y);return v?v.name:"Unknown Category"}const g=()=>{m(j(t))},x=o.toLowerCase()==="income"?"+":"-",T=o.toLowerCase()==="income"?a.income_border:a.expense_border,w=o.toLowerCase()==="income"?a.income_text:a.expense_text;return e.createElement(e.Fragment,null,N&&e.createElement("li",{key:c,className:`${a.transaction_item} ${T}`},e.createElement("table",{className:a.transactions_table_mobile},e.createElement("tbody",{className:a.table_body},e.createElement("tr",{className:a.transaction_row_mobile},e.createElement("td",{className:a.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:a.transaction_row_mobile},e.createElement("td",{className:a.transaction_first_column},"Type"),e.createElement("td",null,x)),e.createElement("tr",{className:a.transaction_row_mobile},e.createElement("td",{className:a.transaction_first_column},"Category"),e.createElement("td",null,r(_))),e.createElement("tr",{className:a.transaction_row_mobile},e.createElement("td",{className:a.transaction_first_column},"Comment"),e.createElement("td",null,u)),e.createElement("tr",{className:a.transaction_row_mobile},e.createElement("td",{className:a.transaction_first_column},"Sum"),e.createElement("td",{className:w},h)),e.createElement("tr",{className:a.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:a.btn_delete,onClick:g},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>n({categoryId:_,type:o,amount:h,comment:u,transactionDate:s},c),className:a.btn_edit},e.createElement("svg",{className:a.icon_edit},e.createElement("use",{xlinkHref:`${S}#icon-edit`}))," ","Edit")))))),b&&e.createElement("tr",{className:a.transaction_row},e.createElement("td",{className:a.transaction_colum},s),e.createElement("td",{className:a.transaction_colum,style:{textAlign:"center"}},x),e.createElement("td",{className:a.transaction_colum},r(_)),e.createElement("td",{className:a.transaction_colum},u),e.createElement("td",{className:`${a.transaction_colum} ${w}`,style:{textAlign:"right"}},h),e.createElement("td",{className:a.transaction_colum},e.createElement("div",{className:a.btn_wrapper},e.createElement("button",{onClick:()=>n({categoryId:_,type:o,amount:h,comment:u,transactionDate:s},c),className:a.btn_edit},e.createElement("svg",{className:a.icon_edit},e.createElement("use",{xlinkHref:`${S}#icon-edit`}))),e.createElement("button",{className:a.btn_delete,onClick:g},"Delete")))))},Ue="_transactions_section_xqcdf_1",Ye="_transactions_container_xqcdf_33",Ze="_transactions_table_xqcdf_60",je="_transactions_list_xqcdf_67",Qe="_transaction_row_head_xqcdf_73",et="_table_body_xqcdf_96",tt="_btn_add_xqcdf_104",at="_icon_plus_xqcdf_138",nt="_empty_transactions_xqcdf_144",d={transactions_section:Ue,transactions_container:Ye,transactions_table:Ze,transactions_list:je,transaction_row_head:Qe,table_body:et,btn_add:tt,icon_plus:at,empty_transactions:nt},st=()=>{const{isOpen:t,toggle:n}=Q(),[c,s]=p.useState(""),o=k(ee),_=k(H),{isBigScreenOrTablet:u,isMobile:h}=O();t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const b=(m,f,r)=>{n(),s({content:m,id:f,name:r}),t&&document.body.classList.add("modal-open")},N=()=>{n(),s(null)};return e.createElement("section",{className:d.transactions_section},e.createElement("div",{className:d.transactions_container},h&&e.createElement("ul",{className:d.transactions_list},o.length>0?o.map(m=>e.createElement(M,{handleEditItem:b,key:m.id,transaction:m})):e.createElement("div",{className:d.empty_transactions},"No transactions")),u&&e.createElement(e.Fragment,null,o.length>0?e.createElement("table",{className:d.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:d.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:d.table_body},o.map(m=>e.createElement(M,{handleEditItem:b,key:m.id,transaction:m})))):e.createElement(e.Fragment,null,e.createElement("table",{className:d.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:d.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:d.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>N(),className:d.btn_add}," ",e.createElement("svg",{className:d.icon_plus},e.createElement("use",{xlinkHref:`${S}#icon-plus`})))),t&&e.createElement(te,{closeModal:n},c?e.createElement(ke,{editContent:c,categories:_,toggle:n}):e.createElement(qe,{categories:_,toggle:n})))},rt=()=>{const t=D(),n=ae().windowWidth;return p.useEffect(()=>{t(ne())},[t]),e.createElement(e.Fragment,null,n<768&&e.createElement(se,null),e.createElement(st,null))};export{rt as default};
//# sourceMappingURL=HomeTab-658a03a1.js.map
