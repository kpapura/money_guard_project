import{r as E,k as e,H as q,I as R,S as G,J,A as P,C as A,K as L,M as X,l as D,o as $}from"./vendor-32dc92c3.js";import{s as S,e as K,a as U,u as O,b as H,d as Y,c as Z,f as Q,M as ee,g as te,h as ne,B as ae}from"../commonHelpers2.js";const se="_labelExpense_1selt_21",ce="_labelIncome_1selt_27",oe="_activeIncome_1selt_33",re="_activeExpense_1selt_40",le="_slider_1selt_46",ie="_round_1selt_90",u={"transaction-switcher":"_transaction-switcher_1selt_2",switch:"_switch_1selt_9",labelExpense:se,labelIncome:ce,activeIncome:oe,activeExpense:re,slider:le,round:ie},me=({onChange:t})=>{const[a,c]=E.useState(!1),s=()=>{c(!a),t(!a)};return e.createElement("div",{className:u["transaction-switcher"]},e.createElement("span",{className:a?u.activeIncome:u.labelIncome},"Income"),e.createElement("label",{className:`${u.switch} ${a?u.income:u.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!a}),e.createElement("span",{className:`${u.slider} ${u.round}`})),e.createElement("span",{className:a?u.labelExpense:u.activeExpense},"Expense"))},_e="_container_1pzgo_1",de="_formWrapper_1pzgo_20",ue="_header_1pzgo_32",Ee="_secondContainer_1pzgo_42",be="_category_1pzgo_51",pe="_boxDate_1pzgo_64",he="_incomeInput_1pzgo_78",Ne="_customInput_1pzgo_79",ge="_svgBox_1pzgo_108",xe="_comment_1pzgo_137",fe="_selectExpense_1pzgo_138",ye="_btnBox_1pzgo_157",Ce="_activeIncome_1pzgo_164",ve="_activeExpense_1pzgo_171",Ie="_checkBox_1pzgo_177",Se="_inputContainer_1pzgo_190",De="_active_1pzgo_164",we="_hidden_1pzgo_205",i={container:_e,formWrapper:de,header:ue,secondContainer:Ee,category:be,boxDate:pe,incomeInput:he,customInput:Ne,svgBox:ge,comment:xe,selectExpense:fe,btnBox:ye,activeIncome:Ce,activeExpense:ve,checkBox:Ie,inputContainer:Se,active:De,hidden:we},z=({name:t,register:a,errors:c,placeholder:s,className:o})=>e.createElement("div",{className:i.inputContainer},e.createElement("input",{autoComplete:"off",className:o,...a(t),placeholder:s}),c[t]&&e.createElement("span",null,c[t].message)),B=t=>t<10?"0"+t:t,M=t=>{const a=t==null?void 0:t.getFullYear(),c=B((t==null?void 0:t.getMonth())+1),s=B(t==null?void 0:t.getDate());return`${a}-${c}-${s}`};function W({content:t,categories:a,toggle:c,typeForm:s,onDataSubmit:o,schema:d}){const{register:b,handleSubmit:N,formState:{errors:p},setValue:h}=q({resolver:R(d),mode:"onChange"}),[m,f]=E.useState(null),[r,g]=E.useState(""),[x,w]=E.useState(new Date),[I,y]=E.useState(!0);E.useEffect(()=>{g(t?t.type:"EXPENSE"),h("amount",t&&+t.amount.toString().replace("-","")),h("comment",t&&t.comment)},[t,h]);const C=E.useMemo(()=>a.map(({id:l,name:V})=>({value:l,label:V})),[a]),v=E.useMemo(()=>C.find(l=>(t==null?void 0:t.categoryId)===l.value),[t,C]),T=l=>{f(l),y(!0)},F=l=>{if(s==="add"&&r==="EXPENSE"&&m||r==="INCOME")o({transactionDate:M(x),amount:r==="EXPENSE"?+`-${l.amount}`:+l.amount,comment:l.comment,type:r,categoryId:r==="EXPENSE"?m==null?void 0:m.value:"063f1132-ba5d-42b4-951d-44011ca46262"});else if(s==="add"&&!m){y(!1);return}else s==="edit"&&o({transactionDate:t?t.transactionDate:M(x),amount:r==="EXPENSE"?+`-${l.amount}`:+l.amount,comment:l.comment})},k=l=>{g(l?"INCOME":"EXPENSE")};return e.createElement("div",{className:i.container},e.createElement("form",{className:i.formWrapper,onSubmit:N(F)},e.createElement("h1",{className:i.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(me,{onChange:k}):e.createElement("div",null,e.createElement("ul",{className:i.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&r==="EXPENSE"||k(!0)},className:t.type==="INCOME"||r==="INCOME"?i.activeIncome:"",disabled:s==="edit"&&r==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&r==="INCOME"||k(!1)},className:r==="EXPENSE"?i.activeExpense:"",disabled:s==="edit"&&r==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:i.secondContainer},r==="EXPENSE"&&e.createElement("div",{className:i.category},e.createElement(G,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:C,placeholder:"Select category",defaultValue:v&&v,onChange:T,isDisabled:s==="edit"}),e.createElement("span",{className:I?i.hidden:i.active},"Please, choose the category")),e.createElement("div",{className:i.boxDate},e.createElement(z,{className:i.incomeInput,name:"amount",placeholder:"0.00",autoComplete:"false",errors:p,register:b}),e.createElement("div",{className:i.svgBox},e.createElement(J,{className:i.customInput,selected:x,onChange:l=>{h("transactionDate",l),w(l)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{xlinkHref:`${S}#icon-date`})),p.transactionDate&&e.createElement("span",null,p.transactionDate.message))),e.createElement(z,{className:i.comment,name:"comment",placeholder:"Comment",errors:p,register:b}),e.createElement("div",{className:i.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:c,className:"modalButton"},"CANCEL")))))}const Te=P({comment:A().min(5,"Give more details"),transactionDate:L(),amount:X().typeError("Please enter the number").min(1,"Number must be at least 1 character")});function ke({categories:t,editContent:a,toggle:c}){const s=D(),o=d=>{s(K({content:{...d},id:a.id})),c()};return e.createElement(W,{schema:Te,toggle:c,content:a.content,categories:t,onDataSubmit:o,typeForm:"edit"})}const $e=P({comment:A().required("Describe your transaction").min(5,"Give more details"),transactionDate:L(),amount:X().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function ze({categories:t,toggle:a}){const c=D(),s=o=>{c(U(o)),a()};return e.createElement(W,{schema:$e,categories:t,onDataSubmit:s,toggle:a,typeForm:"add"})}const Be="_transaction_item_1joe4_1",Me="_income_border_1joe4_6",je="_expense_border_1joe4_10",Pe="_income_text_1joe4_14",Ae="_expense_text_1joe4_19",Le="_transactions_table_mobile_1joe4_24",Xe="_transaction_colum_1joe4_30",Oe="_transaction_first_column_1joe4_34",He="_transaction_row_mobile_1joe4_38",We="_transaction_row_1joe4_38",Fe="_table_body_1joe4_57",Ve="_btn_delete_1joe4_61",qe="_btn_edit_1joe4_80",Re="_btn_wrapper_1joe4_89",Ge="_icon_edit_1joe4_96",n={transaction_item:Be,income_border:Me,expense_border:je,income_text:Pe,expense_text:Ae,transactions_table_mobile:Le,transaction_colum:Xe,transaction_first_column:Oe,transaction_row_mobile:He,transaction_row:We,table_body:Fe,btn_delete:Ve,btn_edit:qe,btn_wrapper:Re,icon_edit:Ge},j=({transaction:t,handleEditItem:a})=>{const{id:c,transactionDate:s,type:o,categoryId:d,comment:b,amount:N}=t,{isBigScreenOrTablet:p,isMobile:h}=O(),m=D(),f=$(H);function r(C){const v=f.find(T=>T.id===C);return v?v.name:"Income"}const g=()=>{m(Y(t))},x=o.toLowerCase()==="income"?"+":"-",w=o.toLowerCase()==="income"?n.income_border:n.expense_border,I=o.toLowerCase()==="income"?n.income_text:n.expense_text,y=N.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2});return e.createElement(e.Fragment,null,h&&e.createElement("li",{key:c,className:`${n.transaction_item} ${w}`},e.createElement("table",{className:n.transactions_table_mobile},e.createElement("tbody",{className:n.table_body},e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Type"),e.createElement("td",null,x)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Category"),e.createElement("td",null,r(d))),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Comment"),e.createElement("td",null,b)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Sum"),e.createElement("td",{className:I},y)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:n.btn_delete,onClick:g},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>a({categoryId:d,type:o,amount:N,comment:b,transactionDate:s},c),className:n.btn_edit},e.createElement("svg",{className:n.icon_edit},e.createElement("use",{xlinkHref:`${S}#icon-edit`}))," ","Edit")))))),p&&e.createElement("tr",{className:n.transaction_row},e.createElement("td",{className:n.transaction_colum},s),e.createElement("td",{className:n.transaction_colum,style:{textAlign:"center"}},x),e.createElement("td",{className:n.transaction_colum},r(d)),e.createElement("td",{className:n.transaction_colum},b),e.createElement("td",{className:`${n.transaction_colum} ${I}`,style:{textAlign:"right"}},y),e.createElement("td",{className:n.transaction_colum},e.createElement("div",{className:n.btn_wrapper},e.createElement("button",{onClick:()=>a({categoryId:d,type:o,amount:N,comment:b,transactionDate:s},c),className:n.btn_edit},e.createElement("svg",{className:n.icon_edit},e.createElement("use",{xlinkHref:`${S}#icon-edit`}))),e.createElement("button",{className:n.btn_delete,onClick:g},"Delete")))))},Je="_transactions_section_r1f89_1",Ke="_transactions_container_r1f89_33",Ue="_transactions_table_r1f89_60",Ye="_transactions_list_r1f89_67",Ze="_transaction_row_head_r1f89_73",Qe="_table_body_r1f89_96",et="_btn_add_r1f89_104",tt="_icon_plus_r1f89_131",nt="_empty_transactions_r1f89_137",_={transactions_section:Je,transactions_container:Ke,transactions_table:Ue,transactions_list:Ye,transaction_row_head:Ze,table_body:Qe,btn_add:et,icon_plus:tt,empty_transactions:nt},at=()=>{const{isOpen:t,toggle:a}=Z(),[c,s]=E.useState(""),o=$(Q),d=$(H),{isBigScreenOrTablet:b,isMobile:N}=O();t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const p=(m,f,r)=>{a(),s({content:m,id:f,name:r}),t&&document.body.classList.add("modal-open")},h=()=>{a(),s(null)};return e.createElement("section",{className:_.transactions_section},e.createElement("div",{className:_.transactions_container},N&&e.createElement("ul",{className:_.transactions_list},o.length>0?o.map(m=>e.createElement(j,{handleEditItem:p,key:m.id,transaction:m})):e.createElement("div",{className:_.empty_transactions},"No transactions")),b&&e.createElement(e.Fragment,null,o.length>0?e.createElement("table",{className:_.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:_.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:_.table_body},o.map(m=>e.createElement(j,{handleEditItem:p,key:m.id,transaction:m})))):e.createElement(e.Fragment,null,e.createElement("table",{className:_.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:_.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:_.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>h(),className:_.btn_add}," ",e.createElement("svg",{className:_.icon_plus},e.createElement("use",{xlinkHref:`${S}#icon-plus`})))),t&&e.createElement(ee,{closeModal:a},c?e.createElement(ke,{editContent:c,categories:d,toggle:a}):e.createElement(ze,{categories:d,toggle:a})))},ot=()=>{const t=D(),a=te().windowWidth;return E.useEffect(()=>{t(ne())},[t]),e.createElement(e.Fragment,null,a<768&&e.createElement(ae,null),e.createElement(at,null))};export{ot as default};
//# sourceMappingURL=HomeTab-d86eeab5.js.map
