import{r as E,k as e,H as F,I as V,S as R,J as G,A as P,C as j,K as A,M as L,l as D,o as $}from"./vendor-32dc92c3.js";import{s as w,e as U,a as J,u as X,b as O,d as K,c as Y,f as Z,M as Q,g as ee,h as te,B as ne}from"../commonHelpers2.js";const ae="_labelExpense_1selt_21",se="_labelIncome_1selt_27",ce="_activeIncome_1selt_33",oe="_activeExpense_1selt_40",re="_slider_1selt_46",le="_round_1selt_90",u={"transaction-switcher":"_transaction-switcher_1selt_2",switch:"_switch_1selt_9",labelExpense:ae,labelIncome:se,activeIncome:ce,activeExpense:oe,slider:re,round:le},me=({onChange:t})=>{const[a,c]=E.useState(!1),s=()=>{c(!a),t(!a)};return e.createElement("div",{className:u["transaction-switcher"]},e.createElement("span",{className:a?u.activeIncome:u.labelIncome},"Income"),e.createElement("label",{className:`${u.switch} ${a?u.income:u.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!a}),e.createElement("span",{className:`${u.slider} ${u.round}`})),e.createElement("span",{className:a?u.labelExpense:u.activeExpense},"Expense"))},ie="_container_1pzgo_1",_e="_formWrapper_1pzgo_20",de="_header_1pzgo_32",ue="_secondContainer_1pzgo_42",Ee="_category_1pzgo_51",be="_boxDate_1pzgo_64",pe="_incomeInput_1pzgo_78",he="_customInput_1pzgo_79",ge="_svgBox_1pzgo_108",Ne="_comment_1pzgo_137",xe="_selectExpense_1pzgo_138",ye="_btnBox_1pzgo_157",fe="_activeIncome_1pzgo_164",Ce="_activeExpense_1pzgo_171",ve="_checkBox_1pzgo_177",Se="_inputContainer_1pzgo_190",Ie="_active_1pzgo_164",we="_hidden_1pzgo_205",m={container:ie,formWrapper:_e,header:de,secondContainer:ue,category:Ee,boxDate:be,incomeInput:pe,customInput:he,svgBox:ge,comment:Ne,selectExpense:xe,btnBox:ye,activeIncome:fe,activeExpense:Ce,checkBox:ve,inputContainer:Se,active:Ie,hidden:we},z=({name:t,register:a,errors:c,placeholder:s,className:o})=>e.createElement("div",{className:m.inputContainer},e.createElement("input",{autoComplete:"off",className:o,...a(t),placeholder:s}),c[t]&&e.createElement("span",null,c[t].message)),B=t=>t<10?"0"+t:t,De=t=>{const a=t==null?void 0:t.getFullYear(),c=B((t==null?void 0:t.getMonth())+1),s=B(t==null?void 0:t.getDate());return`${a}-${c}-${s}`};function H({content:t,categories:a,toggle:c,typeForm:s,onDataSubmit:o,schema:d}){const{register:b,handleSubmit:g,formState:{errors:p},setValue:h}=F({resolver:V(d),mode:"onChange"}),[i,y]=E.useState(null),[r,N]=E.useState(""),[x,S]=E.useState(null),[I,f]=E.useState(!0);E.useEffect(()=>{N(t?t.type:"EXPENSE"),h("amount",t&&+t.amount.toString().replace("-","")),h("comment",t&&t.comment),t&&S(t.transactionDate)},[t,h]);const C=E.useMemo(()=>a.map(({id:l,name:q})=>({value:l,label:q})),[a]),v=E.useMemo(()=>C.find(l=>(t==null?void 0:t.categoryId)===l.value),[t,C]),T=l=>{y(l),f(!0)},W=l=>{if(s==="add"&&r==="EXPENSE"&&i||r==="INCOME")o({transactionDate:x,amount:r==="EXPENSE"?+`-${l.amount}`:+l.amount,comment:l.comment,type:r,categoryId:r==="EXPENSE"?i==null?void 0:i.value:"063f1132-ba5d-42b4-951d-44011ca46262"});else if(s==="add"&&!i){f(!1);return}else s==="edit"&&o({transactionDate:x,amount:r==="EXPENSE"?+`-${l.amount}`:+l.amount,comment:l.comment})},k=l=>{N(l?"INCOME":"EXPENSE")};return e.createElement("div",{className:m.container},e.createElement("form",{className:m.formWrapper,onSubmit:g(W)},e.createElement("h1",{className:m.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(me,{onChange:k}):e.createElement("div",null,e.createElement("ul",{className:m.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&r==="EXPENSE"||k(!0)},className:t.type==="INCOME"||r==="INCOME"?m.activeIncome:"",disabled:s==="edit"&&r==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&r==="INCOME"||k(!1)},className:r==="EXPENSE"?m.activeExpense:"",disabled:s==="edit"&&r==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:m.secondContainer},r==="EXPENSE"&&e.createElement("div",{className:m.category},e.createElement(R,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:C,placeholder:"Select category",defaultValue:v&&v,onChange:T,isDisabled:s==="edit"}),e.createElement("span",{className:I?m.hidden:m.active},"Please, choose the category")),e.createElement("div",{className:m.boxDate},e.createElement(z,{className:m.incomeInput,name:"amount",placeholder:"0.00",autoComplete:"false",errors:p,register:b}),e.createElement("div",{className:m.svgBox},e.createElement(G,{className:m.customInput,selected:x,placeholderText:"Enter the date",onChange:l=>{h("transactionDate",l),S(De(l))}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{xlinkHref:`${w}#icon-date`})),p.transactionDate&&e.createElement("span",null,p.transactionDate.message))),e.createElement(z,{className:m.comment,name:"comment",placeholder:"Comment",errors:p,register:b}),e.createElement("div",{className:m.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:c,className:"modalButton"},"CANCEL")))))}const Te=P({comment:j().min(5,"Give more details"),transactionDate:A(),amount:L().typeError("Please enter the number").min(1,"Number must be at least 1 character")});function ke({categories:t,editContent:a,toggle:c}){const s=D(),o=d=>{s(U({content:{...d},id:a.id})),c()};return e.createElement(H,{schema:Te,toggle:c,content:a.content,categories:t,onDataSubmit:o,typeForm:"edit"})}const $e=P({comment:j().required("Describe your transaction").min(5,"Give more details"),transactionDate:A().required("Please choose the date"),amount:L().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function ze({categories:t,toggle:a}){const c=D(),s=o=>{c(J(o)),a()};return e.createElement(H,{schema:$e,categories:t,onDataSubmit:s,toggle:a,typeForm:"add"})}const Be="_transaction_item_1joe4_1",Me="_income_border_1joe4_6",Pe="_expense_border_1joe4_10",je="_income_text_1joe4_14",Ae="_expense_text_1joe4_19",Le="_transactions_table_mobile_1joe4_24",Xe="_transaction_colum_1joe4_30",Oe="_transaction_first_column_1joe4_34",He="_transaction_row_mobile_1joe4_38",We="_transaction_row_1joe4_38",qe="_table_body_1joe4_57",Fe="_btn_delete_1joe4_61",Ve="_btn_edit_1joe4_80",Re="_btn_wrapper_1joe4_89",Ge="_icon_edit_1joe4_96",n={transaction_item:Be,income_border:Me,expense_border:Pe,income_text:je,expense_text:Ae,transactions_table_mobile:Le,transaction_colum:Xe,transaction_first_column:Oe,transaction_row_mobile:He,transaction_row:We,table_body:qe,btn_delete:Fe,btn_edit:Ve,btn_wrapper:Re,icon_edit:Ge},M=({transaction:t,handleEditItem:a})=>{const{id:c,transactionDate:s,type:o,categoryId:d,comment:b,amount:g}=t,{isBigScreenOrTablet:p,isMobile:h}=X(),i=D(),y=$(O);function r(C){const v=y.find(T=>T.id===C);return v?v.name:"Unknown Category"}const N=()=>{i(K(t))},x=o.toLowerCase()==="income"?"+":"-",S=o.toLowerCase()==="income"?n.income_border:n.expense_border,I=o.toLowerCase()==="income"?n.income_text:n.expense_text,f=g.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2});return e.createElement(e.Fragment,null,h&&e.createElement("li",{key:c,className:`${n.transaction_item} ${S}`},e.createElement("table",{className:n.transactions_table_mobile},e.createElement("tbody",{className:n.table_body},e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Type"),e.createElement("td",null,x)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Category"),e.createElement("td",null,r(d))),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Comment"),e.createElement("td",null,b)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Sum"),e.createElement("td",{className:I},f)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:n.btn_delete,onClick:N},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>a({categoryId:d,type:o,amount:g,comment:b,transactionDate:s},c),className:n.btn_edit},e.createElement("svg",{className:n.icon_edit},e.createElement("use",{xlinkHref:`${w}#icon-edit`}))," ","Edit")))))),p&&e.createElement("tr",{className:n.transaction_row},e.createElement("td",{className:n.transaction_colum},s),e.createElement("td",{className:n.transaction_colum,style:{textAlign:"center"}},x),e.createElement("td",{className:n.transaction_colum},r(d)),e.createElement("td",{className:n.transaction_colum},b),e.createElement("td",{className:`${n.transaction_colum} ${I}`,style:{textAlign:"right"}},f),e.createElement("td",{className:n.transaction_colum},e.createElement("div",{className:n.btn_wrapper},e.createElement("button",{onClick:()=>a({categoryId:d,type:o,amount:g,comment:b,transactionDate:s},c),className:n.btn_edit},e.createElement("svg",{className:n.icon_edit},e.createElement("use",{xlinkHref:`${w}#icon-edit`}))),e.createElement("button",{className:n.btn_delete,onClick:N},"Delete")))))},Ue="_transactions_section_1sgym_1",Je="_transactions_container_1sgym_33",Ke="_transactions_table_1sgym_60",Ye="_transactions_list_1sgym_67",Ze="_transaction_row_head_1sgym_73",Qe="_table_body_1sgym_96",et="_btn_add_1sgym_104",tt="_icon_plus_1sgym_136",nt="_empty_transactions_1sgym_142",_={transactions_section:Ue,transactions_container:Je,transactions_table:Ke,transactions_list:Ye,transaction_row_head:Ze,table_body:Qe,btn_add:et,icon_plus:tt,empty_transactions:nt},at=()=>{const{isOpen:t,toggle:a}=Y(),[c,s]=E.useState(""),o=$(Z),d=$(O),{isBigScreenOrTablet:b,isMobile:g}=X();t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const p=(i,y,r)=>{a(),s({content:i,id:y,name:r}),t&&document.body.classList.add("modal-open")},h=()=>{a(),s(null)};return e.createElement("section",{className:_.transactions_section},e.createElement("div",{className:_.transactions_container},g&&e.createElement("ul",{className:_.transactions_list},o.length>0?o.map(i=>e.createElement(M,{handleEditItem:p,key:i.id,transaction:i})):e.createElement("div",{className:_.empty_transactions},"No transactions")),b&&e.createElement(e.Fragment,null,o.length>0?e.createElement("table",{className:_.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:_.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:_.table_body},o.map(i=>e.createElement(M,{handleEditItem:p,key:i.id,transaction:i})))):e.createElement(e.Fragment,null,e.createElement("table",{className:_.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:_.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:_.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>h(),className:_.btn_add}," ",e.createElement("svg",{className:_.icon_plus},e.createElement("use",{xlinkHref:`${w}#icon-plus`})))),t&&e.createElement(Q,{closeModal:a},c?e.createElement(ke,{editContent:c,categories:d,toggle:a}):e.createElement(ze,{categories:d,toggle:a})))},ot=()=>{const t=D(),a=ee().windowWidth;return E.useEffect(()=>{t(te())},[t]),e.createElement(e.Fragment,null,a<768&&e.createElement(ne,null),e.createElement(at,null))};export{ot as default};
//# sourceMappingURL=HomeTab-95e95eed.js.map
