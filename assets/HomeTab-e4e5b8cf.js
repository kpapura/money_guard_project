import{r as E,k as e,H as F,I as V,S as R,J as G,A as P,C as j,K as A,M as L,l as w,o as $}from"./vendor-32dc92c3.js";import{s as D,e as J,a as K,u as X,b as O,d as U,c as Y,f as Z,M as Q,g as ee,h as te,B as ne}from"../commonHelpers2.js";const ae="_labelExpense_1selt_21",se="_labelIncome_1selt_27",ce="_activeIncome_1selt_33",oe="_activeExpense_1selt_40",re="_slider_1selt_46",le="_round_1selt_90",u={"transaction-switcher":"_transaction-switcher_1selt_2",switch:"_switch_1selt_9",labelExpense:ae,labelIncome:se,activeIncome:ce,activeExpense:oe,slider:re,round:le},ie=({onChange:t})=>{const[a,c]=E.useState(!1),s=()=>{c(!a),t(!a)};return e.createElement("div",{className:u["transaction-switcher"]},e.createElement("span",{className:a?u.activeIncome:u.labelIncome},"Income"),e.createElement("label",{className:`${u.switch} ${a?u.income:u.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!a}),e.createElement("span",{className:`${u.slider} ${u.round}`})),e.createElement("span",{className:a?u.labelExpense:u.activeExpense},"Expense"))},me="_container_1pzgo_1",_e="_formWrapper_1pzgo_20",de="_header_1pzgo_32",ue="_secondContainer_1pzgo_42",Ee="_category_1pzgo_51",be="_boxDate_1pzgo_64",pe="_incomeInput_1pzgo_78",he="_customInput_1pzgo_79",Ne="_svgBox_1pzgo_108",ge="_comment_1pzgo_137",xe="_selectExpense_1pzgo_138",fe="_btnBox_1pzgo_157",ye="_activeIncome_1pzgo_164",Ce="_activeExpense_1pzgo_171",ve="_checkBox_1pzgo_177",Ie="_inputContainer_1pzgo_190",Se="_active_1pzgo_164",De="_hidden_1pzgo_205",i={container:me,formWrapper:_e,header:de,secondContainer:ue,category:Ee,boxDate:be,incomeInput:pe,customInput:he,svgBox:Ne,comment:ge,selectExpense:xe,btnBox:fe,activeIncome:ye,activeExpense:Ce,checkBox:ve,inputContainer:Ie,active:Se,hidden:De},z=({name:t,register:a,errors:c,placeholder:s,className:o})=>e.createElement("div",{className:i.inputContainer},e.createElement("input",{autoComplete:"off",className:o,...a(t),placeholder:s}),c[t]&&e.createElement("span",null,c[t].message)),B=t=>t<10?"0"+t:t,we=t=>{const a=t==null?void 0:t.getFullYear(),c=B((t==null?void 0:t.getMonth())+1),s=B(t==null?void 0:t.getDate());return`${a}-${c}-${s}`};function H({content:t,categories:a,toggle:c,typeForm:s,onDataSubmit:o,schema:d}){const{register:b,handleSubmit:N,formState:{errors:p},setValue:h}=F({resolver:V(d),mode:"onChange"}),[m,f]=E.useState(null),[r,g]=E.useState(""),[x,I]=E.useState(null),[S,y]=E.useState(!0);E.useEffect(()=>{g(t?t.type:"EXPENSE"),h("amount",t&&+t.amount.toString().replace("-","")),h("comment",t&&t.comment),t&&I(t.transactionDate)},[t,h]);const C=E.useMemo(()=>a.map(({id:l,name:q})=>({value:l,label:q})),[a]),v=E.useMemo(()=>C.find(l=>(t==null?void 0:t.categoryId)===l.value),[t,C]),T=l=>{f(l),y(!0)},W=l=>{if(s==="add"&&r==="EXPENSE"&&m||r==="INCOME")o({transactionDate:x,amount:r==="EXPENSE"?+`-${l.amount}`:+l.amount,comment:l.comment,type:r,categoryId:r==="EXPENSE"?m==null?void 0:m.value:"063f1132-ba5d-42b4-951d-44011ca46262"});else if(s==="add"&&!m){y(!1);return}else s==="edit"&&o({transactionDate:x,amount:r==="EXPENSE"?+`-${l.amount}`:+l.amount,comment:l.comment})},k=l=>{g(l?"INCOME":"EXPENSE")};return e.createElement("div",{className:i.container},e.createElement("form",{className:i.formWrapper,onSubmit:N(W)},e.createElement("h1",{className:i.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(ie,{onChange:k}):e.createElement("div",null,e.createElement("ul",{className:i.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&r==="EXPENSE"||k(!0)},className:t.type==="INCOME"||r==="INCOME"?i.activeIncome:"",disabled:s==="edit"&&r==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&r==="INCOME"||k(!1)},className:r==="EXPENSE"?i.activeExpense:"",disabled:s==="edit"&&r==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:i.secondContainer},r==="EXPENSE"&&e.createElement("div",{className:i.category},e.createElement(R,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:C,placeholder:"Select category",defaultValue:v&&v,onChange:T,isDisabled:s==="edit"}),e.createElement("span",{className:S?i.hidden:i.active},"Please, choose the category")),e.createElement("div",{className:i.boxDate},e.createElement(z,{className:i.incomeInput,name:"amount",placeholder:"0.00",autoComplete:"false",errors:p,register:b}),e.createElement("div",{className:i.svgBox},e.createElement(G,{className:i.customInput,selected:x,placeholderText:"Enter the date",onChange:l=>{h("transactionDate",l),I(we(l))}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{xlinkHref:`${D}#icon-date`})),p.transactionDate&&e.createElement("span",null,p.transactionDate.message))),e.createElement(z,{className:i.comment,name:"comment",placeholder:"Comment",errors:p,register:b}),e.createElement("div",{className:i.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:c,className:"modalButton"},"CANCEL")))))}const Te=P({comment:j().min(5,"Give more details"),transactionDate:A(),amount:L().typeError("Please enter the number").min(1,"Number must be at least 1 character")});function ke({categories:t,editContent:a,toggle:c}){const s=w(),o=d=>{s(J({content:{...d},id:a.id})),c()};return e.createElement(H,{schema:Te,toggle:c,content:a.content,categories:t,onDataSubmit:o,typeForm:"edit"})}const $e=P({comment:j().required("Describe your transaction").min(5,"Give more details"),transactionDate:A().required("Please choose the date"),amount:L().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function ze({categories:t,toggle:a}){const c=w(),s=o=>{c(K(o)),a()};return e.createElement(H,{schema:$e,categories:t,onDataSubmit:s,toggle:a,typeForm:"add"})}const Be="_transaction_item_1joe4_1",Me="_income_border_1joe4_6",Pe="_expense_border_1joe4_10",je="_income_text_1joe4_14",Ae="_expense_text_1joe4_19",Le="_transactions_table_mobile_1joe4_24",Xe="_transaction_colum_1joe4_30",Oe="_transaction_first_column_1joe4_34",He="_transaction_row_mobile_1joe4_38",We="_transaction_row_1joe4_38",qe="_table_body_1joe4_57",Fe="_btn_delete_1joe4_61",Ve="_btn_edit_1joe4_80",Re="_btn_wrapper_1joe4_89",Ge="_icon_edit_1joe4_96",n={transaction_item:Be,income_border:Me,expense_border:Pe,income_text:je,expense_text:Ae,transactions_table_mobile:Le,transaction_colum:Xe,transaction_first_column:Oe,transaction_row_mobile:He,transaction_row:We,table_body:qe,btn_delete:Fe,btn_edit:Ve,btn_wrapper:Re,icon_edit:Ge},M=({transaction:t,handleEditItem:a})=>{const{id:c,transactionDate:s,type:o,categoryId:d,comment:b,amount:N}=t,{isBigScreenOrTablet:p,isMobile:h}=X(),m=w(),f=$(O);function r(C){const v=f.find(T=>T.id===C);return v?v.name:"Income"}const g=()=>{m(U(t))},x=o.toLowerCase()==="income"?"+":"-",I=o.toLowerCase()==="income"?n.income_border:n.expense_border,S=o.toLowerCase()==="income"?n.income_text:n.expense_text,y=N.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2});return e.createElement(e.Fragment,null,h&&e.createElement("li",{key:c,className:`${n.transaction_item} ${I}`},e.createElement("table",{className:n.transactions_table_mobile},e.createElement("tbody",{className:n.table_body},e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Type"),e.createElement("td",null,x)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Category"),e.createElement("td",null,r(d))),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Comment"),e.createElement("td",null,b)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",{className:n.transaction_first_column},"Sum"),e.createElement("td",{className:S},y)),e.createElement("tr",{className:n.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:n.btn_delete,onClick:g},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>a({categoryId:d,type:o,amount:N,comment:b,transactionDate:s},c),className:n.btn_edit},e.createElement("svg",{className:n.icon_edit},e.createElement("use",{xlinkHref:`${D}#icon-edit`}))," ","Edit")))))),p&&e.createElement("tr",{className:n.transaction_row},e.createElement("td",{className:n.transaction_colum},s),e.createElement("td",{className:n.transaction_colum,style:{textAlign:"center"}},x),e.createElement("td",{className:n.transaction_colum},r(d)),e.createElement("td",{className:n.transaction_colum},b),e.createElement("td",{className:`${n.transaction_colum} ${S}`,style:{textAlign:"right"}},y),e.createElement("td",{className:n.transaction_colum},e.createElement("div",{className:n.btn_wrapper},e.createElement("button",{onClick:()=>a({categoryId:d,type:o,amount:N,comment:b,transactionDate:s},c),className:n.btn_edit},e.createElement("svg",{className:n.icon_edit},e.createElement("use",{xlinkHref:`${D}#icon-edit`}))),e.createElement("button",{className:n.btn_delete,onClick:g},"Delete")))))},Je="_transactions_section_r1f89_1",Ke="_transactions_container_r1f89_33",Ue="_transactions_table_r1f89_60",Ye="_transactions_list_r1f89_67",Ze="_transaction_row_head_r1f89_73",Qe="_table_body_r1f89_96",et="_btn_add_r1f89_104",tt="_icon_plus_r1f89_131",nt="_empty_transactions_r1f89_137",_={transactions_section:Je,transactions_container:Ke,transactions_table:Ue,transactions_list:Ye,transaction_row_head:Ze,table_body:Qe,btn_add:et,icon_plus:tt,empty_transactions:nt},at=()=>{const{isOpen:t,toggle:a}=Y(),[c,s]=E.useState(""),o=$(Z),d=$(O),{isBigScreenOrTablet:b,isMobile:N}=X();t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const p=(m,f,r)=>{a(),s({content:m,id:f,name:r}),t&&document.body.classList.add("modal-open")},h=()=>{a(),s(null)};return e.createElement("section",{className:_.transactions_section},e.createElement("div",{className:_.transactions_container},N&&e.createElement("ul",{className:_.transactions_list},o.length>0?o.map(m=>e.createElement(M,{handleEditItem:p,key:m.id,transaction:m})):e.createElement("div",{className:_.empty_transactions},"No transactions")),b&&e.createElement(e.Fragment,null,o.length>0?e.createElement("table",{className:_.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:_.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:_.table_body},o.map(m=>e.createElement(M,{handleEditItem:p,key:m.id,transaction:m})))):e.createElement(e.Fragment,null,e.createElement("table",{className:_.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:_.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:_.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>h(),className:_.btn_add}," ",e.createElement("svg",{className:_.icon_plus},e.createElement("use",{xlinkHref:`${D}#icon-plus`})))),t&&e.createElement(Q,{closeModal:a},c?e.createElement(ke,{editContent:c,categories:d,toggle:a}):e.createElement(ze,{categories:d,toggle:a})))},ot=()=>{const t=w(),a=ee().windowWidth;return E.useEffect(()=>{t(te())},[t]),e.createElement(e.Fragment,null,a<768&&e.createElement(ne,null),e.createElement(at,null))};export{ot as default};
//# sourceMappingURL=HomeTab-e4e5b8cf.js.map
