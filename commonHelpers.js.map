{"version":3,"file":"commonHelpers.js","sources":["../src/components/App.jsx","../src/axiosConfig/walletApi.js","../src/redux/auth/operations.js","../src/redux/auth/authSlice.js","../src/redux/transactions/operations.js","../src/redux/transactions/transactionsSlice.js","../src/redux/store.js","../src/index.jsx"],"sourcesContent":["import React from 'react';\n\nexport default function App() {\n  return (\n    <>\n      <h1>HELLO</h1>\n    </>\n  );\n}\n","import axios from 'axios';\n\nexport const walletApi = axios.create({\n  baseURL: 'https://wallet.b.goit.study/api/',\n});\n\nexport const setToken = token => {\n  walletApi.defaults.headers.common.Authorization = `Bearer ${token}`;\n};\nexport const removeToken = () => {\n  walletApi.defaults.headers.common.Authorization = ``;\n};\n","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { walletApi, setToken, removeToken } from '../../axiosConfig/walletApi';\n\nexport const registerThunk = createAsyncThunk(\n  'register',\n  async (credentials, thunkAPI) => {\n    try {\n      const { data } = await walletApi.post('auth/sign-up', credentials);\n      setToken(data.token);\n      console.log(data);\n      return data;\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const loginThunk = createAsyncThunk(\n  'login',\n  async (credentials, thunkAPI) => {\n    try {\n      const { data } = await walletApi.post('auth/sign-in', credentials);\n      setToken(data.token);\n      console.log(data);\n\n      return data;\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const logoutThunk = createAsyncThunk('logout', async (_, thunkAPI) => {\n  try {\n    const { data } = await walletApi.delete('auth/sign-out');\n    console.log(data);\n\n    removeToken();\n\n    return data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});\n\nexport const refreshThunk = createAsyncThunk('refresh', async (_, thunkApi) => {\n  const savedToken = thunkApi.getState().auth.token;\n  if (!savedToken) {\n    return thunkApi.rejectWithValue('Token is not exist!');\n  }\n  try {\n    setToken(savedToken);\n    const { data } = await walletApi.get('users/current');\n    return data;\n  } catch (error) {\n    return thunkApi.rejectWithValue(error.message);\n  }\n});\n","import { createSlice, isAnyOf } from '@reduxjs/toolkit';\nimport {\n  loginThunk,\n  logoutThunk,\n  refreshThunk,\n  registerThunk,\n} from './operations';\n\nconst initialState = {\n  user: {\n    name: '',\n    email: '',\n  },\n  token: null,\n  loading: false,\n  error: false,\n  isLoggedIn: false,\n  isRefresh: false,\n};\n\nconst slice = createSlice({\n  name: 'auth',\n  initialState,\n  selectors: {\n    selectUser: state => state.user,\n    selectIsLoggedIn: state => state.isLoggedIn,\n    selectToken: state => state.isLoggedIn,\n    selectIsRefresh: state => state.isRefresh,\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(logoutThunk.fulfilled, state => {\n        return initialState;\n      })\n      .addCase(refreshThunk.fulfilled, (state, { payload }) => {\n        state.user.name = payload.name;\n        state.user.email = payload.email;\n        state.isLoggedIn = true;\n        state.isRefresh = false;\n      })\n\n      .addMatcher(\n        isAnyOf(registerThunk.fulfilled, loginThunk.fulfilled),\n        (state, { payload }) => {\n          state.user.name = payload.user.name;\n          state.user.email = payload.user.email;\n          state.token = payload.token;\n          state.isLoggedIn = true;\n        }\n      )\n      .addMatcher(\n        isAnyOf(\n          registerThunk.pending,\n          loginThunk.pending,\n          refreshThunk.pending\n        ),\n        state => {\n          state.loading = true;\n          state.error = null;\n          state.isRefresh = true;\n        }\n      )\n      .addMatcher(\n        isAnyOf(\n          registerThunk.rejected,\n          loginThunk.rejected,\n          refreshThunk.rejected\n        ),\n        (state, { payload }) => {\n          state.error = payload;\n          state.loading = false;\n          state.isRefresh = false;\n        }\n      );\n  },\n});\n\nexport const authReducer = slice.reducer;\nexport const { selectIsLoggedIn, selectUser, selectToken, selectIsRefresh } =\n  slice.selectors;\n","import { createAsyncThunk } from '@reduxjs/toolkit';\n\nimport { walletApi } from '../../axiosConfig/walletApi';\n\nexport const fetchTransactionsDataThunk = createAsyncThunk(\n  'fetchTransactionsData',\n  async (_, thunkAPI) => {\n    try {\n      const { data } = await walletApi.get('transactions');\n      return data;\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const deleteTransactionThunk = createAsyncThunk(\n  'deleteTransaction',\n  async (id, thunkAPI) => {\n    try {\n      const { data } = await walletApi.delete(`transactions/${id}`);\n      return data.id;\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const addTransactionThunk = createAsyncThunk(\n  'addTransaction',\n  async (body, thunkAPI) => {\n    try {\n      const { data } = await walletApi.post('transactions', body);\n      return data;\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const editTransactionThunk = createAsyncThunk(\n  'editTransaction',\n  async (body, thunkAPI) => {\n    try {\n      const { data } = await walletApi.patch(`/transactions/${body.id}`, body);\n      return data;\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const fetchTransactionCategoriesThunk = createAsyncThunk(\n  'fetchTransactionCategories',\n  async (_, thunkAPI) => {\n    try {\n      const { data } = await walletApi.get('transaction-categories');\n      return data;\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const fetchTransactionSummaryControllerThunk = createAsyncThunk(\n  'fetchTransactionSummaryController',\n  async (_, thunkAPI) => {\n    try {\n      const { data } = await walletApi.get('transactions-summary');\n      return data;\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  }\n);\n","import { createSlice, isAnyOf } from '@reduxjs/toolkit';\nimport {\n  addTransactionThunk,\n  deleteTransactionThunk,\n  editTransactionThunk,\n  fetchTransactionCategoriesThunk,\n  fetchTransactionsDataThunk,\n} from './operations';\n\nconst initialState = {\n  transactionsList: [],\n  transactionCategories: [],\n  transactionSummaryController: null,\n  loading: false,\n  error: false,\n};\n\nconst transactionsSlice = createSlice({\n  name: 'transactions',\n  initialState,\n  selectors: {\n    selectTransactions: state => state.transactionsList,\n    selectIsLoading: state => state.loading,\n    selectIsError: state => state.error,\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(fetchTransactionsDataThunk.fulfilled, (state, { payload }) => {\n        state.transactionsList = payload;\n        state.loading = false;\n      })\n      .addCase(deleteTransactionThunk.fulfilled, (state, { payload }) => {\n        state.transactionsList = state.transactionsList.filter(\n          transaction => transaction.id !== payload\n        );\n        state.loading = false;\n      })\n      .addCase(addTransactionThunk.fulfilled, (state, { payload }) => {\n        state.transactionsList.push(payload);\n        state.loading = false;\n      })\n      .addCase(editTransactionThunk.fulfilled, (state, { payload }) => {\n        const transactionIndex = state.transactionsList.findIndex(\n          transaction => transaction.id === payload.id\n        );\n        state.transactionsList.splice(transactionIndex, 1, payload);\n        state.loading = false;\n      })\n      .addCase(\n        fetchTransactionCategoriesThunk.fulfilled,\n        (state, { payload }) => {\n          state.transactionCategories = payload;\n          state.loading = false;\n        }\n      )\n      .addCase(\n        fetchTransactionSummaryController.fulfilled,\n        (state, { payload }) => {\n          state.transactionSummaryController = payload;\n          state.loading = false;\n        }\n      )\n      .addMatcher(\n        isAnyOf(\n          fetchTransactionsDataThunk.pending,\n          deleteTransactionThunk.pending,\n          addTransactionThunk.pending,\n          editTransactionThunk.pending,\n          fetchTransactionCategoriesThunk.pending,\n          fetchTransactionSummaryController.pending\n        ),\n        (state, { payload }) => {\n          state.loading = true;\n          state.error = null;\n        }\n      )\n      .addMatcher(\n        isAnyOf(\n          fetchTransactionsDataThunk.rejected,\n          deleteTransactionThunk.rejected,\n          addTransactionThunk.rejected,\n          editTransactionThunk.rejected,\n          fetchTransactionCategoriesThunk.rejected,\n          fetchTransactionSummaryController.rejected\n        ),\n        (state, { payload }) => {\n          state.error = payload;\n          state.loading = false;\n        }\n      );\n  },\n});\n\nexport const transactionsReducer = transactionsSlice.reducer;\nexport const { selectTransactions, selectIsLoading, selectIsError } =\n  transactionsSlice.selectors;\n","import { configureStore } from '@reduxjs/toolkit';\nimport storage from 'redux-persist/lib/storage';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\n\nimport { authReducer } from './auth/authSlice';\nimport { transactionsReducer } from './transactions/transactionsSlice';\n\nconst persistConfig = {\n  key: 'auth',\n  version: 1,\n  storage,\n  whitelist: ['token'],\n};\n\nconst persistedReducer = persistReducer(persistConfig, authReducer);\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistedReducer,\n    transactions: transactionsReducer,\n  },\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n      },\n    }),\n\n  devTools: process.env.NODE_ENV !== 'production',\n});\n\nexport const persistor = persistStore(store);\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport ReactDOM from 'react-dom/client';\n\nimport App from './components/App';\n\nimport { persistor, store } from './redux/store';\nimport { PersistGate } from 'redux-persist/integration/react';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <App />\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>\n);\n"],"names":["App","React","walletApi","axios","setToken","token","removeToken","registerThunk","createAsyncThunk","credentials","thunkAPI","data","error","loginThunk","logoutThunk","_","refreshThunk","thunkApi","savedToken","initialState","slice","createSlice","state","builder","payload","isAnyOf","authReducer","fetchTransactionsDataThunk","deleteTransactionThunk","id","addTransactionThunk","body","editTransactionThunk","fetchTransactionCategoriesThunk","transactionsSlice","transaction","transactionIndex","transactionsReducer","persistConfig","storage","persistedReducer","persistReducer","store","configureStore","getDefaultMiddleware","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","ReactDOM","Provider","PersistGate"],"mappings":"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"}