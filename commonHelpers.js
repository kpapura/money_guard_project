import{R as s,_ as O,r as T,A as W,a as q,u as A,N as b,o as V,b as N,c,d as L,e as u,f as v,g as I,O as M,h as G,i as $,j as p,k,l as E,p as D,m as z,n as B,q as U,F as H,s as K,P as Q,t as Y,v as J,w as X,x as Z,B as ee,y as te,z as re,Q as se}from"./assets/vendor-0d317155.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();const ae="_form_jpfz7_1",ne={form:ae},R=({register:r,errors:t,name:e,placeholder:a})=>s.createElement("label",null,s.createElement("input",{autoComplete:e,...r(e),type:"text",placeholder:a}),(t==null?void 0:t[e])&&s.createElement("span",null,t[e].message)),oe=({password:r})=>s.createElement(s.Fragment,null,s.createElement(O,{password:r,minLength:6,scoreWordStyle:{display:"none"}})),S=({register:r,errors:t,name:e,placeholder:a,getValues:n})=>{const[o,i]=T.useState("password"),[h,d]=T.useState("");function x(f){d(f.target.value)}return s.createElement("label",null,s.createElement("input",{autoComplete:e,...r(e,{required:"Password is required",validate:f=>{n("password")}}),type:o,placeholder:a,onChange:x})," ",s.createElement("div",{onClick:()=>{i(o==="password"?"text":"password")}},o==="password"?s.createElement(W,null):s.createElement(q,null)),(t==null?void 0:t[e])&&s.createElement("span",null,t[e].message),e==="passwordConfirmation"&&s.createElement(oe,{password:h}))},P=({onDataSubmit:r,formType:t,schema:e})=>{const{register:a,reset:n,handleSubmit:o,formState:{errors:i}}=A({resolver:V(e)}),h=d=>{delete d.passwordConfirmation,r(d),console.log(d),n()};return s.createElement("form",{className:ne.form,onSubmit:o(h)},t==="register"&&s.createElement(R,{register:a,errors:i,name:"username",placeholder:"Name"}),s.createElement(R,{register:a,errors:i,name:"email",placeholder:"Email"}),s.createElement(S,{register:a,errors:i,name:"password",placeholder:"Password"}),t==="register"&&s.createElement(s.Fragment,null,s.createElement(S,{register:a,errors:i,name:"passwordConfirmation",placeholder:"Confirm password"})),t==="login"?s.createElement(s.Fragment,null,s.createElement("button",{type:"submit"},"LOG IN"),s.createElement(b,{to:"/register"},"REGISTER")):s.createElement(s.Fragment,null,s.createElement("button",{type:"submit"},"REGISTER"),s.createElement(b,{to:"/login"},"LOGIN")),s.createElement("button",{hidden:!0}))},l=N.create({baseURL:"https://wallet.b.goit.study/api/"}),w=r=>{l.defaults.headers.common.Authorization=`Bearer ${r}`},le=()=>{l.defaults.headers.common.Authorization=""},m=c("register",async(r,t)=>{try{const{data:e}=await l.post("auth/sign-up",r);return w(e.token),console.log(e),e}catch(e){return t.rejectWithValue(e.message)}}),g=c("login",async(r,t)=>{try{const{data:e}=await l.post("auth/sign-in",r);return w(e.token),console.log(e),e}catch(e){return t.rejectWithValue(e.message)}}),ie=c("logout",async(r,t)=>{try{const{data:e}=await l.delete("auth/sign-out");return console.log(e),le(),e}catch(e){return t.rejectWithValue(e.message)}}),y=c("refresh",async(r,t)=>{const e=t.getState().auth.token;if(!e)return t.rejectWithValue("Token is not exist!");try{w(e);const{data:a}=await l.get("users/current");return a}catch(a){return t.rejectWithValue(a.message)}}),ce=L({password:u().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:u().required().email("Email is not valid")}).required(),ue=()=>{const r=v(),t=I(),e=n=>{t(g(n)).unwrap().then(()=>{r("/")}).catch(o=>{console.log(o.message)})},a={email:"tomato9@gmail.com",password:"0000000"};return s.createElement("div",null,s.createElement(P,{formType:"login",onDataSubmit:e,values:a,schema:ce}))},de=()=>s.createElement("main",null,s.createElement(M,null)),me=L({username:u().required(),password:u().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:u().required().email("Email is not valid"),passwordConfirmation:u().oneOf([G("password"),null],"Passwords must match")}).required(),ge=()=>{const r=I(),t=v(),e=a=>{r(m(a)),t("/login")};return s.createElement("div",null,s.createElement(P,{onDataSubmit:e,formType:"register",schema:me}))},he=c("fetchTransactionsData",async(r,t)=>{try{const{data:e}=await l.get("transactions");return e}catch(e){return t.rejectWithValue(e.message)}}),fe=c("deleteTransaction",async(r,t)=>{try{return await l.delete(`transactions/${r}`),r}catch(e){return t.rejectWithValue(e.message)}}),pe=c("addTransaction",async(r,t)=>{try{const{data:e}=await l.post("transactions",r);return e}catch(e){return t.rejectWithValue(e.message)}}),Ee=c("editTransaction",async(r,t)=>{try{const{data:e}=await l.patch(`/transactions/${r.id}`,r);return e}catch(e){return t.rejectWithValue(e.message)}}),ye=c("fetchTransactionCategories",async(r,t)=>{try{const{data:e}=await l.get("transaction-categories");return e}catch(e){return t.rejectWithValue(e.message)}});c("fetchTransactionSummaryController",async(r,t)=>{try{const{data:e}=await l.get("transactions-summary");return e}catch(e){return t.rejectWithValue(e.message)}});function we(){return s.createElement("div",null,s.createElement("h1",null,"Hello"),s.createElement($,null,s.createElement(p,{path:"/",element:s.createElement(de,null)},s.createElement(p,{path:"login",element:s.createElement(ue,null)}),s.createElement(p,{path:"register",element:s.createElement(ge,null)}))))}const C={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1},j=k({name:"auth",initialState:C,selectors:{selectUser:r=>r.username,selectIsLoggedIn:r=>r.isLoggedIn,selectToken:r=>r.isLoggedIn,selectIsRefresh:r=>r.isRefresh},extraReducers:r=>{r.addCase(ie.fulfilled,t=>C).addCase(y.fulfilled,(t,{payload:e})=>{t.user.username=e.username,t.user.email=e.email,t.isLoggedIn=!0,t.isRefresh=!1}).addMatcher(E(m.fulfilled,g.fulfilled),(t,{payload:e})=>{t.user.username=e.user.username,t.user.email=e.user.email,t.user.password=e.user.password,t.token=e.token,t.isLoggedIn=!0}).addMatcher(E(m.pending,g.pending,y.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(E(m.rejected,g.rejected,y.rejected),(t,{payload:e})=>{t.error=e,t.loading=!1,t.isRefresh=!1})}}),Te=j.reducer;j.selectors;const be={transactionsList:[],transactionCategories:[],transactionSummaryController:null,loading:!1,error:!1},_=k({name:"transactions",initialState:be,selectors:{selectTransactions:r=>r.transactionsList,selectIsLoading:r=>r.loading,selectIsError:r=>r.error,selectTransactionCategories:r=>r.transactionCategories},extraReducers:r=>{r.addCase(he.fulfilled,(t,{payload:e})=>{t.transactionsList=e,t.loading=!1}).addCase(fe.fulfilled,(t,{payload:e})=>{t.transactionsList=t.transactionsList.filter(a=>a.id!==e),t.loading=!1}).addCase(pe.fulfilled,(t,{payload:e})=>{t.transactionsList.push(e),t.loading=!1}).addCase(Ee.fulfilled,(t,{payload:e})=>{const a=t.transactionsList.findIndex(n=>n.id===e.id);t.transactionsList.splice(a,1,e),t.loading=!1}).addCase(ye.fulfilled,(t,{payload:e})=>{t.transactionCategories=e,t.loading=!1})}}),Re=_.reducer;_.selectors;const Se={key:"auth",version:1,storage:U,whitelist:["token"]},Ce=D(Se,Te),F=z({reducer:{auth:Ce,transactions:Re},middleware:r=>r({serializableCheck:{ignoredActions:[H,K,Q,Y,J,X]}}),devTools:!1}),Le=B(F);Z.createRoot(document.getElementById("root")).render(s.createElement(ee,{basename:"/money_guard_project/"},s.createElement(te,{store:F},s.createElement(re,{loading:null,persistor:Le},s.createElement(we,null),s.createElement(se,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
