import{R as e,_ as Ce,r as m,P as xe,a as Se,u as ie,N as te,o as ke,b as me,c as y,d as ue,e as T,f as Y,g as N,B as I,h as J,i as M,j as Te,k as U,O as Ie,l as De,m as k,S as Re,D as Le,n as Me,p as O,q as $e,s as ne,F as Be,t as Pe,v as je,w as Oe,x as Ae,y as We,z as qe,A as de,C as Fe,E as Ve,G as ze,H as Ue,Q as Ge}from"./assets/vendor-bb53eddd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const He="_login_register_section_ytntg_1",Qe="_register_login_section_ytntg_2",Xe="_gradient_container_ytntg_24",Ye="_form_container_ytntg_32",Je="_form_ytntg_32",Ke="_submit_btn_ytntg_70",Ze="_inactive_btn_ytntg_90",et="_password_label_ytntg_107",tt="_password_input_ytntg_116",nt="_error_container_ytntg_127",at="_username_ytntg_131",st="_email_ytntg_137",rt="_password_ytntg_107",ct="_cpassword_ytntg_149",ot="_eye_ytntg_164",lt="_name_label_ytntg_168",it="_name_input_ytntg_176",mt="_name_user_icon_ytntg_195",ut="_icon_email_cont_ytntg_199",dt="_password_icon_ytntg_203",_t="_button_cont_ytntg_207",gt="_strengthBar_ytntg_213",Et="_porgress_container_ytntg_234",ht="_logo_wrapper_ytntg_239",pt="_background_container_ytntg_289",l={login_register_section:He,register_login_section:Qe,gradient_container:Xe,form_container:Ye,form:Je,submit_btn:Ke,inactive_btn:Ze,password_label:et,password_input:tt,error_container:nt,username:at,email:st,password:rt,cpassword:ct,eye:ot,name_label:lt,name_input:it,name_user_icon:mt,icon_email_cont:ut,password_icon:dt,button_cont:_t,strengthBar:gt,porgress_container:Et,logo_wrapper:ht,background_container:pt},ae=({register:n,errors:t,name:a,placeholder:s,className:r})=>e.createElement(e.Fragment,null,e.createElement("div",{className:l.error_container},e.createElement("label",{className:l.name_label},a==="username"?e.createElement("div",{className:l.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:l.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:l.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:l[r]},t[a].message))),bt=({password:n})=>e.createElement("div",{className:l.porgress_container},e.createElement(Ce,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:l.strengthBar})),se=({register:n,errors:t,name:a,placeholder:s,getValues:r,formType:c,className:u})=>{const[d,_]=m.useState("password"),[w,p]=m.useState("");function i(g){p(g.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:l.error_container},e.createElement("label",{className:l.password_label},e.createElement("div",{className:l.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:g=>g===r("password")||"Passwords do not match"}),type:d,placeholder:s,onChange:i,className:l.password_input})," ",e.createElement("div",{className:l.eye,onClick:()=>{_(d==="password"?"text":"password")}},d==="password"?e.createElement(xe,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Se,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:l[u]},t[a].message)),a==="password"&&c!=="login"&&e.createElement(bt,{password:w}))},_e=({onDataSubmit:n,formType:t,schema:a})=>{const[s,r]=m.useState(0);m.useEffect(()=>{const p=()=>{r(window.innerWidth)};return window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[]);const{register:c,reset:u,handleSubmit:d,formState:{errors:_}}=ie({resolver:ke(a)}),w=p=>{const{passwordConfirmation:i,...g}=p;n(g),u()};return e.createElement("section",{className:t==="login"?`${l.login_register_section}`:`${l.register_login_section}`}," ",e.createElement("div",{className:l.background_container},e.createElement("div",{className:l.form_container,style:{padding:s<768&&t==="login"?"98px 20px":s>768&&t==="login"?"80px 62px":"40px 62px"}},e.createElement("a",{href:"",className:l.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("form",{className:l.form,onSubmit:d(w)},t==="register"&&e.createElement(ae,{register:c,errors:_,name:"username",placeholder:"Name",className:"username"}),e.createElement(ae,{register:c,errors:_,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(se,{register:c,errors:_,name:"password",placeholder:"Password",onChange:p=>handleChange(p),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(se,{register:c,errors:_,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:l.button_cont},e.createElement("button",{className:l.submit_btn,type:"submit"},"log in"),e.createElement(te,{className:l.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:l.button_cont},e.createElement("button",{className:l.submit_btn,type:"submit"},"register"),e.createElement(te,{className:l.inactive_btn,to:"/login"},"log in"))," "))))},f=me.create({baseURL:"https://wallet.b.goit.study/api/"}),K=n=>{f.defaults.headers.common.Authorization=`Bearer ${n}`},ft=()=>{f.defaults.headers.common.Authorization=""},A=y("register",async(n,t)=>{try{const{data:a}=await f.post("auth/sign-up",n);return K(a.token),a}catch(a){return t.rejectWithValue(a.message)}}),W=y("login",async(n,t)=>{try{const{data:a}=await f.post("auth/sign-in",n);return K(a.token),a}catch(a){return t.rejectWithValue(a.message)}}),ge=y("logout",async(n,t)=>{try{const{data:a}=await f.delete("auth/sign-out");return ft(),a}catch(a){return t.rejectWithValue(a.message)}}),q=y("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{K(a);const{data:s}=await f.get("users/current");return s}catch(s){return t.rejectWithValue(s.message)}}),yt=ue({password:T().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:T().required().email("Email is not valid")}).required(),wt=()=>{const n=Y(),t=N(),a=r=>{t(W(r)).unwrap().then(()=>{n("/")}).catch(c=>{console.log(c.message),I(c)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement("div",null,e.createElement(_e,{formType:"login",onDataSubmit:a,values:s,schema:yt}))},Nt="_wrap_1nzyu_1",vt="_logo_1nzyu_5",Ct="_text_1nzyu_14",G={wrap:Nt,logo:vt,text:Ct},H={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},Z=J({name:"auth",initialState:H,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>H},extraReducers:n=>{n.addCase(ge.fulfilled,t=>H).addCase(q.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.isRefresh=!1,t.loading=!1}).addMatcher(M(A.fulfilled,W.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.isLoggedIn=!0,t.loading=!1}).addMatcher(M(A.pending,W.pending,q.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(M(A.rejected,W.rejected,q.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),xt=Z.reducer,{selectIsLoggedIn:Qn,selectUser:St,selectToken:Xn,selectIsRefresh:Yn,selectBalance:Jn}=Z.selectors,{logout:kt}=Z.actions,Tt=({closeModal:n})=>{const t=Y(),a=N(),s=()=>{a(ge()),a(kt()),n(),t("/login")};return e.createElement("div",{className:G.wrap},e.createElement("a",{href:"",className:G.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:G.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},It="_modalWrapper_4issq_1",Dt="_modalContent_4issq_12",Rt="_closeButton_4issq_24",Q={modalWrapper:It,modalContent:Dt,closeButton:Rt},Lt=document.querySelector("#modal"),Ee=({closeModal:n,children:t})=>{const a=m.useCallback(r=>{r.key==="Escape"&&n()},[n]);m.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=r=>{r.target===r.currentTarget&&n()};return Te.createPortal(e.createElement("div",{onClick:s,className:Q.modalWrapper},e.createElement("div",{className:Q.modalContent},e.createElement("button",{className:Q.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),Lt)},he=()=>{const[n,t]=m.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(c=>!c)}},Mt="_header_1snvw_1",$t="_hederContainer_1snvw_9",Bt="_logo_1snvw_17",Pt="_wrap_1snvw_27",jt="_user_1snvw_32",Ot="_button_1snvw_38",At="_icon_1snvw_52",Wt="_heder_1snvw_9",S={header:Mt,hederContainer:$t,logo:Bt,wrap:Pt,user:jt,button:Ot,icon:At,heder:Wt},qt=()=>{const{isOpen:n,toggle:t}=he(),a=U(St),s=a.email.indexOf("@"),r=a.email.slice(0,s);return e.createElement("header",{className:S.header},e.createElement("div",{className:S.hederContainer},e.createElement("a",{href:"",className:S.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("div",{className:S.wrap}," ",e.createElement("p",{className:S.user},r),e.createElement("button",{className:S.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:S.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement(Ee,{closeModal:t},e.createElement(Tt,{closeModal:t}))))},Ft=()=>e.createElement(e.Fragment,null,e.createElement(qt,null),e.createElement(Ie,null)),Vt=ue({username:T().required(),password:T().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:T().required().email("Email is not valid"),passwordConfirmation:T().oneOf([De("password"),null],"Passwords must match")}).required(),zt=()=>{const n=N(),t=Y(),a=s=>{n(A(s)).unwrap().then(()=>{t("/login")}).catch(r=>{console.log(r),I(r)})};return e.createElement("div",null,e.createElement(_e,{onDataSubmit:a,formType:"register",schema:Vt}))},$=y("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await f.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),F=y("deleteTransaction",async(n,t)=>{try{return await f.delete(`transactions/${n}`),n}catch(a){return t.rejectWithValue(a.message)}}),V=y("addTransaction",async(n,t)=>{try{const{data:a}=await f.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),z=y("editTransaction",async(n,t)=>{try{const{data:a}=await f.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),B=y("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await f.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),X=y("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await f.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),Ut={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},ee=J({name:"transactions",initialState:Ut,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase($.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(F.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a),t.loading=!1}).addCase(V.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(z.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(r=>r.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(B.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(X.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(M($.pending,F.pending,V.pending,z.pending,B.pending,X.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(M($.rejected,F.rejected,V.rejected,z.rejected,B.rejected,X.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),Gt=ee.reducer;ee.actions;const{selectTransactions:Ht,selectIsLoading:Kn,selectIsError:Zn,selectTransactionCategories:pe,selectYear:ea,selectMonth:ta,selectCategoriesSummary:na,selectExpenseSummary:aa,selectIncomeSummary:sa,selectPeriodTotal:ra}=ee.selectors,Qt="_transaction_item_2loug_1",Xt="_income_border_2loug_6",Yt="_expense_border_2loug_10",Jt="_income_text_2loug_14",Kt="_expense_text_2loug_19",Zt="_transactions_table_mobile_2loug_24",en="_transaction_colum_2loug_30",tn="_transaction_first_column_2loug_34",nn="_transaction_row_mobile_2loug_38",an="_transaction_row_2loug_38",sn="_transactions_table_2loug_24",rn="_btn_delete_2loug_61",cn="_btn_edit_2loug_76",on="_btn_wrapper_2loug_86",ln="_icon_edit_2loug_93",o={transaction_item:Qt,income_border:Xt,expense_border:Yt,income_text:Jt,expense_text:Kt,transactions_table_mobile:Zt,transaction_colum:en,transaction_first_column:tn,transaction_row_mobile:nn,transaction_row:an,transactions_table:sn,btn_delete:rn,btn_edit:cn,btn_wrapper:on,icon_edit:ln},be="/money_guard_project/assets/sprite-d3dedbbb.svg",fe=()=>{const n=k.useMediaQuery({query:"(min-width: 768px)"}),t=k.useMediaQuery({query:"(min-width: 1280px)"}),a=k.useMediaQuery({query:"(max-width: 768px)"}),s=k.useMediaQuery({query:"(max-width: 767px)"}),r=k.useMediaQuery({query:"(orientation: portrait)"}),c=k.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:r,isRetina:c}},re=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:r,categoryId:c,comment:u,amount:d}=n,{isBigScreenOrTablet:_,isMobile:w}=fe(),p=N(),i=U(pe);function g(R){const j=i.find(L=>L.id===R);return j?j.name:"Unknown Category"}const v=R=>{p(F(R))},P=r.toLowerCase()==="income"?"+":"-",x=r.toLowerCase()==="income"?o.income_border:o.expense_border,D=r.toLowerCase()==="income"?o.income_text:o.expense_text;return e.createElement(e.Fragment,null,w&&e.createElement("li",{key:a,className:`${o.transaction_item} ${x}`},e.createElement("table",{className:o.transactions_table_mobile},e.createElement("tbody",null,e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Type"),e.createElement("td",null,P)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Category"),e.createElement("td",null,g(c))),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Comment"),e.createElement("td",null,u)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Sum"),e.createElement("td",{className:D},d)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:o.btn_delete,onClick:()=>v(a)},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:d,comment:u,transactionDate:s},a),className:o.btn_edit}," ",e.createElement("svg",{className:o.icon_edit},e.createElement("use",{xlinkHref:`${be}#icon-edit`}))," ","Edit")))))),_&&e.createElement("tr",{className:o.transaction_row},e.createElement("td",{className:o.transaction_colum},s),e.createElement("td",{className:o.transaction_colum,style:{textAlign:"center"}},P),e.createElement("td",{className:o.transaction_colum},g(c)),e.createElement("td",{className:o.transaction_colum},u),e.createElement("td",{className:`${o.transaction_colum} ${D}`,style:{textAlign:"right"}},d),e.createElement("td",{className:o.transaction_colum}," ",e.createElement("div",{className:o.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:d,comment:u,transactionDate:s},a),className:o.btn_edit},"Edit"),e.createElement("button",{className:o.btn_delete,onClick:()=>v(a)},"Delete")))))},mn="_transactions_section_mjcgn_1",un="_transactions_container_mjcgn_34",dn="_transactions_table_mjcgn_75",_n="_transactions_list_mjcgn_82",gn="_transaction_row_head_mjcgn_88",En="_btn_add_mjcgn_111",hn="_icon_plus_mjcgn_126",pn="_empty_transactions_mjcgn_132",b={transactions_section:mn,transactions_container:un,transactions_table:dn,transactions_list:_n,transaction_row_head:gn,btn_add:En,icon_plus:hn,empty_transactions:pn},bn="_labelExpense_1gb48_13",fn="_labelIncome_1gb48_19",yn="_slider_1gb48_26",wn="_round_1gb48_73",C={switch:"_switch_1gb48_1",labelExpense:bn,labelIncome:fn,slider:yn,round:wn,"transaction-switcher":"_transaction-switcher_1gb48_80"},Nn=({onChange:n})=>{const[t,a]=m.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:C["transaction-switcher"]},e.createElement("span",{className:C.labelIncome},"Income"),e.createElement("label",{className:`${C.switch} ${t?C.income:C.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${C.slider} ${C.round}`})),e.createElement("span",{className:C.labelExpense},"Expense"))},vn="_formWrapper_1kidh_1",Cn="_header_1kidh_10",xn="_checkBox_1kidh_16",Sn="_boxDate_1kidh_27",kn="_incomeInput_1kidh_35",Tn="_customInput_1kidh_36",In="_comment_1kidh_53",Dn="_selectExpense_1kidh_54",Rn="_btnBox_1kidh_72",Ln="_btn_1kidh_72",Mn="_activeIncome_1kidh_101",$n="_activeExpense_1kidh_104",Bn="_inputContainer_1kidh_108",h={formWrapper:vn,header:Cn,checkBox:xn,boxDate:Sn,incomeInput:kn,customInput:Tn,comment:In,selectExpense:Dn,btnBox:Rn,btn:Ln,activeIncome:Mn,activeExpense:$n,inputContainer:Bn},ce=n=>n<10?"0"+n:n,oe=n=>{const t=n.getFullYear(),a=ce(n.getMonth()+1),s=ce(n.getDate());return`${t}-${a}-${s}`},le=({name:n,register:t,errors:a,placeholder:s,className:r})=>e.createElement("div",{className:h.inputContainer},e.createElement("input",{className:r,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message));function ye({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:r}){const{register:c,handleSubmit:u,formState:{errors:d},setValue:_}=ie(),[w,p]=m.useState(""),[i,g]=m.useState(""),[v,P]=m.useState(new Date);m.useEffect(()=>{g(n?n.type:"EXPENSE")},[n]),m.useEffect(()=>{_("amount",n&&n.amount)},[n,_]),m.useEffect(()=>{_("comment",n&&n.comment)},[n,_]);const x=m.useMemo(()=>t.map(({id:E,name:ve})=>({value:E,label:ve})),[t]),D=m.useMemo(()=>x.find(E=>(n==null?void 0:n.categoryId)===E.value),[n,x]),R=E=>{p(E)},j=E=>{r(s==="add"?{transactionDate:oe(v),amount:+E.amount,comment:E.comment,type:i,categoryId:i==="EXPENSE"?w.value||x[0].value:"063f1132-ba5d-42b4-951d-44011ca46262"}:{transactionDate:oe(v),amount:+E.amount,comment:E.comment})},L=E=>{g(E?"INCOME":"EXPENSE")};return e.createElement("div",null,e.createElement("form",{className:h.formWrapper,onSubmit:u(j)},e.createElement("h1",{className:h.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(Nn,{onChange:L}):e.createElement("div",null,e.createElement("ul",{className:h.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&i==="EXPENSE"||L(!0)},className:n.type==="INCOME"||i==="INCOME"?h.activeIncome:"",disabled:s==="edit"&&i==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&i==="INCOME"||L(!1)},className:i==="EXPENSE"?h.activeExpense:"",disabled:s==="edit"&&i==="INCOME"}," ","Expense"," "))),e.createElement("div",null,i==="EXPENSE"&&e.createElement("div",{className:h.inputContainer},e.createElement(Re,{name:"category",options:x,defaultValue:D||x[0],onChange:R,isDisabled:s==="edit"}),d.category&&e.createElement("span",null,d.category.message)),e.createElement("div",{className:h.boxDate},e.createElement(le,{className:h.incomeInput,name:"amount",placeholder:"0.00",errors:d,register:c}),e.createElement("div",{className:h.inputContainer},e.createElement(Le,{className:h.customInput,selected:n?n.transactionDate:v,onChange:E=>{_("transactionDate",E),P(E)}}),d.transactionDate&&e.createElement("span",null,d.transactionDate.message))),e.createElement(le,{className:h.comment,name:"comment",placeholder:"Comment",errors:d,register:c}),e.createElement("div",{className:h.btnBox},e.createElement("button",{className:h.btn},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:h.btn},"CANCEL")))))}function Pn({categories:n,editContent:t,toggle:a}){const s=N(),r=c=>{s(z({content:{...c},id:t.id})).unwrap().then(u=>{I.success("Changed!"),a()}).catch(u=>{I.error("Credentials is not valid!")})};return e.createElement(ye,{toggle:a,content:t.content,categories:n,onDataSubmit:r,typeForm:"edit"})}function jn({categories:n,toggle:t}){const a=N(),s=r=>{a(V(r)).unwrap().then(()=>{I.success("Transaction was successfully added"),t()}).catch(c=>{I.error("Credentials is not valid!")})};return e.createElement(ye,{categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const On=()=>{const{isOpen:n,toggle:t}=he(),[a,s]=m.useState(""),r=N();m.useEffect(()=>{r($())},[r]),m.useEffect(()=>{r(B())},[r]);const c=U(Ht),u=U(pe),{isBigScreenOrTablet:d,isMobile:_}=fe(),w=(i,g,v)=>{t(),s({content:i,id:g,name:v})},p=()=>{t(),s(null)};return e.createElement("section",{className:b.transactions_section},e.createElement("div",{className:b.transactions_container},_&&e.createElement("ul",{className:b.transactions_list},c.length>0?c.map(i=>e.createElement(re,{handleEditItem:w,key:i.id,transaction:i})):e.createElement("div",{className:b.empty_transactions},"No transactions")),d&&e.createElement(e.Fragment,null,c.length>0?e.createElement("table",{className:b.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:b.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:b.table_body},c.map(i=>e.createElement(re,{handleEditItem:w,key:i.id,transaction:i})))):e.createElement(e.Fragment,null,e.createElement("table",{className:b.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:b.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:b.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>p(),className:b.btn_add}," ",e.createElement("svg",{className:b.icon_plus},e.createElement("use",{xlinkHref:`${be}#icon-plus`})))),n&&e.createElement(Ee,{closeModal:t},a?e.createElement(Pn,{editContent:a,categories:u,toggle:t}):e.createElement(jn,{categories:u,toggle:t})))},An=()=>{const n=N();return m.useEffect(()=>{n($())},[n]),m.useEffect(()=>{n(B())},[n]),e.createElement(On,null)};function Wn(){const n=N();return m.useEffect(()=>{n(q())},[n]),e.createElement("div",null,e.createElement(Me,null,e.createElement(O,{path:"/",element:e.createElement(Ft,null)},e.createElement(O,{path:"login",element:e.createElement(wt,null)}),e.createElement(O,{path:"register",element:e.createElement(zt,null)}),e.createElement(O,{path:"home",element:e.createElement(An,null)}))))}const qn=y("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await me.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),Fn={usdRate:null,eurRate:null,lastFetchTime:null},we=J({name:"currency",initialState:Fn,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(qn.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),Vn=we.reducer;we.selectors;const zn={key:"auth",version:1,storage:de,whitelist:["token"]},Un={key:"root",storage:de},Ne=$e({reducer:{auth:ne(zn,xt),transactions:Gt,currency:ne(Un,Vn)},middleware:n=>n({serializableCheck:{ignoredActions:[Be,Pe,je,Oe,Ae,We]}}),devTools:!1}),Gn=qe(Ne);Fe.createRoot(document.getElementById("root")).render(e.createElement(Ve,null,e.createElement(ze,{store:Ne},e.createElement(Ue,{loading:null,persistor:Gn},e.createElement(Wn,null),e.createElement(Ge,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
