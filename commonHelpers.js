import{a as xe,c as x,b as me,i as q,u as y,R as e,N as Z,d as de,e as I,r as l,f as Ve,g as $,h as O,O as pe,_ as He,P as Ue,j as Ge,k as Se,o as Ie,l as te,m as j,B as P,n as Xe,p as M,S as Qe,D as Je,q as Te,s as je,t as Ke,v as Ze,w as D,x as et,y as he,F as tt,z as nt,A as at,C as st,E as rt,G as ct,H as ot,I as Le,J as lt,K as it,L as mt,M as dt,Q as ut}from"./assets/vendor-7173abd9.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const k=xe.create({baseURL:"https://wallet.b.goit.study/api/"}),ue=n=>{k.defaults.headers.common.Authorization=`Bearer ${n}`},_t=()=>{k.defaults.headers.common.Authorization=""},Y=x("register",async(n,t)=>{try{const{data:a}=await k.post("auth/sign-up",n);return ue(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),V=x("login",async(n,t)=>{try{const{data:a}=await k.post("auth/sign-in",n);return ue(a.token),a}catch(a){return console.log(a),t.rejectWithValue(a.response.data.message)}}),De=x("logout",async(n,t)=>{try{const{data:a}=await k.delete("auth/sign-out");return _t(),a}catch(a){return t.rejectWithValue(a.message)}}),H=x("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{ue(a);const{data:s}=await k.get("users/current");return console.log(s),s}catch(s){return t.rejectWithValue(s.message)}}),re={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},_e=me({name:"auth",initialState:re,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>re},extraReducers:n=>{n.addCase(De.fulfilled,t=>re).addCase(H.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(q(Y.fulfilled,V.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(q(Y.pending,V.pending,H.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(q(Y.rejected,V.rejected,H.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),gt=_e.reducer,{selectIsLoggedIn:ne,selectUser:Et,selectToken:hs,selectIsRefresh:pt,selectBalance:bs,selectIsLoading:fs}=_e.selectors,{logout:ht}=_e.actions,ce=({component:n,redirectTo:t="/"})=>y(ne)?e.createElement(n,null):e.createElement(Z,{to:t}),be=({component:n,redirectTo:t="/"})=>y(ne)?e.createElement(Z,{to:t}):e.createElement(n,null),bt="_wrap_1nzyu_1",ft="_logo_1nzyu_5",vt="_text_1nzyu_14",oe={wrap:bt,logo:ft,text:vt},wt=({closeModal:n})=>{const t=de(),a=I(),s=()=>{a(De()),a(ht()),n(),t("/")};return e.createElement("div",{className:oe.wrap},e.createElement("a",{href:"",className:oe.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:oe.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},Nt="_closeButton_11uif_2",yt="_modalContent_11uif_13",Ct="_modalWrapper_11uif_33",le={closeButton:Nt,modalContent:yt,modalWrapper:Ct},kt=document.querySelector("#modal"),Re=({closeModal:n,children:t})=>{const a=l.useCallback(r=>{r.key==="Escape"&&n()},[n]);l.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=r=>{r.target===r.currentTarget&&n()};return Ve.createPortal(e.createElement("div",{onClick:s,className:le.modalWrapper},e.createElement("div",{className:le.modalContent},e.createElement("button",{className:le.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),kt)},$e=()=>{const[n,t]=l.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(c=>!c)}},xt="_header_1snvw_1",St="_hederContainer_1snvw_9",It="_logo_1snvw_17",Tt="_wrap_1snvw_27",jt="_user_1snvw_32",Lt="_button_1snvw_38",Dt="_icon_1snvw_52",Rt="_heder_1snvw_9",R={header:xt,hederContainer:St,logo:It,wrap:Tt,user:jt,button:Lt,icon:Dt,heder:Rt},$t=()=>{const{isOpen:n,toggle:t}=$e(),a=y(Et),s=a.email.indexOf("@"),r=a.email.slice(0,s);return e.createElement("header",{className:R.header},e.createElement("div",{className:R.hederContainer},e.createElement("a",{href:"",className:R.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("div",{className:R.wrap}," ",e.createElement("p",{className:R.user},r),e.createElement("button",{className:R.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:R.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement(Re,{closeModal:t},e.createElement(wt,{closeModal:t}))))},Me=()=>{const[n,t]=l.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return l.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Mt="_navLinkContainer_dgb7w_1",Bt="_navLinkWrapper_dgb7w_5",Pt="_navLinkTitle_dgb7w_11",Wt="_navLinkIcon_dgb7w_16",At="_active_dgb7w_34",f={navLinkContainer:Mt,navLinkWrapper:Bt,navLinkTitle:Pt,navLinkIcon:Wt,active:At},ee="/money_guard_project/assets/sprite-d3dedbbb.svg",Ot=()=>{const n=Me().windowWidth;return e.createElement("div",{className:f.navLinkContainer},e.createElement("div",{className:f.navLinkWrapper},n<768?e.createElement($,{to:"home",className:({isActive:t})=>O(f.navLinkTitle,t&&f.active)},e.createElement("svg",{width:"38",height:"38",className:f.navLinkIcon},e.createElement("use",{href:"../../img/sprite.svg#icon-home"}))):e.createElement($,{to:"home",className:({isActive:t})=>O(f.navLinkTitle,t&&f.active)},e.createElement("svg",{width:"18",height:"18",className:f.navLinkIcon},e.createElement("use",{xlinkHref:`${ee}#icon-home`})),"Home"),n<768?e.createElement($,{to:"statistics",className:({isActive:t})=>O(f.navLinkTitle,t&&f.active)},e.createElement("svg",{width:"38",height:"38",className:f.navLinkIcon},e.createElement("use",{xlinkHref:`${ee}#icon-statistics`}))):e.createElement($,{to:"statistics",className:({isActive:t})=>O(f.navLinkTitle,t&&f.active)},e.createElement("svg",{width:"18",height:"18",className:f.navLinkIcon},e.createElement("use",{href:"../../img/sprite.svg#icon-statistics"})),"Statistics"),n<768&&e.createElement($,{to:"/currency",className:({isActive:t})=>O(f.navLinkTitle,t&&f.active)},e.createElement("svg",{width:"38",height:"38",className:f.navLinkIcon},e.createElement("use",{href:"../../img/sprite.svg#icon-currency"})))))},Ft=()=>y(ne)?e.createElement(e.Fragment,null,e.createElement($t,null),e.createElement(Ot,null),e.createElement(pe,null)):e.createElement(e.Fragment,null,e.createElement(pe,null)),qt="_login_register_section_1c8bj_1",zt="_register_login_section_1c8bj_2",Yt="_background_container_login_1c8bj_13",Vt="_background_container_registration_1c8bj_14",Ht="_gradient_container_1c8bj_163",Ut="_form_container_1c8bj_171",Gt="_form_1c8bj_171",Xt="_submit_btn_1c8bj_210",Qt="_inactive_btn_1c8bj_230",Jt="_password_label_1c8bj_247",Kt="_password_input_1c8bj_256",Zt="_error_container_1c8bj_267",en="_username_1c8bj_271",tn="_email_1c8bj_277",nn="_password_1c8bj_247",an="_cpassword_1c8bj_289",sn="_eye_1c8bj_304",rn="_name_label_1c8bj_308",cn="_name_input_1c8bj_316",on="_name_user_icon_1c8bj_335",ln="_icon_email_cont_1c8bj_339",mn="_password_icon_1c8bj_343",dn="_button_cont_1c8bj_347",un="_strengthBar_1c8bj_353",_n="_porgress_container_1c8bj_373",gn="_logo_wrapper_1c8bj_378",En="_background_img_container_login_1c8bj_551",pn="_background_img_container_registration_1c8bj_552",hn="_background_container_1c8bj_13",d={login_register_section:qt,register_login_section:zt,background_container_login:Yt,background_container_registration:Vt,gradient_container:Ht,form_container:Ut,form:Gt,submit_btn:Xt,inactive_btn:Qt,password_label:Jt,password_input:Kt,error_container:Zt,username:en,email:tn,password:nn,cpassword:an,eye:sn,name_label:rn,name_input:cn,name_user_icon:on,icon_email_cont:ln,password_icon:mn,button_cont:dn,strengthBar:un,porgress_container:_n,logo_wrapper:gn,background_img_container_login:En,background_img_container_registration:pn,background_container:hn},fe=({register:n,errors:t,name:a,placeholder:s,className:r})=>e.createElement(e.Fragment,null,e.createElement("div",{className:d.error_container},e.createElement("label",{className:d.name_label},a==="username"?e.createElement("div",{className:d.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:d.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:d.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:d[r]},t[a].message))),bn=({password:n})=>e.createElement("div",{className:d.porgress_container},e.createElement(He,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:d.strengthBar})),ve=({register:n,errors:t,name:a,placeholder:s,getValues:r,formType:c,className:m})=>{const[E,i]=l.useState("password"),[g,u]=l.useState("");function h(_){u(_.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:d.error_container},e.createElement("label",{className:d.password_label},e.createElement("div",{className:d.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:_=>_===r("password")||"Passwords do not match"}),type:E,placeholder:s,onChange:h,className:d.password_input})," ",e.createElement("div",{className:d.eye,onClick:()=>{i(E==="password"?"text":"password")}},E==="password"?e.createElement(Ue,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Ge,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:d[m]},t[a].message)),a==="password"&&c!=="login"&&e.createElement(bn,{password:g}))},Be=({onDataSubmit:n,formType:t,schema:a})=>{const[s,r]=l.useState(0);l.useEffect(()=>{const u=()=>{r(window.innerWidth)};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]);const{register:c,reset:m,handleSubmit:E,formState:{errors:i}}=Se({resolver:Ie(a)}),g=u=>{const{passwordConfirmation:h,..._}=u;n(_),m()};return e.createElement(e.Fragment,null,e.createElement("section",{className:t==="login"?`${d.login_register_section}`:`${d.register_login_section}`},t==="login"?e.createElement(e.Fragment,null,e.createElement("div",{className:d.background_img_container_login},e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:d.background_container_login},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))):e.createElement(e.Fragment,null,e.createElement("div",{className:d.background_container_registration},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:d.background_img_container_registration},e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:d.form_container,style:{padding:s<768&&t==="login"?"98px 20px":s>768&&t==="login"?"80px 62px":"40px 62px"}},e.createElement("a",{href:"",className:d.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("form",{className:d.form,onSubmit:E(g)},t==="register"&&e.createElement(fe,{register:c,errors:i,name:"username",placeholder:"Name",className:"username"}),e.createElement(fe,{register:c,errors:i,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(ve,{register:c,errors:i,name:"password",placeholder:"Password",onChange:u=>handleChange(u),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(ve,{register:c,errors:i,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:d.button_cont},e.createElement("button",{className:d.submit_btn,type:"submit"},"log in"),e.createElement($,{className:d.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:d.button_cont},e.createElement("button",{className:d.submit_btn,type:"submit"},"register"),e.createElement($,{className:d.inactive_btn,to:"/login"},"log in"))," "))))},fn=te({password:j().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:j().required().email("Email is not valid")}).required(),vn=()=>{const n=de(),t=I(),a=r=>{t(V(r)).unwrap().then(()=>{n("/home")}).catch(c=>{console.log(c.message),P(c)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement("div",null,e.createElement(Be,{formType:"login",onDataSubmit:a,values:s,schema:fn}))},wn=te({username:j().required(),password:j().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:j().required().email("Email is not valid"),passwordConfirmation:j().oneOf([Xe("password"),null],"Passwords must match")}).required(),Nn="_registerWrapper_15m0u_1",yn={registerWrapper:Nn},Cn=()=>{const n=I(),t=de(),a=s=>{n(Y(s)).unwrap().then(()=>{t("/home")}).catch(r=>{console.log(r),P(r)})};return e.createElement("div",{className:yn.registerWrapper},e.createElement(Be,{onDataSubmit:a,formType:"register",schema:wn}))},U=x("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await k.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),G=x("deleteTransaction",async(n,t)=>{try{return await k.delete(`transactions/${n}`),n}catch(a){return t.rejectWithValue(a.message)}}),X=x("addTransaction",async(n,t)=>{try{const{data:a}=await k.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),Q=x("editTransaction",async(n,t)=>{try{const{data:a}=await k.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),J=x("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await k.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),K=x("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await k.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),ge=()=>{const n=M.useMediaQuery({query:"(min-width: 768px)"}),t=M.useMediaQuery({query:"(min-width: 1280px)"}),a=M.useMediaQuery({query:"(max-width: 768px)"}),s=M.useMediaQuery({query:"(max-width: 767px)"}),r=M.useMediaQuery({query:"(orientation: portrait)"}),c=M.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:r,isRetina:c}},kn={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},Ee=me({name:"transactions",initialState:kn,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(U.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(G.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a),t.loading=!1}).addCase(X.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(Q.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(r=>r.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(J.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(K.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(q(U.pending,G.pending,X.pending,Q.pending,J.pending,K.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(q(U.rejected,G.rejected,X.rejected,Q.rejected,J.rejected,K.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),xn=Ee.reducer;Ee.actions;const{selectTransactions:Sn,selectIsLoading:vs,selectIsError:ws,selectTransactionCategories:Pe,selectYear:Ns,selectMonth:ys,selectCategoriesSummary:In,selectExpenseSummary:Cs,selectIncomeSummary:ks,selectPeriodTotal:xs}=Ee.selectors,Tn="_labelExpense_c530i_8",jn="_labelIncome_c530i_15",Ln="_activeIncome_c530i_46",Dn="_activeExpense_c530i_53",Rn="_slider_c530i_59",$n="_round_c530i_106",S={"transaction-switcher":"_transaction-switcher_c530i_2",switch:"_switch_c530i_22",labelExpense:Tn,labelIncome:jn,activeIncome:Ln,activeExpense:Dn,slider:Rn,round:$n},Mn=({onChange:n})=>{const[t,a]=l.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:S["transaction-switcher"]},e.createElement("span",{className:t?S.activeIncome:S.labelIncome},"Income"),e.createElement("label",{className:`${S.switch} ${t?S.income:S.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${S.slider} ${S.round}`})),e.createElement("span",{className:t?S.labelExpense:S.activeExpense},"Expense"))},Bn="_container_1omsk_2",Pn="_formWrapper_1omsk_13",Wn="_header_1omsk_21",An="_secondContainer_1omsk_27",On="_category_1omsk_30",Fn="_boxDate_1omsk_43",qn="_incomeInput_1omsk_52",zn="_customInput_1omsk_53",Yn="_svgBox_1omsk_70",Vn="_comment_1omsk_91",Hn="_selectExpense_1omsk_92",Un="_btnBox_1omsk_108",Gn="_activeIncome_1omsk_113",Xn="_activeExpense_1omsk_120",Qn="_checkBox_1omsk_160",w={container:Bn,formWrapper:Pn,header:Wn,secondContainer:An,category:On,boxDate:Fn,incomeInput:qn,customInput:zn,svgBox:Yn,comment:Vn,selectExpense:Hn,btnBox:Un,activeIncome:Gn,activeExpense:Xn,checkBox:Qn},we=n=>n<10?"0"+n:n,Ne=n=>{const t=n.getFullYear(),a=we(n.getMonth()+1),s=we(n.getDate());return`${t}-${a}-${s}`},ye=({name:n,register:t,errors:a,placeholder:s,className:r})=>e.createElement("div",{className:w.inputContainer},e.createElement("input",{className:r,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message));function We({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:r,schema:c}){const{register:m,handleSubmit:E,formState:{errors:i},setValue:g,reset:u}=Se({resolver:Ie(c),mode:"onChange"}),[h,_]=l.useState(""),[p,L]=l.useState(""),[W,z]=l.useState(new Date);l.useEffect(()=>{L(n?n.type:"EXPENSE")},[n]),l.useEffect(()=>{g("amount",n&&n.amount)},[n,g]),l.useEffect(()=>{g("comment",n&&n.comment)},[n,g]);const T=l.useMemo(()=>t.map(({id:v,name:Ye})=>({value:v,label:Ye})),[t]),A=l.useMemo(()=>T.find(v=>(n==null?void 0:n.categoryId)===v.value),[n,T]),ae=v=>{_(v)},ze=v=>{s==="add"?(r({transactionDate:Ne(W),amount:p==="EXPENSE"?`-${v.amount}`:v.amount,comment:v.comment,type:p,categoryId:p==="EXPENSE"?h.value||T[0].value:"063f1132-ba5d-42b4-951d-44011ca46262"}),u()):(r({transactionDate:Ne(W),amount:+v.amount,comment:v.comment}),u()),u()},se=v=>{L(v?"INCOME":"EXPENSE")};return e.createElement("div",{className:w.container},e.createElement("form",{className:w.formWrapper,onSubmit:E(ze)},e.createElement("h1",{className:w.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(Mn,{onChange:se}):e.createElement("div",null,e.createElement("ul",{className:w.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&p==="EXPENSE"||se(!0)},className:n.type==="INCOME"||p==="INCOME"?w.activeIncome:"",disabled:s==="edit"&&p==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&p==="INCOME"||se(!1)},className:p==="EXPENSE"?w.activeExpense:"",disabled:s==="edit"&&p==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:w.secondContainer},p==="EXPENSE"&&e.createElement("div",{className:w.category},e.createElement(Qe,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:T,placeholder:"Select category",defaultValue:A&&A,onChange:ae,isDisabled:s==="edit"}),i.category&&e.createElement("span",null,i.category.message)),e.createElement("div",{className:w.boxDate},e.createElement(ye,{className:w.incomeInput,name:"amount",placeholder:"0.00",errors:i,register:m}),e.createElement("div",{className:w.svgBox},e.createElement(Je,{className:w.customInput,selected:n?n.transactionDate:W,onChange:v=>{g("transactionDate",v),z(v)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-date"})),i.transactionDate&&e.createElement("span",null,i.transactionDate.message))),e.createElement(ye,{className:w.comment,name:"comment",placeholder:"Comment",errors:i,register:m}),e.createElement("div",{className:w.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}const Jn=te({comment:j().required("Describe your transaction").min(5,"Give more details"),transactionDate:Te().required("Please choose the date"),amount:je().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function Kn({categories:n,editContent:t,toggle:a}){const s=I(),r=c=>{s(Q({content:{...c},id:t.id})).unwrap().then(m=>{P.success("Changed!"),a()}).catch(m=>{P.error("Credentials is not valid!")})};return e.createElement(We,{schema:Jn,toggle:a,content:t.content,categories:n,onDataSubmit:r,typeForm:"edit"})}const Zn=te({comment:j().required("Describe your transaction").min(5,"Give more details"),transactionDate:Te().required("Please choose the date"),amount:je().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function ea({categories:n,toggle:t}){const a=I(),s=r=>{a(X(r)).unwrap().then(()=>{P.success("Transaction was successfully added"),t()}).catch(c=>{P.error("Credentials is not valid!")})};return e.createElement(We,{schema:Zn,categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const ta="_transaction_item_jemjf_1",na="_income_border_jemjf_6",aa="_expense_border_jemjf_10",sa="_income_text_jemjf_14",ra="_expense_text_jemjf_19",ca="_transactions_table_mobile_jemjf_24",oa="_transaction_colum_jemjf_30",la="_transaction_first_column_jemjf_34",ia="_transaction_row_mobile_jemjf_38",ma="_transaction_row_jemjf_38",da="_table_body_jemjf_57",ua="_btn_delete_jemjf_61",_a="_btn_edit_jemjf_76",ga="_btn_wrapper_jemjf_86",Ea="_icon_edit_jemjf_93",o={transaction_item:ta,income_border:na,expense_border:aa,income_text:sa,expense_text:ra,transactions_table_mobile:ca,transaction_colum:oa,transaction_first_column:la,transaction_row_mobile:ia,transaction_row:ma,table_body:da,btn_delete:ua,btn_edit:_a,btn_wrapper:ga,icon_edit:Ea},Ce=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:r,categoryId:c,comment:m,amount:E}=n,{isBigScreenOrTablet:i,isMobile:g}=ge(),u=I(),h=y(Pe);function _(T){const A=h.find(ae=>ae.id===T);return A?A.name:"Unknown Category"}const p=T=>{u(G(T))},L=r.toLowerCase()==="income"?"+":"-",W=r.toLowerCase()==="income"?o.income_border:o.expense_border,z=r.toLowerCase()==="income"?o.income_text:o.expense_text;return e.createElement(e.Fragment,null,g&&e.createElement("li",{key:a,className:`${o.transaction_item} ${W}`},e.createElement("table",{className:o.transactions_table_mobile},e.createElement("tbody",{className:o.table_body},e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Type"),e.createElement("td",null,L)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Category"),e.createElement("td",null,_(c))),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Comment"),e.createElement("td",null,m)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Sum"),e.createElement("td",{className:z},E)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:o.btn_delete,onClick:()=>p(a)},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:E,comment:m,transactionDate:s},a),className:o.btn_edit},e.createElement("svg",{className:o.icon_edit},e.createElement("use",{xlinkHref:`${ee}#icon-edit`}))," ","Edit")))))),i&&e.createElement("tr",{className:o.transaction_row},e.createElement("td",{className:o.transaction_colum},s),e.createElement("td",{className:o.transaction_colum,style:{textAlign:"center"}},L),e.createElement("td",{className:o.transaction_colum},_(c)),e.createElement("td",{className:o.transaction_colum},m),e.createElement("td",{className:`${o.transaction_colum} ${z}`,style:{textAlign:"right"}},E),e.createElement("td",{className:o.transaction_colum},e.createElement("div",{className:o.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:E,comment:m,transactionDate:s},a),className:o.btn_edit},"Edit"),e.createElement("button",{className:o.btn_delete,onClick:()=>p(a)},"Delete")))))},pa="_transactions_section_smf2v_1",ha="_transactions_container_smf2v_34",ba="_transactions_table_smf2v_85",fa="_transactions_list_smf2v_92",va="_transaction_row_head_smf2v_98",wa="_table_body_smf2v_121",Na="_btn_add_smf2v_125",ya="_icon_plus_smf2v_140",Ca="_empty_transactions_smf2v_146",C={transactions_section:pa,transactions_container:ha,transactions_table:ba,transactions_list:fa,transaction_row_head:va,table_body:wa,btn_add:Na,icon_plus:ya,empty_transactions:Ca},ka=()=>{const{isOpen:n,toggle:t}=$e(),[a,s]=l.useState(""),r=y(Sn),c=y(Pe),{isBigScreenOrTablet:m,isMobile:E}=ge();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const i=(u,h,_)=>{t(),s({content:u,id:h,name:_}),n&&document.body.classList.add("modal-open")},g=()=>{t(),s(null)};return e.createElement("section",{className:C.transactions_section},e.createElement("div",{className:C.transactions_container},E&&e.createElement("ul",{className:C.transactions_list},r.length>0?r.map(u=>e.createElement(Ce,{handleEditItem:i,key:u.id,transaction:u})):e.createElement("div",{className:C.empty_transactions},"No transactions")),m&&e.createElement(e.Fragment,null,r.length>0?e.createElement("table",{className:C.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:C.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:C.table_body},r.map(u=>e.createElement(Ce,{handleEditItem:i,key:u.id,transaction:u})))):e.createElement(e.Fragment,null,e.createElement("table",{className:C.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:C.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:C.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>g(),className:C.btn_add}," ",e.createElement("svg",{className:C.icon_plus},e.createElement("use",{xlinkHref:`${ee}#icon-plus`})))),n&&e.createElement(Re,{closeModal:t},a?e.createElement(Kn,{editContent:a,categories:c,toggle:t}):e.createElement(ea,{categories:c,toggle:t})))},Ae=x("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await xe.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),xa={usdRate:null,eurRate:null,lastFetchTime:null},Oe=me({name:"currency",initialState:xa,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(Ae.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),Sa=Oe.reducer,{selectUsdRate:Ia,selectEurRate:Ta,selectLastFetchTime:ja}=Oe.selectors,La="_wrapper_d2ubo_14",Da="_title_d2ubo_49",Ra="_row_d2ubo_79",$a="_titleItem_d2ubo_97",Ma="_rowItem_d2ubo_98",Ba="_vector_d2ubo_104",Pa="_image_d2ubo_109",Wa="_secondimage_d2ubo_132",Aa="_smallnumeur_d2ubo_148",Oa="_smallnumusd_d2ubo_158",b={wrapper:La,title:Da,row:Ra,titleItem:$a,rowItem:Ma,vector:Ba,image:Pa,secondimage:Wa,smallnumeur:Aa,smallnumusd:Oa};function Fe(){const n=I(),t=y(Ia),a=y(Ta),s=y(ja),{isDesktopOrLaptop:r,isBigScreen:c,isTabletOrMobile:m,isRetina:E}=ge();let i="../../img/images/currency_mobile.webp",g="../../img/images/line_desc_mob_1x.webp";return window.devicePixelRatio>=2?r||c?(i="../../img/images/currency_desk@2x.webp",g="../../img/images/line_desc_2x.webp"):m&&(i="../../img/images/currency_tablet@2x.webp",g="../../img/images/line_desc_tab_2x.webp"):r||c?(i="../../img/images/currency_desk.webp",g="../../img/images/line_desc_1x.webp"):m&&(i="../../img/images/currency_tablet.webp",g="../../img/images/line_desc_tab_1x.webp"),l.useEffect(()=>{(new Date().getTime()-s)/(1e3*60*60)>1&&n(Ae())},[n,s]),e.createElement("div",{className:b.wrapper},e.createElement("div",{className:b.secondwrapper},e.createElement("ul",{className:b.title},e.createElement("li",{className:b.titleItem},"Currency"),e.createElement("li",{className:b.titleItem},"Purchase"),e.createElement("li",{className:b.titleItem},"Sale")),t&&e.createElement("ul",{className:b.row},e.createElement("li",{className:b.rowItem},"USD"),e.createElement("li",{className:b.rowItem},t.rateBuy),e.createElement("li",{className:b.rowItem},t.rateSell)),a&&e.createElement("ul",{className:b.row},e.createElement("li",{className:b.rowItem},"EUR"),e.createElement("li",{className:b.rowItem},a.rateBuy),e.createElement("li",{className:b.rowItem},a.rateSell)),r&&e.createElement(e.Fragment,null,e.createElement("p",{className:b.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:b.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:b.image,src:i,alt:"Currency rate"}),e.createElement("img",{className:b.secondimage,src:g,alt:"Currency rate"})))}const Fa=()=>{const n=Me().windowWidth,t=I();return l.useEffect(()=>{t(U())},[t]),l.useEffect(()=>{t(J())},[t]),e.createElement(e.Fragment,null,n>=768&&e.createElement(Fe,null),e.createElement(ka,null))},qa="_loaderWrapper_1hccn_1",za="_loader_1hccn_1",Ya="_spinner_1hccn_1",Va="_loaderName_1hccn_34",ie={loaderWrapper:qa,loader:za,spinner:Ya,loaderName:Va},ke=()=>e.createElement("div",{className:ie.loaderWrapper},e.createElement("div",{className:ie.loader},e.createElement("span",{className:ie.loaderName}))),Ha="_selectContainers_1ftgu_1",Ua="_select_1ftgu_1",Ga="_option_1ftgu_19",F={selectContainers:Ha,select:Ua,option:Ga},Xa=({onMonthChange:n,onYearChange:t})=>{const a=new Date,s=a.getFullYear(),[r,c]=l.useState(a.getMonth()+1),[m,E]=l.useState(s),i=_=>{c(parseInt(_.target.value)),n(parseInt(_.target.value))},g=_=>{E(parseInt(_.target.value)),t(parseInt(_.target.value))},u=Array.from({length:s-2019},(_,p)=>s-p).reverse(),h=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.createElement("div",{className:F.selectContainers},e.createElement("select",{className:F.select,value:r,onChange:i},h.map((_,p)=>e.createElement("option",{className:F.option,key:p+1,value:p+1},_))),e.createElement("select",{className:F.select,value:m,onChange:g},u.map(_=>e.createElement("option",{className:F.option,key:_,value:_},_))))},Qa="_statisticsContainer_12lnp_1",Ja="_chartContainer_12lnp_27",Ka="_title_12lnp_31",Za="_tableContainer_12lnp_36",es="_contentContainer_12lnp_59",B={statisticsContainer:Qa,chartContainer:Ja,title:Ka,tableContainer:Za,contentContainer:es},ts="_tableContainer_g4cyy_1",ns="_table_g4cyy_1",as="_tableHeader_g4cyy_12",ss="_tableCell_g4cyy_25",rs="_tableRow_g4cyy_33",cs="_paragraphContainer_g4cyy_37",os="_paragraph_g4cyy_37",N={tableContainer:ts,table:ns,tableHeader:as,tableCell:ss,tableRow:rs,paragraphContainer:cs,paragraph:os},ls=({transactionsSummary:n,colors:t})=>{const a=(n==null?void 0:n.categoriesSummary)||[],s=(n==null?void 0:n.incomeSummary)||0,r=(n==null?void 0:n.expenseSummary)||0;return e.createElement("div",{className:N.tableContainer},e.createElement("table",{className:N.table},e.createElement("thead",{className:N.tableHeader},e.createElement("tr",null,e.createElement("th",{className:N.tableCell}),e.createElement("th",{className:N.tableCell},"Category"),e.createElement("th",{className:N.tableCell},"Sum"))),e.createElement("tbody",null,a.map((c,m)=>e.createElement("tr",{key:m,className:N.tableRow},e.createElement("td",{className:N.colorCell},e.createElement("div",{className:N.colorSquare,style:{backgroundColor:t[c.name]}})),e.createElement("td",{className:N.tableCell},c.name),e.createElement("td",{className:N.tableCell},c.total))))),e.createElement("div",{className:N.paragraphContainer},e.createElement("p",{className:N.paragraph},"Income: ",s),e.createElement("p",{className:N.paragraph},"Expenses: ",r)))},is={},ms=({transactions:n,colors:t})=>{if(!n||!t)return e.createElement("div",null,"No data available");const a={labels:n==null?void 0:n.map(s=>s.name),datasets:[{data:n==null?void 0:n.map(s=>s.total),backgroundColor:n==null?void 0:n.map(s=>t[s.name]),hoverBackgroundColor:n==null?void 0:n.map(s=>t[s.name])}]};return e.createElement("div",{className:is.chartContainer},e.createElement(Ke,{data:a}))},ds=()=>{const n=I(),t=y(In),[a,s]=l.useState(new Date().getMonth()+1),[r,c]=l.useState(new Date().getFullYear()),[m,E]=l.useState({});console.log(t),l.useEffect(()=>{n(K({month:a,year:r}))},[a,r,n]);const i=()=>{const h={};t==null||t.forEach(({name:_,index:p})=>{h[_]=`#${Math.floor(Math.random()*16777215).toString(16)}`}),E(h)};l.useEffect(()=>{i()},[t]);const g=h=>{s(h)},u=h=>{c(h)};return e.createElement("section",{className:B.statisticsContainer},e.createElement("div",{className:B.titleContainer},e.createElement("h2",{className:B.title},"Statistics")),e.createElement("div",{className:B.contentContainer},e.createElement("div",{className:B.chartContainer},e.createElement(ms,{transactions:t,colors:m})),e.createElement("div",{className:B.tableContainer},e.createElement(Xa,{onMonthChange:g,onYearChange:u}),e.createElement(ls,{transactionsSummary:t,colors:m}))))};function us(){const n=y(ne),t=y(pt),a=I();return l.useEffect(()=>{a(H())},[a]),t?e.createElement(ke,null):e.createElement(e.Fragment,null,e.createElement(l.Suspense,{fallback:e.createElement(ke,null)},e.createElement(Ze,null,e.createElement(D,{path:"/",element:e.createElement(Ft,null)},e.createElement(D,{index:!0,element:e.createElement(be,{component:vn,redirectTo:"/home"})}),e.createElement(D,{path:"register",element:e.createElement(be,{component:Cn,redirectTo:"/home"})}),e.createElement(D,{path:"/home",element:e.createElement(ce,{component:Fa,redirectTo:"/"})}),e.createElement(D,{path:"/statistics",element:e.createElement(ce,{component:ds,redirectTo:"/"})}),e.createElement(D,{path:"/currency",element:e.createElement(ce,{component:Fe,redirectTo:"/"})})),e.createElement(D,{path:"*",element:n?e.createElement(Z,{to:"/home"}):e.createElement(Z,{to:"/"})}))))}const _s={key:"auth",version:1,storage:Le,whitelist:["token"]},gs={key:"root",storage:Le},qe=et({reducer:{auth:he(_s,gt),transactions:xn,currency:he(gs,Sa)},middleware:n=>n({serializableCheck:{ignoredActions:[tt,nt,at,st,rt,ct]}}),devTools:!1}),Es=ot(qe);lt.createRoot(document.getElementById("root")).render(e.createElement(it,null,e.createElement(mt,{store:qe},e.createElement(dt,{loading:null,persistor:Es},e.createElement(us,null),e.createElement(ut,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
