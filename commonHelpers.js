import{c as l,a as L,u as b,R as n,b as v,r as P,d as k,i,p as V,e as W,f as A,g as D,F as O,h as M,P as x,j as N,k as U,l as _,m as B,n as F,o as $}from"./assets/vendor-bfe89916.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();const z=l("currency/fetchCurrencyRate",async()=>{const r=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(r&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(r);try{const e=await L.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(e.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),e.data}catch(e){console.error("Помилка при виконанні запиту до Monobank:",e)}}),S={};function G(){const r=b(a=>a.currency.currencyRate);if(!r)return n.createElement("p",null,"Loading...");const t=r.find(a=>a.currencyCodeA===840&&a.currencyCodeB===980),e=r.find(a=>a.currencyCodeA===978&&a.currencyCodeB===980);return n.createElement("div",{className:S.wrapper},n.createElement("table",null,n.createElement("thead",{className:S.title},n.createElement("tr",null,n.createElement("th",null,"Currency"),n.createElement("th",null,"Purchase"),n.createElement("th",null,"Sale"))),n.createElement("tbody",null,t&&n.createElement("tr",null,n.createElement("td",null,"USD"),n.createElement("td",null,t.rateBuy),n.createElement("td",null,t.rateSell)),e&&n.createElement("tr",null,n.createElement("td",null,"EUR"),n.createElement("td",null,e.rateBuy),n.createElement("td",null,e.rateSell)))))}function H(){const r=v();return P.useEffect(()=>{r(z())},[r]),n.createElement("div",null,n.createElement("h1",null,"Мій додаток"),n.createElement(G,null))}const c=L.create({baseURL:"https://wallet.b.goit.study/api/"}),R=r=>{c.defaults.headers.common.Authorization=`Bearer ${r}`},J=()=>{c.defaults.headers.common.Authorization=""},d=l("register",async(r,t)=>{try{const{data:e}=await c.post("auth/sign-up",r);return R(e.token),console.log(e),e}catch(e){return t.rejectWithValue(e.message)}}),f=l("login",async(r,t)=>{try{const{data:e}=await c.post("auth/sign-in",r);return R(e.token),console.log(e),e}catch(e){return t.rejectWithValue(e.message)}}),q=l("logout",async(r,t)=>{try{const{data:e}=await c.delete("auth/sign-out");return console.log(e),J(),e}catch(e){return t.rejectWithValue(e.message)}}),g=l("refresh",async(r,t)=>{const e=t.getState().auth.token;if(!e)return t.rejectWithValue("Token is not exist!");try{R(e);const{data:a}=await c.get("users/current");return a}catch(a){return t.rejectWithValue(a.message)}}),C={user:{name:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1},j=k({name:"auth",initialState:C,selectors:{selectUser:r=>r.user,selectIsLoggedIn:r=>r.isLoggedIn,selectToken:r=>r.isLoggedIn,selectIsRefresh:r=>r.isRefresh},extraReducers:r=>{r.addCase(q.fulfilled,t=>C).addCase(g.fulfilled,(t,{payload:e})=>{t.user.name=e.name,t.user.email=e.email,t.isLoggedIn=!0,t.isRefresh=!1}).addMatcher(i(d.fulfilled,f.fulfilled),(t,{payload:e})=>{t.user.name=e.user.name,t.user.email=e.user.email,t.token=e.token,t.isLoggedIn=!0}).addMatcher(i(d.pending,f.pending,g.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(i(d.rejected,f.rejected,g.rejected),(t,{payload:e})=>{t.error=e,t.loading=!1,t.isRefresh=!1})}}),K=j.reducer;j.selectors;const m=l("fetchTransactionsData",async(r,t)=>{try{const{data:e}=await c.get("transactions");return e}catch(e){return t.rejectWithValue(e.message)}}),h=l("deleteTransaction",async(r,t)=>{try{const{data:e}=await c.delete(`transactions/${r}`);return e.id}catch(e){return t.rejectWithValue(e.message)}}),y=l("addTransaction",async(r,t)=>{try{const{data:e}=await c.post("transactions",r);return e}catch(e){return t.rejectWithValue(e.message)}}),p=l("editTransaction",async(r,t)=>{try{const{data:e}=await c.patch(`/transactions/${r.id}`,r);return e}catch(e){return t.rejectWithValue(e.message)}}),T=l("fetchTransactionCategories",async(r,t)=>{try{const{data:e}=await c.get("transaction-categories");return e}catch(e){return t.rejectWithValue(e.message)}}),E=l("fetchTransactionSummaryController",async(r,t)=>{try{const{data:e}=await c.get("transactions-summary");return e}catch(e){return t.rejectWithValue(e.message)}}),Y={transactionsList:[],transactionCategories:[],transactionSummaryController:null,loading:!1,error:!1},I=k({name:"transactions",initialState:Y,selectors:{selectTransactions:r=>r.transactionsList,selectIsLoading:r=>r.loading,selectIsError:r=>r.error},extraReducers:r=>{r.addCase(m.fulfilled,(t,{payload:e})=>{t.transactionsList=e,t.loading=!1}).addCase(h.fulfilled,(t,{payload:e})=>{t.transactionsList=t.transactionsList.filter(a=>a.id!==e),t.loading=!1}).addCase(y.fulfilled,(t,{payload:e})=>{t.transactionsList.push(e),t.loading=!1}).addCase(p.fulfilled,(t,{payload:e})=>{const a=t.transactionsList.findIndex(s=>s.id===e.id);t.transactionsList.splice(a,1,e),t.loading=!1}).addCase(T.fulfilled,(t,{payload:e})=>{t.transactionCategories=e,t.loading=!1}).addCase(E.fulfilled,(t,{payload:e})=>{t.transactionSummaryController=e,t.loading=!1}).addMatcher(i(m.pending,h.pending,y.pending,p.pending,T.pending,E.pending),(t,{payload:e})=>{t.loading=!0,t.error=null}).addMatcher(i(m.rejected,h.rejected,y.rejected,p.rejected,T.rejected,E.rejected),(t,{payload:e})=>{t.error=e,t.loading=!1})}}),Q=I.reducer;I.selectors;const X={key:"auth",version:1,storage:D,whitelist:["token"]},Z=V(X,K),w=W({reducer:{auth:Z,transactions:Q},middleware:r=>r({serializableCheck:{ignoredActions:[O,M,x,N,U,_]}}),devTools:!1}),ee=A(w);B.createRoot(document.getElementById("root")).render(n.createElement(n.StrictMode,null,n.createElement(F,{store:w},n.createElement($,{loading:null,persistor:ee},n.createElement(H,null)))));
//# sourceMappingURL=commonHelpers.js.map
