import{a as Ne,c as C,b as re,i as q,u as N,R as e,N as G,d as ce,e as I,r as d,f as Oe,g as z,O as de,_ as Ae,P as je,h as Fe,j as ve,o as xe,k as oe,l as x,B as P,m as Ve,n as B,S as Ue,D as Xe,p as Ge,q as J,s as He,t as D,v as Qe,w as _e,F as Ye,x as Je,y as Ke,z as Ze,A as et,C as tt,E as nt,G as Ce,H as at,I as st,J as rt,K as ct,Q as ot}from"./assets/vendor-c14cb9d8.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const _ of o.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&r(_)}).observe(document,{childList:!0,subtree:!0});function a(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(c){if(c.ep)return;c.ep=!0;const o=a(c);fetch(c.href,o)}})();const v=Ne.create({baseURL:"https://wallet.b.goit.study/api/"}),le=n=>{v.defaults.headers.common.Authorization=`Bearer ${n}`},lt=()=>{v.defaults.headers.common.Authorization=""},O=C("register",async(n,t)=>{try{const{data:a}=await v.post("auth/sign-up",n);return le(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),A=C("login",async(n,t)=>{try{const{data:a}=await v.post("auth/sign-in",n);return le(a.token),a}catch(a){return t.rejectWithValue(a.message)}}),Se=C("logout",async(n,t)=>{try{const{data:a}=await v.delete("auth/sign-out");return lt(),a}catch(a){return t.rejectWithValue(a.message)}}),K=C("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{le(a);const{data:r}=await v.get("users/current");return console.log(r),r}catch(r){return t.rejectWithValue(r.message)}}),Z={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},ie=re({name:"auth",initialState:Z,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>Z},extraReducers:n=>{n.addCase(Se.fulfilled,t=>Z).addCase(K.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(q(O.fulfilled,A.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(q(O.pending,A.pending,K.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(q(O.rejected,A.rejected,K.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),it=ie.reducer,{selectIsLoggedIn:H,selectUser:mt,selectToken:La,selectIsRefresh:ut,selectBalance:Ba,selectIsLoading:Pa}=ie.selectors,{logout:dt}=ie.actions,ee=({component:n,redirectTo:t="/"})=>N(H)?e.createElement(n,null):e.createElement(G,{to:t}),ge=({component:n,redirectTo:t="/"})=>N(H)?e.createElement(G,{to:t}):e.createElement(n,null),_t="_wrap_1nzyu_1",gt="_logo_1nzyu_5",Et="_text_1nzyu_14",te={wrap:_t,logo:gt,text:Et},pt=({closeModal:n})=>{const t=ce(),a=I(),r=()=>{a(Se()),a(dt()),n(),t("/")};return e.createElement("div",{className:te.wrap},e.createElement("a",{href:"",className:te.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:te.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:r},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},ht="_closeButton_12zzy_2",bt="_modalContent_12zzy_13",wt="_modalWrapper_12zzy_33",ne={closeButton:ht,modalContent:bt,modalWrapper:wt},ft=document.querySelector("#modal"),Te=({closeModal:n,children:t})=>{const a=d.useCallback(c=>{c.key==="Escape"&&n()},[n]);d.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const r=c=>{c.target===c.currentTarget&&n()};return Oe.createPortal(e.createElement("div",{onClick:r,className:ne.modalWrapper},e.createElement("div",{className:ne.modalContent},e.createElement("button",{className:ne.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),ft)},Ie=()=>{const[n,t]=d.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(o=>!o)}},yt="_header_1snvw_1",Nt="_hederContainer_1snvw_9",vt="_logo_1snvw_17",xt="_wrap_1snvw_27",Ct="_user_1snvw_32",St="_button_1snvw_38",Tt="_icon_1snvw_52",It="_heder_1snvw_9",L={header:yt,hederContainer:Nt,logo:vt,wrap:xt,user:Ct,button:St,icon:Tt,heder:It},kt=()=>{const{isOpen:n,toggle:t}=Ie(),a=N(mt),r=a.email.indexOf("@"),c=a.email.slice(0,r);return e.createElement("header",{className:L.header},e.createElement("div",{className:L.hederContainer},e.createElement("a",{href:"",className:L.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("div",{className:L.wrap}," ",e.createElement("p",{className:L.user},c),e.createElement("button",{className:L.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:L.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement(Te,{closeModal:t},e.createElement(pt,{closeModal:t}))))},ke=()=>{const[n,t]=d.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return d.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Rt=()=>{const n=ke().windowWidth;return e.createElement("div",null,e.createElement(z,{to:"home"},"Home"),e.createElement(z,{to:"statistics"},"Statistics"),n<768&&e.createElement(z,{to:"/currency"},"Currency"))},Dt=()=>N(H)?e.createElement(e.Fragment,null,e.createElement(kt,null),e.createElement(Rt,null),e.createElement(de,null)):e.createElement(e.Fragment,null,e.createElement(de,null)),Lt="_login_register_section_ytntg_1",Bt="_register_login_section_ytntg_2",Pt="_gradient_container_ytntg_24",$t="_form_container_ytntg_32",Mt="_form_ytntg_32",qt="_submit_btn_ytntg_70",zt="_inactive_btn_ytntg_90",Wt="_password_label_ytntg_107",Ot="_password_input_ytntg_116",At="_error_container_ytntg_127",jt="_username_ytntg_131",Ft="_email_ytntg_137",Vt="_password_ytntg_107",Ut="_cpassword_ytntg_149",Xt="_eye_ytntg_164",Gt="_name_label_ytntg_168",Ht="_name_input_ytntg_176",Qt="_name_user_icon_ytntg_195",Yt="_icon_email_cont_ytntg_199",Jt="_password_icon_ytntg_203",Kt="_button_cont_ytntg_207",Zt="_strengthBar_ytntg_213",en="_porgress_container_ytntg_234",tn="_logo_wrapper_ytntg_239",nn="_background_container_ytntg_289",m={login_register_section:Lt,register_login_section:Bt,gradient_container:Pt,form_container:$t,form:Mt,submit_btn:qt,inactive_btn:zt,password_label:Wt,password_input:Ot,error_container:At,username:jt,email:Ft,password:Vt,cpassword:Ut,eye:Xt,name_label:Gt,name_input:Ht,name_user_icon:Qt,icon_email_cont:Yt,password_icon:Jt,button_cont:Kt,strengthBar:Zt,porgress_container:en,logo_wrapper:tn,background_container:nn},Ee=({register:n,errors:t,name:a,placeholder:r,className:c})=>e.createElement(e.Fragment,null,e.createElement("div",{className:m.error_container},e.createElement("label",{className:m.name_label},a==="username"?e.createElement("div",{className:m.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:m.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:m.name_input,autoComplete:"none",...n(a),type:"text",placeholder:r}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:m[c]},t[a].message))),an=({password:n})=>e.createElement("div",{className:m.porgress_container},e.createElement(Ae,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:m.strengthBar})),pe=({register:n,errors:t,name:a,placeholder:r,getValues:c,formType:o,className:_})=>{const[p,i]=d.useState("password"),[g,u]=d.useState("");function T(w){u(w.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:m.error_container},e.createElement("label",{className:m.password_label},e.createElement("div",{className:m.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:w=>w===c("password")||"Passwords do not match"}),type:p,placeholder:r,onChange:T,className:m.password_input})," ",e.createElement("div",{className:m.eye,onClick:()=>{i(p==="password"?"text":"password")}},p==="password"?e.createElement(je,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Fe,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:m[_]},t[a].message)),a==="password"&&o!=="login"&&e.createElement(an,{password:g}))},Re=({onDataSubmit:n,formType:t,schema:a})=>{const[r,c]=d.useState(0);d.useEffect(()=>{const u=()=>{c(window.innerWidth)};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]);const{register:o,reset:_,handleSubmit:p,formState:{errors:i}}=ve({resolver:xe(a)}),g=u=>{const{passwordConfirmation:T,...w}=u;n(w),_()};return e.createElement("section",{className:t==="login"?`${m.login_register_section}`:`${m.register_login_section}`}," ",e.createElement("div",{className:m.background_container},e.createElement("div",{className:m.form_container,style:{padding:r<768&&t==="login"?"98px 20px":r>768&&t==="login"?"80px 62px":"40px 62px"}},e.createElement("a",{href:"",className:m.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},r<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("form",{className:m.form,onSubmit:p(g)},t==="register"&&e.createElement(Ee,{register:o,errors:i,name:"username",placeholder:"Name",className:"username"}),e.createElement(Ee,{register:o,errors:i,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(pe,{register:o,errors:i,name:"password",placeholder:"Password",onChange:u=>handleChange(u),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(pe,{register:o,errors:i,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:m.button_cont},e.createElement("button",{className:m.submit_btn,type:"submit"},"log in"),e.createElement(z,{className:m.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:m.button_cont},e.createElement("button",{className:m.submit_btn,type:"submit"},"register"),e.createElement(z,{className:m.inactive_btn,to:"/login"},"log in"))," "))))},sn=oe({password:x().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:x().required().email("Email is not valid")}).required(),rn=()=>{const n=ce(),t=I(),a=c=>{t(A(c)).unwrap().then(()=>{n("/home")}).catch(o=>{console.log(o.message),P(o)})},r={email:"tomato9@gmail.com",password:"0000000"};return e.createElement("div",null,e.createElement(Re,{formType:"login",onDataSubmit:a,values:r,schema:sn}))},cn=oe({username:x().required(),password:x().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:x().required().email("Email is not valid"),passwordConfirmation:x().oneOf([Ve("password"),null],"Passwords must match")}).required(),on=()=>{const n=I(),t=ce(),a=r=>{n(O(r)).unwrap().then(()=>{t("/home")}).catch(c=>{console.log(c),P(c)})};return e.createElement("div",{className:s.registerWrapper},e.createElement(Re,{onDataSubmit:a,formType:"register",schema:cn}))},j=C("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await v.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),F=C("deleteTransaction",async(n,t)=>{try{return await v.delete(`transactions/${n}`),n}catch(a){return t.rejectWithValue(a.message)}}),V=C("addTransaction",async(n,t)=>{try{const{data:a}=await v.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),U=C("editTransaction",async(n,t)=>{try{const{data:a}=await v.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),X=C("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await v.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),ae=C("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await v.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),ln={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},me=re({name:"transactions",initialState:ln,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(j.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(F.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(r=>r.id!==a),t.loading=!1}).addCase(V.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(U.fulfilled,(t,{payload:a})=>{const r=t.transactionsList.findIndex(c=>c.id===a.id);t.transactionsList.splice(r,1,a),t.loading=!1}).addCase(X.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(ae.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(q(j.pending,F.pending,V.pending,U.pending,X.pending,ae.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(q(j.rejected,F.rejected,V.rejected,U.rejected,X.rejected,ae.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),mn=me.reducer;me.actions;const{selectTransactions:un,selectIsLoading:$a,selectIsError:Ma,selectTransactionCategories:De,selectYear:qa,selectMonth:za,selectCategoriesSummary:Wa,selectExpenseSummary:Oa,selectIncomeSummary:Aa,selectPeriodTotal:ja}=me.selectors,dn="_transaction_item_2loug_1",_n="_income_border_2loug_6",gn="_expense_border_2loug_10",En="_income_text_2loug_14",pn="_expense_text_2loug_19",hn="_transactions_table_mobile_2loug_24",bn="_transaction_colum_2loug_30",wn="_transaction_first_column_2loug_34",fn="_transaction_row_mobile_2loug_38",yn="_transaction_row_2loug_38",Nn="_transactions_table_2loug_24",vn="_btn_delete_2loug_61",xn="_btn_edit_2loug_76",Cn="_btn_wrapper_2loug_86",Sn="_icon_edit_2loug_93",l={transaction_item:dn,income_border:_n,expense_border:gn,income_text:En,expense_text:pn,transactions_table_mobile:hn,transaction_colum:bn,transaction_first_column:wn,transaction_row_mobile:fn,transaction_row:yn,transactions_table:Nn,btn_delete:vn,btn_edit:xn,btn_wrapper:Cn,icon_edit:Sn},Le="/money_guard_project/assets/sprite-d3dedbbb.svg",ue=()=>{const n=B.useMediaQuery({query:"(min-width: 768px)"}),t=B.useMediaQuery({query:"(min-width: 1280px)"}),a=B.useMediaQuery({query:"(max-width: 768px)"}),r=B.useMediaQuery({query:"(max-width: 767px)"}),c=B.useMediaQuery({query:"(orientation: portrait)"}),o=B.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:r,isTabletOrMobile:a,isPortrait:c,isRetina:o}},he=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:r,type:c,categoryId:o,comment:_,amount:p}=n,{isBigScreenOrTablet:i,isMobile:g}=ue(),u=I(),T=N(De);function w(k){const M=T.find(Q=>Q.id===k);return M?M.name:"Unknown Category"}const f=k=>{u(F(k))},R=c.toLowerCase()==="income"?"+":"-",$=c.toLowerCase()==="income"?l.income_border:l.expense_border,W=c.toLowerCase()==="income"?l.income_text:l.expense_text;return e.createElement(e.Fragment,null,g&&e.createElement("li",{key:a,className:`${l.transaction_item} ${$}`},e.createElement("table",{className:l.transactions_table_mobile},e.createElement("tbody",null,e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Date"),e.createElement("td",null,r)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Type"),e.createElement("td",null,R)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Category"),e.createElement("td",null,w(o))),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Comment"),e.createElement("td",null,_)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Sum"),e.createElement("td",{className:W},p)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:l.btn_delete,onClick:()=>f(a)},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:o,type:c,amount:p,comment:_,transactionDate:r},a),className:l.btn_edit}," ",e.createElement("svg",{className:l.icon_edit},e.createElement("use",{xlinkHref:`${Le}#icon-edit`}))," ","Edit")))))),i&&e.createElement("tr",{className:l.transaction_row},e.createElement("td",{className:l.transaction_colum},r),e.createElement("td",{className:l.transaction_colum,style:{textAlign:"center"}},R),e.createElement("td",{className:l.transaction_colum},w(o)),e.createElement("td",{className:l.transaction_colum},_),e.createElement("td",{className:`${l.transaction_colum} ${W}`,style:{textAlign:"right"}},p),e.createElement("td",{className:l.transaction_colum}," ",e.createElement("div",{className:l.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:o,type:c,amount:p,comment:_,transactionDate:r},a),className:l.btn_edit},"Edit"),e.createElement("button",{className:l.btn_delete,onClick:()=>f(a)},"Delete")))))},Tn="_transactions_section_mjcgn_1",In="_transactions_container_mjcgn_34",kn="_transactions_table_mjcgn_75",Rn="_transactions_list_mjcgn_82",Dn="_transaction_row_head_mjcgn_88",Ln="_btn_add_mjcgn_111",Bn="_icon_plus_mjcgn_126",Pn="_empty_transactions_mjcgn_132",y={transactions_section:Tn,transactions_container:In,transactions_table:kn,transactions_list:Rn,transaction_row_head:Dn,btn_add:Ln,icon_plus:Bn,empty_transactions:Pn},$n="_labelExpense_c530i_8",Mn="_labelIncome_c530i_15",qn="_activeIncome_c530i_46",zn="_activeExpense_c530i_53",Wn="_slider_c530i_59",On="_round_c530i_106",S={"transaction-switcher":"_transaction-switcher_c530i_2",switch:"_switch_c530i_22",labelExpense:$n,labelIncome:Mn,activeIncome:qn,activeExpense:zn,slider:Wn,round:On},An=({onChange:n})=>{const[t,a]=d.useState(!1),r=()=>{a(!t),n(!t)};return e.createElement("div",{className:S["transaction-switcher"]},e.createElement("span",{className:t?S.activeIncome:S.labelIncome},"Income"),e.createElement("label",{className:`${S.switch} ${t?S.income:S.expense}`},e.createElement("input",{type:"checkbox",onChange:r,checked:!t}),e.createElement("span",{className:`${S.slider} ${S.round}`})),e.createElement("span",{className:t?S.labelExpense:S.activeExpense},"Expense"))},jn="_container_qwzc8_2",Fn="_formWrapper_qwzc8_13",Vn="_header_qwzc8_21",Un="_secondContainer_qwzc8_27",Xn="_category_qwzc8_30",Gn="_boxDate_qwzc8_43",Hn="_incomeInput_qwzc8_52",Qn="_customInput_qwzc8_53",Yn="_svgBox_qwzc8_70",Jn="_comment_qwzc8_91",Kn="_selectExpense_qwzc8_92",Zn="_btnBox_qwzc8_108",ea="_checkBox_qwzc8_147",b={container:jn,formWrapper:Fn,header:Vn,secondContainer:Un,category:Xn,boxDate:Gn,incomeInput:Hn,customInput:Qn,svgBox:Yn,comment:Jn,selectExpense:Kn,btnBox:Zn,checkBox:ea},be=n=>n<10?"0"+n:n,we=n=>{const t=n.getFullYear(),a=be(n.getMonth()+1),r=be(n.getDate());return`${t}-${a}-${r}`},fe=({name:n,register:t,errors:a,placeholder:r,className:c})=>e.createElement("div",{className:b.inputContainer},e.createElement("input",{className:c,...t(n),placeholder:r}),a[n]&&e.createElement("span",null,a[n].message));function Be({content:n,categories:t,toggle:a,typeForm:r,onDataSubmit:c,schema:o}){const{register:_,handleSubmit:p,formState:{errors:i},setValue:g,reset:u}=ve({resolver:xe(o)}),[T,w]=d.useState(""),[f,R]=d.useState(""),[$,W]=d.useState(new Date);d.useEffect(()=>{R(n?n.type:"EXPENSE")},[n]),d.useEffect(()=>{g("amount",n&&n.amount)},[n,g]),d.useEffect(()=>{g("comment",n&&n.comment)},[n,g]);const k=d.useMemo(()=>t.map(({id:h,name:We})=>({value:h,label:We})),[t]),M=d.useMemo(()=>k.find(h=>(n==null?void 0:n.categoryId)===h.value),[n,k]),Q=h=>{w(h)},ze=h=>{r==="add"?(c({transactionDate:we($),amount:+h.amount,comment:h.comment,type:f,categoryId:f==="EXPENSE"?T.value||k[0].value:"063f1132-ba5d-42b4-951d-44011ca46262"}),u()):(c({transactionDate:we($),amount:+h.amount,comment:h.comment}),u()),u()},Y=h=>{R(h?"INCOME":"EXPENSE")};return e.createElement("div",{className:b.container},e.createElement("form",{className:b.formWrapper,onSubmit:p(ze)},e.createElement("h1",{className:b.header},r==="add"?"Add transaction":"Edit transaction"),r==="add"?e.createElement(An,{onChange:Y}):e.createElement("div",null,e.createElement("ul",{className:b.checkBox},e.createElement("li",{onClick:()=>{r==="edit"&&f==="EXPENSE"||Y(!0)},className:n.type==="INCOME"||f==="INCOME"?b.activeIncome:"",disabled:r==="edit"&&f==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{r==="edit"&&f==="INCOME"||Y(!1)},className:f==="EXPENSE"?b.activeExpense:"",disabled:r==="edit"&&f==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:b.secondContainer},f==="EXPENSE"&&e.createElement("div",{className:b.category},e.createElement(Ue,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:k,placeholder:"Select category",defaultValue:M&&M,onChange:Q,isDisabled:r==="edit"}),i.category&&e.createElement("span",null,i.category.message)),e.createElement("div",{className:b.boxDate},e.createElement(fe,{className:b.incomeInput,name:"amount",placeholder:"0.00",errors:i,register:_}),e.createElement("div",{className:b.svgBox},e.createElement(Xe,{className:b.customInput,selected:n?n.transactionDate:$,onChange:h=>{g("transactionDate",h),W(h)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-date"})),i.transactionDate&&e.createElement("span",null,i.transactionDate.message))),e.createElement(fe,{className:b.comment,name:"comment",placeholder:"Comment",errors:i,register:_}),e.createElement("div",{className:b.btnBox},e.createElement("button",{className:"modalButtonColor"},r==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}function ta({categories:n,editContent:t,toggle:a}){const r=I(),c=o=>{r(U({content:{...o},id:t.id})).unwrap().then(_=>{P.success("Changed!"),a()}).catch(_=>{P.error("Credentials is not valid!")})};return e.createElement(Be,{toggle:a,content:t.content,categories:n,onDataSubmit:c,typeForm:"edit"})}const na=oe({comment:x().required("Describe your transaction").min(5,"Give more details"),transactionDate:Ge().required("Please choose the date"),type:x().oneOf(["INCOME","EXPENSE"]).required(),category:x().when("type",{is:"EXPENSE",then:x().required("Category is required for expenses"),otherwise:x().notRequired()})}).shape({amount:J().typeError("Amount must be a number").required("Please enter the amount").when("type",{is:"EXPENSE",then:J().negative("The amount must be negative"),otherwise:J().positive("The amount must be positive")})}).required();function aa({categories:n,toggle:t}){const a=I(),r=c=>{a(V(c)).unwrap().then(()=>{P.success("Transaction was successfully added"),t()}).catch(o=>{P.error("Credentials is not valid!")})};return e.createElement(Be,{schema:na,categories:n,onDataSubmit:r,toggle:t,typeForm:"add"})}const sa=()=>{const{isOpen:n,toggle:t}=Ie(),[a,r]=d.useState(""),c=N(un),o=N(De),{isBigScreenOrTablet:_,isMobile:p}=ue();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const i=(u,T,w)=>{t(),r({content:u,id:T,name:w}),n&&document.body.classList.add("modal-open")},g=()=>{t(),r(null)};return e.createElement("section",{className:y.transactions_section},e.createElement("div",{className:y.transactions_container},p&&e.createElement("ul",{className:y.transactions_list},c.length>0?c.map(u=>e.createElement(he,{handleEditItem:i,key:u.id,transaction:u})):e.createElement("div",{className:y.empty_transactions},"No transactions")),_&&e.createElement(e.Fragment,null,c.length>0?e.createElement("table",{className:y.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:y.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:y.table_body},c.map(u=>e.createElement(he,{handleEditItem:i,key:u.id,transaction:u})))):e.createElement(e.Fragment,null,e.createElement("table",{className:y.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:y.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:y.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>g(),className:y.btn_add}," ",e.createElement("svg",{className:y.icon_plus},e.createElement("use",{xlinkHref:`${Le}#icon-plus`})))),n&&e.createElement(Te,{closeModal:t},a?e.createElement(ta,{editContent:a,categories:o,toggle:t}):e.createElement(aa,{categories:o,toggle:t})))},Pe=C("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await Ne.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),ra={usdRate:null,eurRate:null,lastFetchTime:null},$e=re({name:"currency",initialState:ra,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(Pe.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(r=>r.currencyCodeA===840&&r.currencyCodeB===980),t.eurRate=a.find(r=>r.currencyCodeA===978&&r.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),ca=$e.reducer,{selectUsdRate:oa,selectEurRate:la,selectLastFetchTime:ia}=$e.selectors,ma="_wrapper_d2ubo_14",ua="_title_d2ubo_49",da="_row_d2ubo_79",_a="_titleItem_d2ubo_97",ga="_rowItem_d2ubo_98",Ea="_vector_d2ubo_104",pa="_image_d2ubo_109",ha="_secondimage_d2ubo_132",ba="_smallnumeur_d2ubo_148",wa="_smallnumusd_d2ubo_158",E={wrapper:ma,title:ua,row:da,titleItem:_a,rowItem:ga,vector:Ea,image:pa,secondimage:ha,smallnumeur:ba,smallnumusd:wa};function fa(){const n=I(),t=N(oa),a=N(la),r=N(ia),{isDesktopOrLaptop:c,isBigScreen:o,isTabletOrMobile:_,isRetina:p}=ue();let i="../../img/images/currency_mobile.webp",g="../../img/images/line_desc_mob_1x.webp";return window.devicePixelRatio>=2?c||o?(i="../../img/images/currency_desk@2x.webp",g="../../img/images/line_desc_2x.webp"):_&&(i="../../img/images/currency_tablet@2x.webp",g="../../img/images/line_desc_tab_2x.webp"):c||o?(i="../../img/images/currency_desk.webp",g="../../img/images/line_desc_1x.webp"):_&&(i="../../img/images/currency_tablet.webp",g="../../img/images/line_desc_tab_1x.webp"),d.useEffect(()=>{(new Date().getTime()-r)/(1e3*60*60)>1&&n(Pe())},[n,r]),e.createElement("div",{className:E.wrapper},e.createElement("div",{className:E.secondwrapper},e.createElement("ul",{className:E.title},e.createElement("li",{className:E.titleItem},"Currency"),e.createElement("li",{className:E.titleItem},"Purchase"),e.createElement("li",{className:E.titleItem},"Sale")),t&&e.createElement("ul",{className:E.row},e.createElement("li",{className:E.rowItem},"USD"),e.createElement("li",{className:E.rowItem},t.rateBuy),e.createElement("li",{className:E.rowItem},t.rateSell)),a&&e.createElement("ul",{className:E.row},e.createElement("li",{className:E.rowItem},"EUR"),e.createElement("li",{className:E.rowItem},a.rateBuy),e.createElement("li",{className:E.rowItem},a.rateSell)),c&&e.createElement(e.Fragment,null,e.createElement("p",{className:E.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:E.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:E.image,src:i,alt:"Currency rate"}),e.createElement("img",{className:E.secondimage,src:g,alt:"Currency rate"})))}const Me=()=>e.createElement(fa,null),ya=()=>{const n=ke().windowWidth,t=I();return d.useEffect(()=>{t(j())},[t]),d.useEffect(()=>{t(X())},[t]),e.createElement(e.Fragment,null,n>=768&&e.createElement(Me,null),e.createElement(sa,null))},Na="_loaderWrapper_1hccn_1",va="_loader_1hccn_1",xa="_spinner_1hccn_1",Ca="_loaderName_1hccn_34",se={loaderWrapper:Na,loader:va,spinner:xa,loaderName:Ca},ye=()=>e.createElement("div",{className:se.loaderWrapper},e.createElement("div",{className:se.loader},e.createElement("span",{className:se.loaderName}))),Sa=()=>e.createElement("h2",null,"Statistics");function Ta(){const n=N(H),t=N(ut);return I(),t?e.createElement(ye,null):e.createElement(e.Fragment,null,e.createElement(d.Suspense,{fallback:e.createElement(ye,null)},e.createElement(He,null,e.createElement(D,{path:"/",element:e.createElement(Dt,null)},e.createElement(D,{index:!0,element:e.createElement(ge,{component:rn,redirectTo:"/home"})}),e.createElement(D,{path:"register",element:e.createElement(ge,{component:on,redirectTo:"/home"})}),e.createElement(D,{path:"/home",element:e.createElement(ee,{component:ya,redirectTo:"/"})}),e.createElement(D,{path:"/statistics",element:e.createElement(ee,{component:Sa,redirectTo:"/"})}),e.createElement(D,{path:"/currency",element:e.createElement(ee,{component:Me,redirectTo:"/"})})),e.createElement(D,{path:"*",element:n?e.createElement(G,{to:"/home"}):e.createElement(G,{to:"/"})}))))}const Ia={key:"auth",version:1,storage:Ce,whitelist:["token"]},ka={key:"root",storage:Ce},qe=Qe({reducer:{auth:_e(Ia,it),transactions:mn,currency:_e(ka,ca)},middleware:n=>n({serializableCheck:{ignoredActions:[Ye,Je,Ke,Ze,et,tt]}}),devTools:!1}),Ra=nt(qe);at.createRoot(document.getElementById("root")).render(e.createElement(st,null,e.createElement(rt,{store:qe},e.createElement(ct,{loading:null,persistor:Ra},e.createElement(Ta,null),e.createElement(ot,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
