import{a as ye,c as x,b as se,i as P,u as b,R as e,N as X,d as re,e as N,r as _,f as qe,g as $,O as ue,_ as We,P as Fe,h as Oe,j as ve,o as Ne,k as ce,l as S,B as M,m as Ae,n as L,S as Ve,D as Ye,p as Ue,q as J,s as Xe,t as Ge,v as D,w as He,x as de,F as Qe,y as Je,z as Ke,A as Ze,C as et,E as tt,G as nt,H as Ce,I as at,J as st,K as rt,L as ct,Q as ot}from"./assets/vendor-e28fe8fe.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const C=ye.create({baseURL:"https://wallet.b.goit.study/api/"}),oe=n=>{C.defaults.headers.common.Authorization=`Bearer ${n}`},lt=()=>{C.defaults.headers.common.Authorization=""},W=x("register",async(n,t)=>{try{const{data:a}=await C.post("auth/sign-up",n);return oe(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),F=x("login",async(n,t)=>{try{const{data:a}=await C.post("auth/sign-in",n);return oe(a.token),a}catch(a){return console.log(a),t.rejectWithValue(a.response.data.message)}}),Se=x("logout",async(n,t)=>{try{const{data:a}=await C.delete("auth/sign-out");return lt(),a}catch(a){return t.rejectWithValue(a.message)}}),K=x("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{oe(a);const{data:s}=await C.get("users/current");return console.log(s),s}catch(s){return t.rejectWithValue(s.message)}}),Z={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},le=se({name:"auth",initialState:Z,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>Z},extraReducers:n=>{n.addCase(Se.fulfilled,t=>Z).addCase(K.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(P(W.fulfilled,F.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(P(W.pending,F.pending,K.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(P(W.rejected,F.rejected,K.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),it=le.reducer,{selectIsLoggedIn:G,selectUser:mt,selectToken:Fa,selectIsRefresh:ut,selectBalance:Oa,selectIsLoading:Aa}=le.selectors,{logout:dt}=le.actions,ee=({component:n,redirectTo:t="/"})=>b(G)?e.createElement(n,null):e.createElement(X,{to:t}),_e=({component:n,redirectTo:t="/"})=>b(G)?e.createElement(X,{to:t}):e.createElement(n,null),_t="_wrap_1nzyu_1",gt="_logo_1nzyu_5",Et="_text_1nzyu_14",te={wrap:_t,logo:gt,text:Et},pt=({closeModal:n})=>{const t=re(),a=N(),s=()=>{a(Se()),a(dt()),n(),t("/")};return e.createElement("div",{className:te.wrap},e.createElement("a",{href:"",className:te.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:te.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},ht="_closeButton_11uif_2",bt="_modalContent_11uif_13",ft="_modalWrapper_11uif_33",ne={closeButton:ht,modalContent:bt,modalWrapper:ft},wt=document.querySelector("#modal"),xe=({closeModal:n,children:t})=>{const a=_.useCallback(r=>{r.key==="Escape"&&n()},[n]);_.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=r=>{r.target===r.currentTarget&&n()};return qe.createPortal(e.createElement("div",{onClick:s,className:ne.modalWrapper},e.createElement("div",{className:ne.modalContent},e.createElement("button",{className:ne.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),wt)},ke=()=>{const[n,t]=_.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(c=>!c)}},yt="_header_1snvw_1",vt="_hederContainer_1snvw_9",Nt="_logo_1snvw_17",Ct="_wrap_1snvw_27",St="_user_1snvw_32",xt="_button_1snvw_38",kt="_icon_1snvw_52",Tt="_heder_1snvw_9",R={header:yt,hederContainer:vt,logo:Nt,wrap:Ct,user:St,button:xt,icon:kt,heder:Tt},It=()=>{const{isOpen:n,toggle:t}=ke(),a=b(mt),s=a.email.indexOf("@"),r=a.email.slice(0,s);return e.createElement("header",{className:R.header},e.createElement("div",{className:R.hederContainer},e.createElement("a",{href:"",className:R.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("div",{className:R.wrap}," ",e.createElement("p",{className:R.user},r),e.createElement("button",{className:R.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:R.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement(xe,{closeModal:t},e.createElement(pt,{closeModal:t}))))},Te=()=>{const[n,t]=_.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return _.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Dt=()=>{const n=Te().windowWidth;return e.createElement("div",null,e.createElement($,{to:"home"},"Home"),e.createElement($,{to:"statistics"},"Statistics"),n<768&&e.createElement($,{to:"/currency"},"Currency"))},Rt=()=>b(G)?e.createElement(e.Fragment,null,e.createElement(It,null),e.createElement(Dt,null),e.createElement(ue,null)):e.createElement(e.Fragment,null,e.createElement(ue,null)),Lt="_login_register_section_1c8bj_1",jt="_register_login_section_1c8bj_2",Mt="_background_container_login_1c8bj_13",Bt="_background_container_registration_1c8bj_14",zt="_gradient_container_1c8bj_163",Pt="_form_container_1c8bj_171",$t="_form_1c8bj_171",qt="_submit_btn_1c8bj_210",Wt="_inactive_btn_1c8bj_230",Ft="_password_label_1c8bj_247",Ot="_password_input_1c8bj_256",At="_error_container_1c8bj_267",Vt="_username_1c8bj_271",Yt="_email_1c8bj_277",Ut="_password_1c8bj_247",Xt="_cpassword_1c8bj_289",Gt="_eye_1c8bj_304",Ht="_name_label_1c8bj_308",Qt="_name_input_1c8bj_316",Jt="_name_user_icon_1c8bj_335",Kt="_icon_email_cont_1c8bj_339",Zt="_password_icon_1c8bj_343",en="_button_cont_1c8bj_347",tn="_strengthBar_1c8bj_353",nn="_porgress_container_1c8bj_373",an="_logo_wrapper_1c8bj_378",sn="_background_img_container_login_1c8bj_551",rn="_background_img_container_registration_1c8bj_552",cn="_background_container_1c8bj_13",d={login_register_section:Lt,register_login_section:jt,background_container_login:Mt,background_container_registration:Bt,gradient_container:zt,form_container:Pt,form:$t,submit_btn:qt,inactive_btn:Wt,password_label:Ft,password_input:Ot,error_container:At,username:Vt,email:Yt,password:Ut,cpassword:Xt,eye:Gt,name_label:Ht,name_input:Qt,name_user_icon:Jt,icon_email_cont:Kt,password_icon:Zt,button_cont:en,strengthBar:tn,porgress_container:nn,logo_wrapper:an,background_img_container_login:sn,background_img_container_registration:rn,background_container:cn},ge=({register:n,errors:t,name:a,placeholder:s,className:r})=>e.createElement(e.Fragment,null,e.createElement("div",{className:d.error_container},e.createElement("label",{className:d.name_label},a==="username"?e.createElement("div",{className:d.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:d.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:d.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:d[r]},t[a].message))),on=({password:n})=>e.createElement("div",{className:d.porgress_container},e.createElement(We,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:d.strengthBar})),Ee=({register:n,errors:t,name:a,placeholder:s,getValues:r,formType:c,className:l})=>{const[E,i]=_.useState("password"),[g,o]=_.useState("");function m(p){o(p.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:d.error_container},e.createElement("label",{className:d.password_label},e.createElement("div",{className:d.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:p=>p===r("password")||"Passwords do not match"}),type:E,placeholder:s,onChange:m,className:d.password_input})," ",e.createElement("div",{className:d.eye,onClick:()=>{i(E==="password"?"text":"password")}},E==="password"?e.createElement(Fe,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Oe,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:d[l]},t[a].message)),a==="password"&&c!=="login"&&e.createElement(on,{password:g}))},Ie=({onDataSubmit:n,formType:t,schema:a})=>{const[s,r]=_.useState(0);_.useEffect(()=>{const o=()=>{r(window.innerWidth)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]);const{register:c,reset:l,handleSubmit:E,formState:{errors:i}}=ve({resolver:Ne(a)}),g=o=>{const{passwordConfirmation:m,...p}=o;n(p),l()};return e.createElement(e.Fragment,null,e.createElement("section",{className:t==="login"?`${d.login_register_section}`:`${d.register_login_section}`},t==="login"?e.createElement(e.Fragment,null,e.createElement("div",{className:d.background_img_container_login},e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:d.background_container_login},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))):e.createElement(e.Fragment,null,e.createElement("div",{className:d.background_container_registration},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:d.background_img_container_registration},e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:d.form_container,style:{padding:s<768&&t==="login"?"98px 20px":s>768&&t==="login"?"80px 62px":"40px 62px"}},e.createElement("a",{href:"",className:d.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("form",{className:d.form,onSubmit:E(g)},t==="register"&&e.createElement(ge,{register:c,errors:i,name:"username",placeholder:"Name",className:"username"}),e.createElement(ge,{register:c,errors:i,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(Ee,{register:c,errors:i,name:"password",placeholder:"Password",onChange:o=>handleChange(o),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(Ee,{register:c,errors:i,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:d.button_cont},e.createElement("button",{className:d.submit_btn,type:"submit"},"log in"),e.createElement($,{className:d.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:d.button_cont},e.createElement("button",{className:d.submit_btn,type:"submit"},"register"),e.createElement($,{className:d.inactive_btn,to:"/login"},"log in"))," "))))},ln=ce({password:S().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:S().required().email("Email is not valid")}).required(),mn=()=>{const n=re(),t=N(),a=r=>{t(F(r)).unwrap().then(()=>{n("/home")}).catch(c=>{console.log(c.message),M(c)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement("div",null,e.createElement(Ie,{formType:"login",onDataSubmit:a,values:s,schema:ln}))},un=ce({username:S().required(),password:S().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:S().required().email("Email is not valid"),passwordConfirmation:S().oneOf([Ae("password"),null],"Passwords must match")}).required(),dn="_registerWrapper_15m0u_1",_n={registerWrapper:dn},gn=()=>{const n=N(),t=re(),a=s=>{n(W(s)).unwrap().then(()=>{t("/home")}).catch(r=>{console.log(r),M(r)})};return e.createElement("div",{className:_n.registerWrapper},e.createElement(Ie,{onDataSubmit:a,formType:"register",schema:un}))},O=x("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await C.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),A=x("deleteTransaction",async(n,t)=>{try{return await C.delete(`transactions/${n}`),n}catch(a){return t.rejectWithValue(a.message)}}),V=x("addTransaction",async(n,t)=>{try{const{data:a}=await C.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),Y=x("editTransaction",async(n,t)=>{try{const{data:a}=await C.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),U=x("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await C.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),j=x("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await C.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),ie=()=>{const n=L.useMediaQuery({query:"(min-width: 768px)"}),t=L.useMediaQuery({query:"(min-width: 1280px)"}),a=L.useMediaQuery({query:"(max-width: 768px)"}),s=L.useMediaQuery({query:"(max-width: 767px)"}),r=L.useMediaQuery({query:"(orientation: portrait)"}),c=L.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:r,isRetina:c}},En={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},me=se({name:"transactions",initialState:En,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(O.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(A.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a),t.loading=!1}).addCase(V.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(Y.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(r=>r.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(U.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(j.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(P(O.pending,A.pending,V.pending,Y.pending,U.pending,j.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(P(O.rejected,A.rejected,V.rejected,Y.rejected,U.rejected,j.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),pn=me.reducer;me.actions;const{selectTransactions:hn,selectIsLoading:Va,selectIsError:Ya,selectTransactionCategories:De,selectYear:Ua,selectMonth:Xa,selectCategoriesSummary:Ga,selectExpenseSummary:Ha,selectIncomeSummary:Qa,selectPeriodTotal:Ja}=me.selectors,bn="_labelExpense_c530i_8",fn="_labelIncome_c530i_15",wn="_activeIncome_c530i_46",yn="_activeExpense_c530i_53",vn="_slider_c530i_59",Nn="_round_c530i_106",k={"transaction-switcher":"_transaction-switcher_c530i_2",switch:"_switch_c530i_22",labelExpense:bn,labelIncome:fn,activeIncome:wn,activeExpense:yn,slider:vn,round:Nn},Cn=({onChange:n})=>{const[t,a]=_.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:k["transaction-switcher"]},e.createElement("span",{className:t?k.activeIncome:k.labelIncome},"Income"),e.createElement("label",{className:`${k.switch} ${t?k.income:k.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${k.slider} ${k.round}`})),e.createElement("span",{className:t?k.labelExpense:k.activeExpense},"Expense"))},Sn="_container_qwzc8_2",xn="_formWrapper_qwzc8_13",kn="_header_qwzc8_21",Tn="_secondContainer_qwzc8_27",In="_category_qwzc8_30",Dn="_boxDate_qwzc8_43",Rn="_incomeInput_qwzc8_52",Ln="_customInput_qwzc8_53",jn="_svgBox_qwzc8_70",Mn="_comment_qwzc8_91",Bn="_selectExpense_qwzc8_92",zn="_btnBox_qwzc8_108",Pn="_checkBox_qwzc8_147",w={container:Sn,formWrapper:xn,header:kn,secondContainer:Tn,category:In,boxDate:Dn,incomeInput:Rn,customInput:Ln,svgBox:jn,comment:Mn,selectExpense:Bn,btnBox:zn,checkBox:Pn},pe=n=>n<10?"0"+n:n,he=n=>{const t=n.getFullYear(),a=pe(n.getMonth()+1),s=pe(n.getDate());return`${t}-${a}-${s}`},be=({name:n,register:t,errors:a,placeholder:s,className:r})=>e.createElement("div",{className:w.inputContainer},e.createElement("input",{className:r,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message));function Re({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:r,schema:c}){const{register:l,handleSubmit:E,formState:{errors:i},setValue:g,reset:o}=ve({resolver:Ne(c)}),[m,p]=_.useState(""),[y,I]=_.useState(""),[B,q]=_.useState(new Date);_.useEffect(()=>{I(n?n.type:"EXPENSE")},[n]),_.useEffect(()=>{g("amount",n&&n.amount)},[n,g]),_.useEffect(()=>{g("comment",n&&n.comment)},[n,g]);const T=_.useMemo(()=>t.map(({id:f,name:$e})=>({value:f,label:$e})),[t]),z=_.useMemo(()=>T.find(f=>(n==null?void 0:n.categoryId)===f.value),[n,T]),H=f=>{p(f)},Pe=f=>{s==="add"?(r({transactionDate:he(B),amount:+f.amount,comment:f.comment,type:y,categoryId:y==="EXPENSE"?m.value||T[0].value:"063f1132-ba5d-42b4-951d-44011ca46262"}),o()):(r({transactionDate:he(B),amount:+f.amount,comment:f.comment}),o()),o()},Q=f=>{I(f?"INCOME":"EXPENSE")};return e.createElement("div",{className:w.container},e.createElement("form",{className:w.formWrapper,onSubmit:E(Pe)},e.createElement("h1",{className:w.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(Cn,{onChange:Q}):e.createElement("div",null,e.createElement("ul",{className:w.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&y==="EXPENSE"||Q(!0)},className:n.type==="INCOME"||y==="INCOME"?w.activeIncome:"",disabled:s==="edit"&&y==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&y==="INCOME"||Q(!1)},className:y==="EXPENSE"?w.activeExpense:"",disabled:s==="edit"&&y==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:w.secondContainer},y==="EXPENSE"&&e.createElement("div",{className:w.category},e.createElement(Ve,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:T,placeholder:"Select category",defaultValue:z&&z,onChange:H,isDisabled:s==="edit"}),i.category&&e.createElement("span",null,i.category.message)),e.createElement("div",{className:w.boxDate},e.createElement(be,{className:w.incomeInput,name:"amount",placeholder:"0.00",errors:i,register:l}),e.createElement("div",{className:w.svgBox},e.createElement(Ye,{className:w.customInput,selected:n?n.transactionDate:B,onChange:f=>{g("transactionDate",f),q(f)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-date"})),i.transactionDate&&e.createElement("span",null,i.transactionDate.message))),e.createElement(be,{className:w.comment,name:"comment",placeholder:"Comment",errors:i,register:l}),e.createElement("div",{className:w.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}function $n({categories:n,editContent:t,toggle:a}){const s=N(),r=c=>{s(Y({content:{...c},id:t.id})).unwrap().then(l=>{M.success("Changed!"),a()}).catch(l=>{M.error("Credentials is not valid!")})};return e.createElement(Re,{toggle:a,content:t.content,categories:n,onDataSubmit:r,typeForm:"edit"})}const qn=ce({comment:S().required("Describe your transaction").min(5,"Give more details"),transactionDate:Ue().required("Please choose the date"),type:S().oneOf(["INCOME","EXPENSE"]).required(),category:S().when("type",{is:"EXPENSE",then:S().required("Category is required for expenses"),otherwise:S().notRequired()})}).shape({amount:J().typeError("Amount must be a number").required("Please enter the amount").when("type",{is:"EXPENSE",then:J().negative("The amount must be negative"),otherwise:J().positive("The amount must be positive")})}).required();function Wn({categories:n,toggle:t}){const a=N(),s=r=>{a(V(r)).unwrap().then(()=>{M.success("Transaction was successfully added"),t()}).catch(c=>{M.error("Credentials is not valid!")})};return e.createElement(Re,{schema:qn,categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const Le="/money_guard_project/assets/sprite-d3dedbbb.svg",Fn="_transaction_item_1bzo6_1",On="_income_border_1bzo6_6",An="_expense_border_1bzo6_10",Vn="_income_text_1bzo6_14",Yn="_expense_text_1bzo6_19",Un="_transactions_table_mobile_1bzo6_24",Xn="_transaction_colum_1bzo6_30",Gn="_transaction_first_column_1bzo6_34",Hn="_transaction_row_mobile_1bzo6_38",Qn="_transaction_row_1bzo6_38",Jn="_table_body_1bzo6_57",Kn="_btn_delete_1bzo6_61",Zn="_btn_edit_1bzo6_76",ea="_btn_wrapper_1bzo6_86",ta="_icon_edit_1bzo6_93",u={transaction_item:Fn,income_border:On,expense_border:An,income_text:Vn,expense_text:Yn,transactions_table_mobile:Un,transaction_colum:Xn,transaction_first_column:Gn,transaction_row_mobile:Hn,transaction_row:Qn,table_body:Jn,btn_delete:Kn,btn_edit:Zn,btn_wrapper:ea,icon_edit:ta},fe=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:r,categoryId:c,comment:l,amount:E}=n,{isBigScreenOrTablet:i,isMobile:g}=ie(),o=N(),m=b(De);function p(T){const z=m.find(H=>H.id===T);return z?z.name:"Unknown Category"}const y=T=>{o(A(T))},I=r.toLowerCase()==="income"?"+":"-",B=r.toLowerCase()==="income"?u.income_border:u.expense_border,q=r.toLowerCase()==="income"?u.income_text:u.expense_text;return e.createElement(e.Fragment,null,g&&e.createElement("li",{key:a,className:`${u.transaction_item} ${B}`},e.createElement("table",{className:u.transactions_table_mobile},e.createElement("tbody",{className:u.table_body},e.createElement("tr",{className:u.transaction_row_mobile},e.createElement("td",{className:u.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:u.transaction_row_mobile},e.createElement("td",{className:u.transaction_first_column},"Type"),e.createElement("td",null,I)),e.createElement("tr",{className:u.transaction_row_mobile},e.createElement("td",{className:u.transaction_first_column},"Category"),e.createElement("td",null,p(c))),e.createElement("tr",{className:u.transaction_row_mobile},e.createElement("td",{className:u.transaction_first_column},"Comment"),e.createElement("td",null,l)),e.createElement("tr",{className:u.transaction_row_mobile},e.createElement("td",{className:u.transaction_first_column},"Sum"),e.createElement("td",{className:q},E)),e.createElement("tr",{className:u.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:u.btn_delete,onClick:()=>y(a)},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:E,comment:l,transactionDate:s},a),className:u.btn_edit},e.createElement("svg",{className:u.icon_edit},e.createElement("use",{xlinkHref:`${Le}#icon-edit`}))," ","Edit")))))),i&&e.createElement("tr",{className:u.transaction_row},e.createElement("td",{className:u.transaction_colum},s),e.createElement("td",{className:u.transaction_colum,style:{textAlign:"center"}},I),e.createElement("td",{className:u.transaction_colum},p(c)),e.createElement("td",{className:u.transaction_colum},l),e.createElement("td",{className:`${u.transaction_colum} ${q}`,style:{textAlign:"right"}},E),e.createElement("td",{className:u.transaction_colum},e.createElement("div",{className:u.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:E,comment:l,transactionDate:s},a),className:u.btn_edit},"Edit"),e.createElement("button",{className:u.btn_delete,onClick:()=>y(a)},"Delete")))))},na="_transactions_section_smf2v_1",aa="_transactions_container_smf2v_34",sa="_transactions_table_smf2v_85",ra="_transactions_list_smf2v_92",ca="_transaction_row_head_smf2v_98",oa="_table_body_smf2v_121",la="_btn_add_smf2v_125",ia="_icon_plus_smf2v_140",ma="_empty_transactions_smf2v_146",v={transactions_section:na,transactions_container:aa,transactions_table:sa,transactions_list:ra,transaction_row_head:ca,table_body:oa,btn_add:la,icon_plus:ia,empty_transactions:ma},ua=()=>{const{isOpen:n,toggle:t}=ke(),[a,s]=_.useState(""),r=b(hn),c=b(De),{isBigScreenOrTablet:l,isMobile:E}=ie();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const i=(o,m,p)=>{t(),s({content:o,id:m,name:p}),n&&document.body.classList.add("modal-open")},g=()=>{t(),s(null)};return e.createElement("section",{className:v.transactions_section},e.createElement("div",{className:v.transactions_container},E&&e.createElement("ul",{className:v.transactions_list},r.length>0?r.map(o=>e.createElement(fe,{handleEditItem:i,key:o.id,transaction:o})):e.createElement("div",{className:v.empty_transactions},"No transactions")),l&&e.createElement(e.Fragment,null,r.length>0?e.createElement("table",{className:v.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:v.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:v.table_body},r.map(o=>e.createElement(fe,{handleEditItem:i,key:o.id,transaction:o})))):e.createElement(e.Fragment,null,e.createElement("table",{className:v.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:v.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:v.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>g(),className:v.btn_add}," ",e.createElement("svg",{className:v.icon_plus},e.createElement("use",{xlinkHref:`${Le}#icon-plus`})))),n&&e.createElement(xe,{closeModal:t},a?e.createElement($n,{editContent:a,categories:c,toggle:t}):e.createElement(Wn,{categories:c,toggle:t})))},je=x("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await ye.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),da={usdRate:null,eurRate:null,lastFetchTime:null},Me=se({name:"currency",initialState:da,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(je.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),_a=Me.reducer,{selectUsdRate:ga,selectEurRate:Ea,selectLastFetchTime:pa}=Me.selectors,ha="_wrapper_d2ubo_14",ba="_title_d2ubo_49",fa="_row_d2ubo_79",wa="_titleItem_d2ubo_97",ya="_rowItem_d2ubo_98",va="_vector_d2ubo_104",Na="_image_d2ubo_109",Ca="_secondimage_d2ubo_132",Sa="_smallnumeur_d2ubo_148",xa="_smallnumusd_d2ubo_158",h={wrapper:ha,title:ba,row:fa,titleItem:wa,rowItem:ya,vector:va,image:Na,secondimage:Ca,smallnumeur:Sa,smallnumusd:xa};function Be(){const n=N(),t=b(ga),a=b(Ea),s=b(pa),{isDesktopOrLaptop:r,isBigScreen:c,isTabletOrMobile:l,isRetina:E}=ie();let i="../../img/images/currency_mobile.webp",g="../../img/images/line_desc_mob_1x.webp";return window.devicePixelRatio>=2?r||c?(i="../../img/images/currency_desk@2x.webp",g="../../img/images/line_desc_2x.webp"):l&&(i="../../img/images/currency_tablet@2x.webp",g="../../img/images/line_desc_tab_2x.webp"):r||c?(i="../../img/images/currency_desk.webp",g="../../img/images/line_desc_1x.webp"):l&&(i="../../img/images/currency_tablet.webp",g="../../img/images/line_desc_tab_1x.webp"),_.useEffect(()=>{(new Date().getTime()-s)/(1e3*60*60)>1&&n(je())},[n,s]),e.createElement("div",{className:h.wrapper},e.createElement("div",{className:h.secondwrapper},e.createElement("ul",{className:h.title},e.createElement("li",{className:h.titleItem},"Currency"),e.createElement("li",{className:h.titleItem},"Purchase"),e.createElement("li",{className:h.titleItem},"Sale")),t&&e.createElement("ul",{className:h.row},e.createElement("li",{className:h.rowItem},"USD"),e.createElement("li",{className:h.rowItem},t.rateBuy),e.createElement("li",{className:h.rowItem},t.rateSell)),a&&e.createElement("ul",{className:h.row},e.createElement("li",{className:h.rowItem},"EUR"),e.createElement("li",{className:h.rowItem},a.rateBuy),e.createElement("li",{className:h.rowItem},a.rateSell)),r&&e.createElement(e.Fragment,null,e.createElement("p",{className:h.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:h.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:h.image,src:i,alt:"Currency rate"}),e.createElement("img",{className:h.secondimage,src:g,alt:"Currency rate"})))}const ka=()=>{const n=Te().windowWidth,t=N();return _.useEffect(()=>{t(O())},[t]),_.useEffect(()=>{t(U())},[t]),e.createElement(e.Fragment,null,n>=768&&e.createElement(Be,null),e.createElement(ua,null))},Ta="_loaderWrapper_1hccn_1",Ia="_loader_1hccn_1",Da="_spinner_1hccn_1",Ra="_loaderName_1hccn_34",ae={loaderWrapper:Ta,loader:Ia,spinner:Da,loaderName:Ra},we=()=>e.createElement("div",{className:ae.loaderWrapper},e.createElement("div",{className:ae.loader},e.createElement("span",{className:ae.loaderName}))),La=({selectedMonth:n,selectedYear:t,onMonthChange:a,onYearChange:s})=>{const r=N();_.useEffect(()=>{r(j())},[r]);const c=m=>{a(m)},l=m=>{s(m)},i=new Date().getFullYear(),g=Array.from({length:i-2019},(m,p)=>i-p).reverse(),o=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.createElement("div",null,e.createElement("select",{value:n,onChange:c},o.map((m,p)=>e.createElement("option",{key:p+1,value:p+1},m))),e.createElement("select",{value:t,onChange:l},g.map(m=>e.createElement("option",{key:m,value:m},m))))},ja=({selectedMonth:n,selectedYear:t})=>{const a=N(),s=b(o=>o.transactions.transactionsList),r=b(o=>{var m;return(m=o.transactions.transactionSummaryController)==null?void 0:m.incomeSummary}),c=b(o=>{var m;return(m=o.transactions.transactionSummaryController)==null?void 0:m.expenseSummary});_.useEffect(()=>{a(j())},[a,n,t]);const l=()=>"#"+Math.floor(Math.random()*16777215).toString(16),i=(()=>s.map(o=>({type:o.type,color:l()})))(),g=o=>{const m=i.find(p=>p.type===o);return m?m.color:"#000"};return e.createElement("div",null,e.createElement("h2",null,"Statistics Table"),e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Category"),e.createElement("th",null,"Sum"))),e.createElement("tbody",null,s.map((o,m)=>e.createElement("tr",{key:m},e.createElement("td",null,e.createElement("div",null,e.createElement("div",{style:{width:"10px",height:"10px",backgroundColor:g(o.type)}}),o.type)),e.createElement("td",null,o.total))))),e.createElement("div",null,e.createElement("p",null,"Expenses: ",c),e.createElement("p",null,"Income: ",r)))},Ma=({transactions:n})=>{const t=s=>{const r=n.find(c=>c.type===s);return r?r.color:"#"+Math.floor(Math.random()*16777215).toString(16)},a={labels:n.map(s=>s.type),datasets:[{data:n.map(s=>s.total),backgroundColor:n.map(s=>t(s.type)),hoverBackgroundColor:n.map(s=>t(s.type))}]};return e.createElement("div",null,e.createElement(Xe,{data:a}))},Ba=()=>{const n=N(),t=b(l=>l.transactions.transactionsList);b(l=>{var E;return(E=l.transactions.transactionSummaryController)==null?void 0:E.incomeSummary}),b(l=>{var E;return(E=l.transactions.transactionSummaryController)==null?void 0:E.expenseSummary});const[a,s]=_.useState(new Date().getMonth()+1),[r,c]=_.useState(new Date().getFullYear());return _.useEffect(()=>{n(j())},[n,a,r]),e.createElement("section",null,e.createElement(ja,{selectedMonth:a,selectedYear:r}),e.createElement(Ma,{transactions:t}),e.createElement(La,{setSelectedMonth:s,setSelectedYear:c}))};function za(){const n=b(G),t=b(ut);return N(),t?e.createElement(we,null):e.createElement(e.Fragment,null,e.createElement(_.Suspense,{fallback:e.createElement(we,null)},e.createElement(Ge,null,e.createElement(D,{path:"/",element:e.createElement(Rt,null)},e.createElement(D,{index:!0,element:e.createElement(_e,{component:mn,redirectTo:"/home"})}),e.createElement(D,{path:"register",element:e.createElement(_e,{component:gn,redirectTo:"/home"})}),e.createElement(D,{path:"/home",element:e.createElement(ee,{component:ka,redirectTo:"/"})}),e.createElement(D,{path:"/statistics",element:e.createElement(ee,{component:Ba,redirectTo:"/"})}),e.createElement(D,{path:"/currency",element:e.createElement(ee,{component:Be,redirectTo:"/"})})),e.createElement(D,{path:"*",element:n?e.createElement(X,{to:"/home"}):e.createElement(X,{to:"/"})}))))}const Pa={key:"auth",version:1,storage:Ce,whitelist:["token"]},$a={key:"root",storage:Ce},ze=He({reducer:{auth:de(Pa,it),transactions:pn,currency:de($a,_a)},middleware:n=>n({serializableCheck:{ignoredActions:[Qe,Je,Ke,Ze,et,tt]}}),devTools:!1}),qa=nt(ze);at.createRoot(document.getElementById("root")).render(e.createElement(st,null,e.createElement(rt,{store:ze},e.createElement(ct,{loading:null,persistor:qa},e.createElement(za,null),e.createElement(ot,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
