import{a as Se,c as S,b as de,i as H,u as y,R as e,N as ee,d as ue,e as I,r as i,f as Ve,L as Ue,g as M,h as q,O as he,_ as Ge,P as Qe,j as Xe,k as Te,o as Ie,l as te,m as L,B as F,n as Je,p as W,S as Ke,D as Ze,q as Le,s as De,t as et,v as tt,w as R,x as nt,y as be,F as at,z as st,A as rt,C as ct,E as ot,G as lt,H as it,I as Re,J as mt,K as dt,M as ut,Q as _t,T as gt}from"./assets/vendor-0e4925e7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const _ of c.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&s(_)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const x=Se.create({baseURL:"https://wallet.b.goit.study/api/"}),_e=n=>{x.defaults.headers.common.Authorization=`Bearer ${n}`},pt=()=>{x.defaults.headers.common.Authorization=""},Y=S("register",async(n,t)=>{try{const{data:a}=await x.post("auth/sign-up",n);return _e(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),V=S("login",async(n,t)=>{try{const{data:a}=await x.post("auth/sign-in",n);return _e(a.token),a}catch(a){return console.log(a),t.rejectWithValue(a.response.data.message)}}),$e=S("logout",async(n,t)=>{try{const{data:a}=await x.delete("auth/sign-out");return pt(),a}catch(a){return t.rejectWithValue(a.message)}}),U=S("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{_e(a);const{data:s}=await x.get("users/current");return console.log(s),s}catch(s){return t.rejectWithValue(s.message)}}),re={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},ge=de({name:"auth",initialState:re,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>re},extraReducers:n=>{n.addCase($e.fulfilled,t=>re).addCase(U.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(H(Y.fulfilled,V.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(H(Y.pending,V.pending,U.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(H(Y.rejected,V.rejected,U.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),Et=ge.reducer,{selectIsLoggedIn:ne,selectUser:ht,selectToken:vs,selectIsRefresh:bt,selectBalance:ws,selectIsLoading:Ns}=ge.selectors,{logout:ft}=ge.actions,G=S("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await x.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),Q=S("deleteTransaction",async(n,t)=>{try{return await x.delete(`transactions/${n.id}`),n}catch(a){return t.rejectWithValue(a.message)}}),X=S("addTransaction",async(n,t)=>{try{const{data:a}=await x.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),J=S("editTransaction",async(n,t)=>{try{const{data:a}=await x.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),K=S("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await x.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),Z=S("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await x.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),ce=({component:n,redirectTo:t="/"})=>y(ne)?e.createElement(n,null):e.createElement(ee,{to:t}),fe=({component:n,redirectTo:t="/"})=>y(ne)?e.createElement(ee,{to:t}):e.createElement(n,null),j="/money_guard_project/assets/sprite-d3dedbbb.svg",yt="_wrap_1nzyu_1",vt="_logo_1nzyu_5",wt="_text_1nzyu_14",oe={wrap:yt,logo:vt,text:wt},Nt=({closeModal:n})=>{const t=ue(),a=I(),s=()=>{a($e()),a(ft()),n(),t("/")};return e.createElement("div",{className:oe.wrap},e.createElement("a",{href:"",className:oe.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:oe.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},Ct="_closeButton_11uif_2",kt="_modalContent_11uif_13",xt="_modalWrapper_11uif_33",le={closeButton:Ct,modalContent:kt,modalWrapper:xt},St=document.querySelector("#modal"),Me=({closeModal:n,children:t})=>{const a=i.useCallback(r=>{r.key==="Escape"&&n()},[n]);i.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=r=>{r.target===r.currentTarget&&n()};return Ve.createPortal(e.createElement("div",{onClick:s,className:le.modalWrapper},e.createElement("div",{className:le.modalContent},e.createElement("button",{className:le.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),St)},je=()=>{const[n,t]=i.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(c=>!c)}},Tt="_header_3tysc_1",It="_hederContainer_3tysc_16",Lt="_logo_3tysc_24",Dt="_wrap_3tysc_34",Rt="_user_3tysc_39",$t="_button_3tysc_45",Mt="_icon_3tysc_59",jt="_heder_3tysc_16",$={header:Tt,hederContainer:It,logo:Lt,wrap:Dt,user:Rt,button:$t,icon:Mt,heder:jt},Bt=()=>{const{isOpen:n,toggle:t}=je(),a=y(ht),s=a.email.indexOf("@"),r=a.email.slice(0,s);return e.createElement("header",{className:$.header},e.createElement("div",{className:$.hederContainer},e.createElement(Ue,{to:"/",className:$.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{xlinkHref:`${j}#icon-logo`})),"Money Guard"),e.createElement("div",{className:$.wrap}," ",e.createElement("p",{className:$.user},r),e.createElement("button",{className:$.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:$.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement(Me,{closeModal:t},e.createElement(Nt,{closeModal:t}))))},Be=()=>{const[n,t]=i.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return i.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Wt="_navLinkContainer_dgb7w_1",Pt="_navLinkWrapper_dgb7w_5",Ft="_navLinkTitle_dgb7w_11",At="_navLinkIcon_dgb7w_16",Ot="_active_dgb7w_34",b={navLinkContainer:Wt,navLinkWrapper:Pt,navLinkTitle:Ft,navLinkIcon:At,active:Ot},qt=()=>{const n=Be().windowWidth;return e.createElement("div",{className:b.navLinkContainer},e.createElement("div",{className:b.navLinkWrapper},n<768?e.createElement(M,{to:"home",className:({isActive:t})=>q(b.navLinkTitle,t&&b.active)},e.createElement("svg",{width:"38",height:"38",className:b.navLinkIcon},e.createElement("use",{href:"../../img/sprite.svg#icon-home"}))):e.createElement(M,{to:"home",className:({isActive:t})=>q(b.navLinkTitle,t&&b.active)},e.createElement("svg",{width:"18",height:"18",className:b.navLinkIcon},e.createElement("use",{xlinkHref:`${j}#icon-home`})),"Home"),n<768?e.createElement(M,{to:"statistics",className:({isActive:t})=>q(b.navLinkTitle,t&&b.active)},e.createElement("svg",{width:"38",height:"38",className:b.navLinkIcon},e.createElement("use",{xlinkHref:`${j}#icon-statistics`}))):e.createElement(M,{to:"statistics",className:({isActive:t})=>q(b.navLinkTitle,t&&b.active)},e.createElement("svg",{width:"18",height:"18",className:b.navLinkIcon},e.createElement("use",{xlinkHref:`${j}#icon-statistics`})),"Statistics"),n<768&&e.createElement(M,{to:"/currency",className:({isActive:t})=>q(b.navLinkTitle,t&&b.active)},e.createElement("svg",{width:"38",height:"38",className:b.navLinkIcon},e.createElement("use",{href:"../../img/sprite.svg#icon-currency"})))))},zt=()=>y(ne)?e.createElement(e.Fragment,null,e.createElement(Bt,null),e.createElement(qt,null),e.createElement(he,null)):e.createElement(e.Fragment,null,e.createElement(he,null)),Ht="_login_register_section_rb5b2_1",Yt="_register_login_section_rb5b2_2",Vt="_background_container_login_rb5b2_13",Ut="_background_container_registration_rb5b2_14",Gt="_gradient_container_rb5b2_163",Qt="_form_container_rb5b2_171",Xt="_form_rb5b2_171",Jt="_submit_btn_rb5b2_210",Kt="_inactive_btn_rb5b2_230",Zt="_password_label_rb5b2_247",en="_password_input_rb5b2_256",tn="_error_container_rb5b2_266",nn="_username_rb5b2_270",an="_email_rb5b2_276",sn="_password_rb5b2_247",rn="_cpassword_rb5b2_288",cn="_eye_rb5b2_302",on="_name_label_rb5b2_306",ln="_name_input_rb5b2_314",mn="_name_user_icon_rb5b2_331",dn="_icon_email_cont_rb5b2_335",un="_password_icon_rb5b2_339",_n="_button_cont_rb5b2_343",gn="_strengthBar_rb5b2_349",pn="_porgress_container_rb5b2_369",En="_logo_wrapper_rb5b2_374",hn="_background_img_container_login_rb5b2_546",bn="_background_img_container_registration_rb5b2_547",fn="_background_container_rb5b2_13",m={login_register_section:Ht,register_login_section:Yt,background_container_login:Vt,background_container_registration:Ut,gradient_container:Gt,form_container:Qt,form:Xt,submit_btn:Jt,inactive_btn:Kt,password_label:Zt,password_input:en,error_container:tn,username:nn,email:an,password:sn,cpassword:rn,eye:cn,name_label:on,name_input:ln,name_user_icon:mn,icon_email_cont:dn,password_icon:un,button_cont:_n,strengthBar:gn,porgress_container:pn,logo_wrapper:En,background_img_container_login:hn,background_img_container_registration:bn,background_container:fn},ye=({register:n,errors:t,name:a,placeholder:s,className:r})=>e.createElement(e.Fragment,null,e.createElement("div",{className:m.error_container},e.createElement("label",{className:m.name_label},a==="username"?e.createElement("div",{className:m.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:m.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:m.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:m[r]},t[a].message))),yn=({password:n})=>e.createElement("div",{className:m.porgress_container},e.createElement(Ge,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:m.strengthBar})),ve=({register:n,errors:t,name:a,placeholder:s,getValues:r,formType:c,className:_})=>{const[p,l]=i.useState("password"),[g,d]=i.useState("");function N(u){d(u.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:m.error_container},e.createElement("label",{className:m.password_label},e.createElement("div",{className:m.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:u=>u===r("password")||"Passwords do not match"}),type:p,placeholder:s,onChange:N,className:m.password_input})," ",e.createElement("div",{className:m.eye,onClick:()=>{l(p==="password"?"text":"password")}},p==="password"?e.createElement(Qe,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Xe,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:m[_]},t[a].message)),a==="password"&&c!=="login"&&e.createElement(yn,{password:g}))},We=({onDataSubmit:n,formType:t,schema:a})=>{const[s,r]=i.useState(0);i.useEffect(()=>{const d=()=>{r(window.innerWidth)};return window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]);const{register:c,reset:_,handleSubmit:p,formState:{errors:l}}=Te({resolver:Ie(a)}),g=d=>{const{passwordConfirmation:N,...u}=d;n(u),_()};return e.createElement(e.Fragment,null,e.createElement("section",{className:t==="login"?`${m.login_register_section}`:`${m.register_login_section}`},t==="login"?e.createElement(e.Fragment,null,e.createElement("div",{className:m.background_img_container_login},e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:m.background_container_login},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))):e.createElement(e.Fragment,null,e.createElement("div",{className:m.background_container_registration},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:m.background_img_container_registration},e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:m.form_container,style:{padding:s<768&&t==="login"?"98px 0px":s>768&&t==="login"?"80px 0px":"40px 0px"}},e.createElement("a",{href:"",className:m.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("form",{className:m.form,onSubmit:p(g)},t==="register"&&e.createElement(ye,{register:c,errors:l,name:"username",placeholder:"Name",className:"username"}),e.createElement(ye,{register:c,errors:l,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(ve,{register:c,errors:l,name:"password",placeholder:"Password",onChange:d=>handleChange(d),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(ve,{register:c,errors:l,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:m.button_cont},e.createElement("button",{className:m.submit_btn,type:"submit"},"log in"),e.createElement(M,{className:m.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:m.button_cont},e.createElement("button",{className:m.submit_btn,type:"submit"},"register"),e.createElement(M,{className:m.inactive_btn,to:"/login"},"log in"))," "))))},vn=te({password:L().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:L().required().email("Email is not valid")}).required(),wn=()=>{const n=ue(),t=I(),a=r=>{t(V(r)).unwrap().then(()=>{n("/home")}).catch(c=>{console.log(c.message),F(c)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement(e.Fragment,null,e.createElement(We,{formType:"login",onDataSubmit:a,values:s,schema:vn}))},Nn=te({username:L().required(),password:L().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:L().required().email("Email is not valid"),passwordConfirmation:L().oneOf([Je("password"),null],"Passwords must match")}).required();const Cn=()=>{const n=I(),t=ue(),a=s=>{n(Y(s)).unwrap().then(()=>{t("/home")}).catch(r=>{console.log(r),F(r)})};return e.createElement(e.Fragment,null,e.createElement(We,{onDataSubmit:a,formType:"register",schema:Nn}))},pe=()=>{const n=W.useMediaQuery({query:"(min-width: 768px)"}),t=W.useMediaQuery({query:"(min-width: 1280px)"}),a=W.useMediaQuery({query:"(max-width: 768px)"}),s=W.useMediaQuery({query:"(max-width: 767px)"}),r=W.useMediaQuery({query:"(orientation: portrait)"}),c=W.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:r,isRetina:c}},kn={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},Ee=de({name:"transactions",initialState:kn,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(G.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(Q.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a.id),t.loading=!1}).addCase(X.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(J.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(r=>r.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(K.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(Z.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(H(G.pending,Q.pending,X.pending,J.pending,K.pending,Z.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(H(G.rejected,Q.rejected,X.rejected,J.rejected,K.rejected,Z.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),xn=Ee.reducer;Ee.actions;const{selectTransactions:Sn,selectIsLoading:Cs,selectIsError:ks,selectTransactionCategories:Pe,selectYear:xs,selectMonth:Ss,selectCategoriesSummary:Tn,selectExpenseSummary:In,selectIncomeSummary:Ln,selectPeriodTotal:Dn}=Ee.selectors,Rn="_labelExpense_c530i_8",$n="_labelIncome_c530i_15",Mn="_activeIncome_c530i_46",jn="_activeExpense_c530i_53",Bn="_slider_c530i_59",Wn="_round_c530i_106",T={"transaction-switcher":"_transaction-switcher_c530i_2",switch:"_switch_c530i_22",labelExpense:Rn,labelIncome:$n,activeIncome:Mn,activeExpense:jn,slider:Bn,round:Wn},Pn=({onChange:n})=>{const[t,a]=i.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:T["transaction-switcher"]},e.createElement("span",{className:t?T.activeIncome:T.labelIncome},"Income"),e.createElement("label",{className:`${T.switch} ${t?T.income:T.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${T.slider} ${T.round}`})),e.createElement("span",{className:t?T.labelExpense:T.activeExpense},"Expense"))},Fn="_container_1omsk_2",An="_formWrapper_1omsk_13",On="_header_1omsk_21",qn="_secondContainer_1omsk_27",zn="_category_1omsk_30",Hn="_boxDate_1omsk_43",Yn="_incomeInput_1omsk_52",Vn="_customInput_1omsk_53",Un="_svgBox_1omsk_70",Gn="_comment_1omsk_91",Qn="_selectExpense_1omsk_92",Xn="_btnBox_1omsk_108",Jn="_activeIncome_1omsk_113",Kn="_activeExpense_1omsk_120",Zn="_checkBox_1omsk_160",v={container:Fn,formWrapper:An,header:On,secondContainer:qn,category:zn,boxDate:Hn,incomeInput:Yn,customInput:Vn,svgBox:Un,comment:Gn,selectExpense:Qn,btnBox:Xn,activeIncome:Jn,activeExpense:Kn,checkBox:Zn},we=n=>n<10?"0"+n:n,Ne=n=>{const t=n.getFullYear(),a=we(n.getMonth()+1),s=we(n.getDate());return`${t}-${a}-${s}`},Ce=({name:n,register:t,errors:a,placeholder:s,className:r})=>e.createElement("div",{className:v.inputContainer},e.createElement("input",{className:r,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message));function Fe({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:r,schema:c}){const{register:_,handleSubmit:p,formState:{errors:l},setValue:g,reset:d}=Te({resolver:Ie(c),mode:"onChange"}),[N,u]=i.useState(""),[E,w]=i.useState(""),[D,A]=i.useState(new Date);i.useEffect(()=>{w(n?n.type:"EXPENSE")},[n]),i.useEffect(()=>{g("amount",n&&n.amount)},[n,g]),i.useEffect(()=>{g("comment",n&&n.comment)},[n,g]);const B=i.useMemo(()=>t.map(({id:f,name:Ye})=>({value:f,label:Ye})),[t]),O=i.useMemo(()=>B.find(f=>(n==null?void 0:n.categoryId)===f.value),[n,B]),ae=f=>{u(f)},He=f=>{s==="add"?(r({transactionDate:Ne(D),amount:E==="EXPENSE"?`-${f.amount}`:f.amount,comment:f.comment,type:E,categoryId:E==="EXPENSE"?N.value||B[0].value:"063f1132-ba5d-42b4-951d-44011ca46262"}),d()):(r({transactionDate:Ne(D),amount:+f.amount,comment:f.comment}),d()),d()},se=f=>{w(f?"INCOME":"EXPENSE")};return e.createElement("div",{className:v.container},e.createElement("form",{className:v.formWrapper,onSubmit:p(He)},e.createElement("h1",{className:v.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(Pn,{onChange:se}):e.createElement("div",null,e.createElement("ul",{className:v.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&E==="EXPENSE"||se(!0)},className:n.type==="INCOME"||E==="INCOME"?v.activeIncome:"",disabled:s==="edit"&&E==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&E==="INCOME"||se(!1)},className:E==="EXPENSE"?v.activeExpense:"",disabled:s==="edit"&&E==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:v.secondContainer},E==="EXPENSE"&&e.createElement("div",{className:v.category},e.createElement(Ke,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:B,placeholder:"Select category",defaultValue:O&&O,onChange:ae,isDisabled:s==="edit"}),l.category&&e.createElement("span",null,l.category.message)),e.createElement("div",{className:v.boxDate},e.createElement(Ce,{className:v.incomeInput,name:"amount",placeholder:"0.00",errors:l,register:_}),e.createElement("div",{className:v.svgBox},e.createElement(Ze,{className:v.customInput,selected:n?n.transactionDate:D,onChange:f=>{g("transactionDate",f),A(f)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-date"})),l.transactionDate&&e.createElement("span",null,l.transactionDate.message))),e.createElement(Ce,{className:v.comment,name:"comment",placeholder:"Comment",errors:l,register:_}),e.createElement("div",{className:v.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}const ea=te({comment:L().required("Describe your transaction").min(5,"Give more details"),transactionDate:Le().required("Please choose the date"),amount:De().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function ta({categories:n,editContent:t,toggle:a}){const s=I(),r=c=>{s(J({content:{...c},id:t.id})).unwrap().then(_=>{F.success("Changed!"),a()}).catch(_=>{F.error("Credentials is not valid!")})};return e.createElement(Fe,{schema:ea,toggle:a,content:t.content,categories:n,onDataSubmit:r,typeForm:"edit"})}const na=te({comment:L().required("Describe your transaction").min(5,"Give more details"),transactionDate:Le().required("Please choose the date"),amount:De().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function aa({categories:n,toggle:t}){const a=I(),s=r=>{a(X(r)).unwrap().then(()=>{F.success("Transaction was successfully added"),t()}).catch(c=>{F.error("Credentials is not valid!")})};return e.createElement(Fe,{schema:na,categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const sa="_transaction_item_jemjf_1",ra="_income_border_jemjf_6",ca="_expense_border_jemjf_10",oa="_income_text_jemjf_14",la="_expense_text_jemjf_19",ia="_transactions_table_mobile_jemjf_24",ma="_transaction_colum_jemjf_30",da="_transaction_first_column_jemjf_34",ua="_transaction_row_mobile_jemjf_38",_a="_transaction_row_jemjf_38",ga="_table_body_jemjf_57",pa="_btn_delete_jemjf_61",Ea="_btn_edit_jemjf_76",ha="_btn_wrapper_jemjf_86",ba="_icon_edit_jemjf_93",o={transaction_item:sa,income_border:ra,expense_border:ca,income_text:oa,expense_text:la,transactions_table_mobile:ia,transaction_colum:ma,transaction_first_column:da,transaction_row_mobile:ua,transaction_row:_a,table_body:ga,btn_delete:pa,btn_edit:Ea,btn_wrapper:ha,icon_edit:ba},ke=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:r,categoryId:c,comment:_,amount:p}=n,{isBigScreenOrTablet:l,isMobile:g}=pe(),d=I(),N=y(Pe);function u(B){const O=N.find(ae=>ae.id===B);return O?O.name:"Unknown Category"}const E=()=>{d(Q(n))},w=r.toLowerCase()==="income"?"+":"-",D=r.toLowerCase()==="income"?o.income_border:o.expense_border,A=r.toLowerCase()==="income"?o.income_text:o.expense_text;return e.createElement(e.Fragment,null,g&&e.createElement("li",{key:a,className:`${o.transaction_item} ${D}`},e.createElement("table",{className:o.transactions_table_mobile},e.createElement("tbody",{className:o.table_body},e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Type"),e.createElement("td",null,w)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Category"),e.createElement("td",null,u(c))),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Comment"),e.createElement("td",null,_)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",{className:o.transaction_first_column},"Sum"),e.createElement("td",{className:A},p)),e.createElement("tr",{className:o.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:o.btn_delete,onClick:E},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:p,comment:_,transactionDate:s},a),className:o.btn_edit},e.createElement("svg",{className:o.icon_edit},e.createElement("use",{xlinkHref:`${j}#icon-edit`}))," ","Edit")))))),l&&e.createElement("tr",{className:o.transaction_row},e.createElement("td",{className:o.transaction_colum},s),e.createElement("td",{className:o.transaction_colum,style:{textAlign:"center"}},w),e.createElement("td",{className:o.transaction_colum},u(c)),e.createElement("td",{className:o.transaction_colum},_),e.createElement("td",{className:`${o.transaction_colum} ${A}`,style:{textAlign:"right"}},p),e.createElement("td",{className:o.transaction_colum},e.createElement("div",{className:o.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:p,comment:_,transactionDate:s},a),className:o.btn_edit},e.createElement("svg",{className:o.icon_edit},e.createElement("use",{xlinkHref:`${j}#icon-edit`}))),e.createElement("button",{className:o.btn_delete,onClick:E},"Delete")))))},fa="_transactions_section_smf2v_1",ya="_transactions_container_smf2v_34",va="_transactions_table_smf2v_85",wa="_transactions_list_smf2v_92",Na="_transaction_row_head_smf2v_98",Ca="_table_body_smf2v_121",ka="_btn_add_smf2v_125",xa="_icon_plus_smf2v_140",Sa="_empty_transactions_smf2v_146",k={transactions_section:fa,transactions_container:ya,transactions_table:va,transactions_list:wa,transaction_row_head:Na,table_body:Ca,btn_add:ka,icon_plus:xa,empty_transactions:Sa},Ta=()=>{const{isOpen:n,toggle:t}=je(),[a,s]=i.useState(""),r=y(Sn),c=y(Pe),{isBigScreenOrTablet:_,isMobile:p}=pe();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const l=(d,N,u)=>{t(),s({content:d,id:N,name:u}),n&&document.body.classList.add("modal-open")},g=()=>{t(),s(null)};return e.createElement("section",{className:k.transactions_section},e.createElement("div",{className:k.transactions_container},p&&e.createElement("ul",{className:k.transactions_list},r.length>0?r.map(d=>e.createElement(ke,{handleEditItem:l,key:d.id,transaction:d})):e.createElement("div",{className:k.empty_transactions},"No transactions")),_&&e.createElement(e.Fragment,null,r.length>0?e.createElement("table",{className:k.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:k.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:k.table_body},r.map(d=>e.createElement(ke,{handleEditItem:l,key:d.id,transaction:d})))):e.createElement(e.Fragment,null,e.createElement("table",{className:k.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:k.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:k.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>g(),className:k.btn_add}," ",e.createElement("svg",{className:k.icon_plus},e.createElement("use",{xlinkHref:`${j}#icon-plus`})))),n&&e.createElement(Me,{closeModal:t},a?e.createElement(ta,{editContent:a,categories:c,toggle:t}):e.createElement(aa,{categories:c,toggle:t})))},Ae=S("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await Se.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),Ia={usdRate:null,eurRate:null,lastFetchTime:null},Oe=de({name:"currency",initialState:Ia,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(Ae.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),La=Oe.reducer,{selectUsdRate:Da,selectEurRate:Ra,selectLastFetchTime:$a}=Oe.selectors,Ma="_wrapper_1ympg_14",ja="_title_1ympg_55",Ba="_row_1ympg_85",Wa="_titleItem_1ympg_103",Pa="_rowItem_1ympg_112",Fa="_vector_1ympg_120",Aa="_image_1ympg_125",Oa="_secondimage_1ympg_148",qa="_smallnumeur_1ympg_164",za="_smallnumusd_1ympg_174",h={wrapper:Ma,title:ja,row:Ba,titleItem:Wa,rowItem:Pa,vector:Fa,image:Aa,secondimage:Oa,smallnumeur:qa,smallnumusd:za};function qe(){const n=I(),t=y(Da),a=y(Ra),s=y($a),{isDesktopOrLaptop:r,isBigScreen:c,isTabletOrMobile:_,isRetina:p}=pe();let l="",g="";return p?c?(l="../../img/images/currency_desk@2x.webp",g="../../img/images/line_desc_2x.webp"):_?(l="../../img/images/currency_tablet@2x.webp",g="../../img/images/line_desc_tab_2x.webp"):(l="../../img/images/currency_mobile@2x.webp",g="../../img/images/line_desc_mob_2x.webp"):c?(l="../../img/images/currency_desk.webp",g="../../img/images/line_desc_1x.webp"):_?(l="../../img/images/currency_tablet.webp",g="../../img/images/line_desc_tab_1x.webp"):(l="../../img/images/currency_mobile.webp",g="../../img/images/line_desc_mob_1x.webp"),i.useEffect(()=>{(new Date().getTime()-s)/(1e3*60*60)>1&&n(Ae())},[n,s]),e.createElement("div",{className:h.wrapper},e.createElement("div",{className:h.secondwrapper},e.createElement("ul",{className:h.title},e.createElement("li",{className:h.titleItem},"Currency"),e.createElement("li",{className:h.titleItem},"Purchase"),e.createElement("li",{className:h.titleItem},"Sale")),t&&e.createElement("ul",{className:h.row},e.createElement("li",{className:h.rowItem},"USD"),e.createElement("li",{className:h.rowItem},t.rateBuy),e.createElement("li",{className:h.rowItem},t.rateSell)),a&&e.createElement("ul",{className:h.row},e.createElement("li",{className:h.rowItem},"EUR"),e.createElement("li",{className:h.rowItem},a.rateBuy),e.createElement("li",{className:h.rowItem},a.rateSell)),c&&e.createElement(e.Fragment,null,e.createElement("p",{className:h.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:h.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:h.image,src:l,alt:"Currency rate"}),e.createElement("img",{className:h.secondimage,src:g,alt:"Currency rate"})))}const Ha=()=>{const n=Be().windowWidth,t=I();return i.useEffect(()=>{t(G())},[t]),e.createElement(e.Fragment,null,n>=768&&e.createElement(qe,null),e.createElement(Ta,null))},Ya="_loaderWrapper_1hccn_1",Va="_loader_1hccn_1",Ua="_spinner_1hccn_1",Ga="_loaderName_1hccn_34",ie={loaderWrapper:Ya,loader:Va,spinner:Ua,loaderName:Ga},xe=()=>e.createElement("div",{className:ie.loaderWrapper},e.createElement("div",{className:ie.loader},e.createElement("span",{className:ie.loaderName}))),Qa="_selectContainers_1uewu_1",Xa="_select_1uewu_1",Ja="_option_1uewu_17",z={selectContainers:Qa,select:Xa,option:Ja},Ka=({onMonthChange:n,onYearChange:t})=>{const a=new Date,s=a.getFullYear(),[r,c]=i.useState(a.getMonth()+1),[_,p]=i.useState(s),l=u=>{c(parseInt(u.target.value)),n(parseInt(u.target.value))},g=u=>{p(parseInt(u.target.value)),t(parseInt(u.target.value))},d=Array.from({length:s-2019},(u,E)=>s-E).reverse(),N=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.createElement("div",{className:z.selectContainers},e.createElement("select",{className:z.select,value:r,onChange:l},N.map((u,E)=>e.createElement("option",{className:z.option,key:E+1,value:E+1},u))),e.createElement("select",{className:z.select,value:_,onChange:g},d.map(u=>e.createElement("option",{className:z.option,key:u,value:u},u))))},Za="_statisticsContainer_12lnp_1",es="_chartContainer_12lnp_27",ts="_title_12lnp_31",ns="_tableContainer_12lnp_36",as="_contentContainer_12lnp_59",P={statisticsContainer:Za,chartContainer:es,title:ts,tableContainer:ns,contentContainer:as},ss="_tableContainer_g4cyy_1",rs="_table_g4cyy_1",cs="_tableHeader_g4cyy_12",os="_tableCell_g4cyy_25",ls="_tableRow_g4cyy_33",is="_paragraphContainer_g4cyy_37",ms="_paragraph_g4cyy_37",C={tableContainer:ss,table:rs,tableHeader:cs,tableCell:os,tableRow:ls,paragraphContainer:is,paragraph:ms},ds=({transactionsSummary:n,colors:t,incomeSummary:a,expenseSummary:s})=>e.createElement("div",{className:C.tableContainer},e.createElement("table",{className:C.table},e.createElement("thead",{className:C.tableHeader},e.createElement("tr",null,e.createElement("th",{className:C.tableCell}),e.createElement("th",{className:C.tableCell},"Category"),e.createElement("th",{className:C.tableCell},"Sum"))),e.createElement("tbody",null,n.map((r,c)=>e.createElement("tr",{key:c,className:C.tableRow},e.createElement("td",{className:C.tableCell,style:{backgroundColor:t[r.name]}}),e.createElement("td",{className:C.tableCell},r.name),e.createElement("td",{className:C.tableCell},r.total))))),e.createElement("div",{className:C.paragraphContainer},e.createElement("p",{className:C.paragraph},"Income: ",a),e.createElement("p",{className:C.paragraph},"Expenses: ",s))),us="_chartWrapper_9z5tw_1",_s="_periodText_9z5tw_5",me={chartWrapper:us,periodText:_s},gs=({transactions:n,colors:t,period:a})=>{if(!n||!t)return e.createElement("div",null,"No data available");const s=a.toFixed(2),r={datasets:[{data:n==null?void 0:n.map(c=>c.total),backgroundColor:n==null?void 0:n.map(c=>t[c.name]),hoverBackgroundColor:n==null?void 0:n.map(c=>t[c.name]),cutout:95}]};return e.createElement("div",{className:me.chartContainer},e.createElement("div",{className:me.chartWrapper},e.createElement(et,{data:r}),e.createElement("p",{className:me.periodText}," ₴ ",s)))},ps=()=>{const n=I(),t=y(Tn),a=y(Ln),s=y(In),r=y(Dn),[c,_]=i.useState(new Date().getMonth()+1),[p,l]=i.useState(new Date().getFullYear()),[g,d]=i.useState({});i.useEffect(()=>{n(Z({month:c,year:p}))},[c,p,n]);const N=()=>{const w={};t==null||t.forEach(({name:D,index:A})=>{w[D]=`#${Math.floor(Math.random()*16777215).toString(16)}`}),d(w)};i.useEffect(()=>{N()},[t]);const u=w=>{_(w)},E=w=>{l(w)};return e.createElement("section",{className:P.statisticsContainer},e.createElement("div",{className:P.titleContainer},e.createElement("h2",{className:P.title},"Statistics")),e.createElement("div",{className:P.contentContainer},e.createElement("div",{className:P.chartContainer},e.createElement(gs,{transactions:t,period:r,colors:g})),e.createElement("div",{className:P.tableContainer},e.createElement(Ka,{onMonthChange:u,onYearChange:E}),e.createElement(ds,{transactionsSummary:t,colors:g,incomeSummary:a,expenseSummary:s}))))};function Es(){const n=y(ne),t=y(bt),a=I();return i.useEffect(()=>{a(U()),a(K())},[a]),t?e.createElement(xe,null):e.createElement(e.Fragment,null,e.createElement(i.Suspense,{fallback:e.createElement(xe,null)},e.createElement(tt,null,e.createElement(R,{index:!0,element:e.createElement(fe,{component:wn,redirectTo:"/home"})}),e.createElement(R,{path:"register",element:e.createElement(fe,{component:Cn,redirectTo:"/home"})}),e.createElement(R,{path:"/",element:e.createElement(zt,null)},e.createElement(R,{path:"/home",element:e.createElement(ce,{component:Ha,redirectTo:"/"})}),e.createElement(R,{path:"/statistics",element:e.createElement(ce,{component:ps,redirectTo:"/"})}),e.createElement(R,{path:"/currency",element:e.createElement(ce,{component:qe,redirectTo:"/"})})),e.createElement(R,{path:"*",element:n?e.createElement(ee,{to:"/home"}):e.createElement(ee,{to:"/"})}))))}const hs={key:"auth",version:1,storage:Re,whitelist:["token"]},bs={key:"root",storage:Re},ze=nt({reducer:{auth:be(hs,Et),transactions:xn,currency:be(bs,La)},middleware:n=>n({serializableCheck:{ignoredActions:[at,st,rt,ct,ot,lt]}}),devTools:!1}),fs=it(ze);mt.createRoot(document.getElementById("root")).render(e.createElement(dt,null,e.createElement(ut,{store:ze},e.createElement(_t,{loading:null,persistor:fs},e.createElement(Es,null),e.createElement(gt,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
