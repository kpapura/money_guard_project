import{R as n,r as i,a as U,c as u,b as W,i as _,u as p,O as M,N as C,d as f,e as H,f as G,g as h,h as J,p as z,F as K,j as X,P as Z,k as ee,l as te,m as re,n as ne,o as q,q as ae,B as se,s as ce,t as oe,Q as ie}from"./assets/vendor-b754cceb.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(c){if(c.ep)return;c.ep=!0;const a=t(c);fetch(c.href,a)}})();const le="modulepreload",ue=function(r){return"/money_guard_project/"+r},F={},d=function(e,t,s){if(!t||t.length===0)return e();const c=document.getElementsByTagName("link");return Promise.all(t.map(a=>{if(a=ue(a),a in F)return;F[a]=!0;const o=a.endsWith(".css"),E=o?'[rel="stylesheet"]':"";if(!!s)for(let y=c.length-1;y>=0;y--){const R=c[y];if(R.href===a&&(!o||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${E}`))return;const m=document.createElement("link");if(m.rel=o?"stylesheet":le,o||(m.as="script",m.crossOrigin=""),m.href=a,document.head.appendChild(m),o)return new Promise((y,R)=>{m.addEventListener("load",y),m.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},de="_loaderWrapper_1hccn_1",me="_loader_1hccn_1",he="_spinner_1hccn_1",ge="_loaderName_1hccn_34",b={loaderWrapper:de,loader:me,spinner:he,loaderName:ge},L=()=>n.createElement("div",{className:b.loaderWrapper},n.createElement("div",{className:b.loader},n.createElement("span",{className:b.loaderName}))),fe=()=>{const[r,e]=i.useState(window.innerWidth),t=()=>{e(window.innerWidth)};return i.useEffect(()=>(window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}),[]),{windowWidth:r}},l=U.create({baseURL:"https://wallet.b.goit.study/api/"}),N=r=>{l.defaults.headers.common.Authorization=`Bearer ${r}`},pe=()=>{l.defaults.headers.common.Authorization=""},I=u("register",async(r,e)=>{try{const{data:t}=await l.post("auth/sign-up",r);return N(t.token),t}catch(t){return e.rejectWithValue(t.response.data.message)}}),P=u("login",async(r,e)=>{try{const{data:t}=await l.post("auth/sign-in",r);return N(t.token),t}catch(t){return console.log(t),e.rejectWithValue(t.response.data.message)}}),Ee=u("logout",async(r,e)=>{try{const{data:t}=await l.delete("auth/sign-out");return pe(),t}catch(t){return e.rejectWithValue(t.message)}}),T=u("refresh",async(r,e)=>{const t=e.getState().auth.token;if(!t)return e.rejectWithValue("Token is not exist!");try{N(t);const{data:s}=await l.get("users/current");return console.log(s),s}catch(s){return e.rejectWithValue(s.message)}}),ye=u("getBalance",async(r,e)=>{try{const{data:t}=await l.get("users/current");return t}catch(t){return e.rejectWithValue(t.message)}}),x=u("fetchTransactionsData",async(r,e)=>{try{const{data:t}=await l.get("transactions");return t}catch(t){return e.rejectWithValue(t.message)}}),v=u("deleteTransaction",async(r,e)=>{try{return await l.delete(`transactions/${r.id}`),r}catch(t){return e.rejectWithValue(t.message)}}),w=u("addTransaction",async(r,e)=>{try{const{data:t}=await l.post("transactions",r);return t}catch(t){return e.rejectWithValue(t.message)}}),O=u("editTransaction",async(r,e)=>{try{const{data:t}=await l.patch(`/transactions/${r.id}`,r.content);return e.dispatch(T()),t}catch(t){return e.rejectWithValue(t.message)}}),S=u("fetchTransactionCategories",async(r,e)=>{try{const{data:t}=await l.get("transaction-categories");return t}catch(t){return e.rejectWithValue(t.message)}}),j=u("fetchTransactionSummaryController",async(r,e)=>{try{const{data:t}=await l.get(`transactions-summary?month=${r.month}&year=${r.year}`);return t}catch(t){return e.rejectWithValue(t.message)}}),A={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},B=W({name:"auth",initialState:A,selectors:{selectUser:r=>r.user,selectIsLoggedIn:r=>r.isLoggedIn,selectToken:r=>r.isLoggedIn,selectIsRefresh:r=>r.isRefresh,selectBalance:r=>r.balance,selectIsLoading:r=>r.loading},reducers:{logout:r=>A},extraReducers:r=>{r.addCase(ye.fulfilled,(e,{payload:t})=>{e.balance=t.balance}).addCase(w.fulfilled,(e,{payload:t})=>{e.balance=e.balance+t.amount}).addCase(v.fulfilled,(e,{payload:t})=>{e.balance=e.balance-t.amount}).addCase(Ee.fulfilled,e=>A).addCase(T.fulfilled,(e,{payload:t})=>{e.user.username=t.username,e.user.email=t.email,e.balance=t.balance,e.isLoggedIn=!0,e.loading=!1,e.isRefresh=!1,e.loading=!1}).addMatcher(_(I.fulfilled,P.fulfilled),(e,{payload:t})=>{e.user.username=t.user.username,e.user.email=t.user.email,e.user.password=t.user.password,e.token=t.token,e.loading=!1,e.isLoggedIn=!0,e.loading=!1,e.isRefresh=!1}).addMatcher(_(I.pending,P.pending,T.pending),e=>{e.loading=!0,e.error=null,e.isRefresh=!0}).addMatcher(_(I.rejected,P.rejected,T.rejected),(e,{payload:t})=>{e.error=t,e.loading=!1,e.isRefresh=!1})}}),_e=B.reducer,{selectIsLoggedIn:k,selectUser:Xe,selectToken:Ze,selectIsRefresh:Te,selectBalance:et,selectIsLoading:Re}=B.selectors,{logout:tt}=B.actions,ve="_walletContainer_11tdi_1",we="_mainContainer_11tdi_9",Se="_commonInfo_11tdi_43",Ce="_wrap_11tdi_77",Le="_navBar_11tdi_83",ke="_transactions_section_11tdi_93",be="_backgroundContainer_home_11tdi_95",Ie="_backgroundContainer_statistic_11tdi_101",g={walletContainer:ve,mainContainer:we,commonInfo:Se,wrap:Ce,navBar:Le,transactions_section:ke,backgroundContainer_home:be,backgroundContainer_statistic:Ie},Pe=i.lazy(()=>d(()=>import("./assets/Header-9b88377e.js"),["assets/Header-9b88377e.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/useModal-b49a64ae.js","assets/useModal-cdc6fbd3.css","assets/sprite-aa48e9ee.js","assets/Header-c2f0be54.css"])),xe=i.lazy(()=>d(()=>import("./assets/Balance-fb29aa53.js"),["assets/Balance-fb29aa53.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/Balance-d53bc08f.css"])),Oe=i.lazy(()=>d(()=>import("./assets/CurrenceRate-d448e32b.js"),["assets/CurrenceRate-d448e32b.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/CurrenceRate-3463612c.css"])),je=i.lazy(()=>d(()=>import("./assets/NavBar-4e475b4a.js"),["assets/NavBar-4e475b4a.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/sprite-aa48e9ee.js","assets/NavBar-2b2c0fdf.css"])),Ae=()=>{const r=p(Re),e=p(k),t=fe().windowWidth;return e?n.createElement(n.Fragment,null,r&&n.createElement(L,null),n.createElement(Pe,null),n.createElement("div",{className:g.walletContainer},n.createElement("div",{className:g.backgroundContainer_home},n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null)),n.createElement("div",{className:g.backgroundContainer_statistic},n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null)),n.createElement("div",{className:g.mainContainer},n.createElement("div",{className:g.commonInfo},n.createElement("div",{className:g.wrap},n.createElement(je,{className:g.navBar}),t>=768&&n.createElement(xe,null)),t>=768&&n.createElement(Oe,null)),n.createElement(i.Suspense,{fallback:n.createElement(L,null)},n.createElement(M,null))))):n.createElement(n.Fragment,null,n.createElement(M,null))},D=({component:r,redirectTo:e="/"})=>p(k)?n.createElement(r,null):n.createElement(C,{to:e}),$=({component:r,redirectTo:e="/"})=>p(k)?n.createElement(C,{to:e}):n.createElement(r,null),De=()=>{const r=f.useMediaQuery({query:"(min-width: 768px)"}),e=f.useMediaQuery({query:"(min-width: 1280px)"}),t=f.useMediaQuery({query:"(max-width: 768px)"}),s=f.useMediaQuery({query:"(max-width: 767px)"}),c=f.useMediaQuery({query:"(orientation: portrait)"}),a=f.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:r,isBigScreen:e,isMobile:s,isTabletOrMobile:t,isPortrait:c,isRetina:a}},We=i.lazy(()=>d(()=>import("./assets/Login-90740054.js"),["assets/Login-90740054.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/LoginRegisterForm-35a8183d.js","assets/sprite-aa48e9ee.js","assets/LoginRegisterForm-de6a7131.css"])),Ne=i.lazy(()=>d(()=>import("./assets/Register-c40d4951.js"),["assets/Register-c40d4951.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/LoginRegisterForm-35a8183d.js","assets/sprite-aa48e9ee.js","assets/LoginRegisterForm-de6a7131.css","assets/Register-187887cf.css"])),Be=i.lazy(()=>d(()=>import("./assets/HomeTab-2f055bf2.js"),["assets/HomeTab-2f055bf2.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/useModal-b49a64ae.js","assets/useModal-cdc6fbd3.css","assets/sprite-aa48e9ee.js","assets/Balance-fb29aa53.js","assets/Balance-d53bc08f.css","assets/HomeTab-a8033131.css"])),Ve=i.lazy(()=>d(()=>import("./assets/CurrenceRate-d448e32b.js"),["assets/CurrenceRate-d448e32b.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/CurrenceRate-3463612c.css"])),Me=i.lazy(()=>d(()=>import("./assets/StatisticsTab-49746348.js"),["assets/StatisticsTab-49746348.js","assets/vendor-b754cceb.js","assets/vendor-b478ab71.css","assets/StatisticsTab-a4172ec8.css"]));function ze(){const r=p(k),e=p(Te),{isDesktopOrLaptop:t,isBigScreen:s,isTabletOrMobile:c,isRetina:a,isMobile:o}=De(),E=H();return i.useEffect(()=>{E(T()),E(S())},[E]),e?n.createElement(L,null):n.createElement(n.Fragment,null,n.createElement(i.Suspense,{fallback:n.createElement(L,null)},n.createElement(G,null,n.createElement(h,{index:!0,element:n.createElement($,{component:We,redirectTo:"/home"})}),n.createElement(h,{path:"register",element:n.createElement($,{component:Ne,redirectTo:"/home"})}),n.createElement(h,{path:"/",element:n.createElement(Ae,null)},n.createElement(h,{path:"/home",element:n.createElement(D,{component:Be,redirectTo:"/"})}),n.createElement(h,{path:"/statistics",element:n.createElement(D,{component:Me,redirectTo:"/"})}),o&&n.createElement(h,{path:"/currency",element:n.createElement(D,{component:Ve,redirectTo:"/"})})),n.createElement(h,{path:"*",element:r?n.createElement(C,{to:"/home"}):n.createElement(C,{to:"/"})}))))}const Fe={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},V=W({name:"transactions",initialState:Fe,selectors:{selectTransactions:r=>r.transactionsList,selectIsLoading:r=>r.loading,selectIsError:r=>r.error,selectTransactionCategories:r=>r.transactionCategories,selectMonth:r=>r.month,selectYear:r=>r.year,selectCategoriesSummary:r=>r.categoriesSummary,selectExpenseSummary:r=>r.expenseSummary,selectIncomeSummary:r=>r.incomeSummary,selectPeriodTotal:r=>r.periodTotal},reducers:{selectedYear:(r,{payload:e})=>{r.year=e},selectedMonth:(r,{payload:e})=>{r.month=e}},extraReducers:r=>{r.addCase(x.fulfilled,(e,{payload:t})=>{e.transactionsList=t,e.loading=!1}).addCase(v.fulfilled,(e,{payload:t})=>{e.transactionsList=e.transactionsList.filter(s=>s.id!==t.id),e.loading=!1}).addCase(w.fulfilled,(e,{payload:t})=>{e.transactionsList.push(t),e.loading=!1}).addCase(O.fulfilled,(e,{payload:t})=>{const s=e.transactionsList.findIndex(c=>c.id===t.id);e.transactionsList.splice(s,1,t),e.loading=!1}).addCase(S.fulfilled,(e,{payload:t})=>{e.transactionCategories=t,e.loading=!1}).addCase(j.fulfilled,(e,{payload:t})=>{e.categoriesSummary=t.categoriesSummary,e.expenseSummary=t.expenseSummary,e.incomeSummary=t.incomeSummary,e.periodTotal=t.periodTotal,e.loading=!1}).addMatcher(_(x.pending,v.pending,w.pending,O.pending,S.pending,j.pending),(e,{payload:t})=>{e.loading=!0,e.error=null}).addMatcher(_(x.rejected,v.rejected,w.rejected,O.rejected,S.rejected,j.rejected),(e,{payload:t})=>{e.error=t,e.loading=!1})}}),$e=V.reducer;V.actions;const{selectTransactions:rt,selectIsLoading:nt,selectIsError:at,selectTransactionCategories:st,selectYear:ct,selectMonth:ot,selectCategoriesSummary:it,selectExpenseSummary:lt,selectIncomeSummary:ut,selectPeriodTotal:dt}=V.selectors,Ue=u("currency/fetchCurrencyRate",async()=>{const r=localStorage.getItem("currencyRate"),e=localStorage.getItem("lastFetchTime");if(r&&e&&(new Date().getTime()-e)/(1e3*60*60)<1)return JSON.parse(r);try{const t=await U.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(t.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),t.data}catch(t){console.error("Помилка при виконанні запиту до Monobank:",t)}}),qe={usdRate:null,eurRate:null,lastFetchTime:null},Q=W({name:"currency",initialState:qe,selectors:{selectUsdRate:r=>r.usdRate,selectEurRate:r=>r.eurRate,selectLastFetchTime:r=>r.lastFetchTime},extraReducers:r=>{r.addCase(Ue.fulfilled,(e,{payload:t})=>{e.usdRate=t.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),e.eurRate=t.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),e.lastFetchTime=new Date().getTime().toString()})}}),Qe=Q.reducer,{selectUsdRate:mt,selectEurRate:ht,selectLastFetchTime:gt}=Q.selectors,Ye={key:"auth",version:1,storage:q,whitelist:["token"]},He={key:"root",storage:q},Y=J({reducer:{auth:z(Ye,_e),transactions:$e,currency:z(He,Qe)},middleware:r=>r({serializableCheck:{ignoredActions:[K,X,Z,ee,te,re]}}),devTools:!1}),Ge=ne(Y);ae.createRoot(document.getElementById("root")).render(n.createElement(se,null,n.createElement(ce,{store:Y},n.createElement(oe,{loading:null,persistor:Ge},n.createElement(ze,null),n.createElement(ie,{autoClose:1500})))));export{w as a,rt as b,fe as c,v as d,O as e,x as f,mt as g,ht as h,gt as i,Ue as j,it as k,P as l,ut as m,lt as n,dt as o,ot as p,ct as q,I as r,st as s,j as t,De as u,Ee as v,tt as w,Xe as x,et as y};
//# sourceMappingURL=commonHelpers.js.map
