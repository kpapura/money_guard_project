import{R as c,a as I,c as i,b as k,i as l,p as w,d as V,e as W,f as P,F as A,g as O,P as b,h as v,j as M,k as _,l as x,m as U,n as F}from"./assets/vendor-0861a3e9.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();function $(){return c.createElement(c.Fragment,null,c.createElement("h1",null,"HELLO"))}const n=I.create({baseURL:"https://wallet.b.goit.study/api/"}),R=r=>{n.defaults.headers.common.Authorization=`Bearer ${r}`},z=()=>{n.defaults.headers.common.Authorization=""},u=i("register",async(r,e)=>{try{const{data:t}=await n.post("auth/sign-up",r);return R(t.token),console.log(t),t}catch(t){return e.rejectWithValue(t.message)}}),f=i("login",async(r,e)=>{try{const{data:t}=await n.post("auth/sign-in",r);return R(t.token),console.log(t),t}catch(t){return e.rejectWithValue(t.message)}}),D=i("logout",async(r,e)=>{try{const{data:t}=await n.delete("auth/sign-out");return console.log(t),z(),t}catch(t){return e.rejectWithValue(t.message)}}),g=i("refresh",async(r,e)=>{const t=e.getState().auth.token;if(!t)return e.rejectWithValue("Token is not exist!");try{R(t);const{data:o}=await n.get("users/current");return o}catch(o){return e.rejectWithValue(o.message)}}),j={user:{name:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1},S=k({name:"auth",initialState:j,selectors:{selectUser:r=>r.user,selectIsLoggedIn:r=>r.isLoggedIn,selectToken:r=>r.isLoggedIn,selectIsRefresh:r=>r.isRefresh},extraReducers:r=>{r.addCase(D.fulfilled,e=>j).addCase(g.fulfilled,(e,{payload:t})=>{e.user.name=t.name,e.user.email=t.email,e.isLoggedIn=!0,e.isRefresh=!1}).addMatcher(l(u.fulfilled,f.fulfilled),(e,{payload:t})=>{e.user.name=t.user.name,e.user.email=t.user.email,e.token=t.token,e.isLoggedIn=!0}).addMatcher(l(u.pending,f.pending,g.pending),e=>{e.loading=!0,e.error=null,e.isRefresh=!0}).addMatcher(l(u.rejected,f.rejected,g.rejected),(e,{payload:t})=>{e.error=t,e.loading=!1,e.isRefresh=!1})}}),G=S.reducer;S.selectors;const h=i("fetchTransactionsData",async(r,e)=>{try{const{data:t}=await n.get("transactions");return t}catch(t){return e.rejectWithValue(t.message)}}),m=i("deleteTransaction",async(r,e)=>{try{const{data:t}=await n.delete(`transactions/${r}`);return t.id}catch(t){return e.rejectWithValue(t.message)}}),p=i("addTransaction",async(r,e)=>{try{const{data:t}=await n.post("transactions",r);return t}catch(t){return e.rejectWithValue(t.message)}}),y=i("editTransaction",async(r,e)=>{try{const{data:t}=await n.patch(`/transactions/${r.id}`,r);return t}catch(t){return e.rejectWithValue(t.message)}}),T=i("fetchTransactionCategories",async(r,e)=>{try{const{data:t}=await n.get("transaction-categories");return t}catch(t){return e.rejectWithValue(t.message)}}),L=i("fetchTransactionSummaryController",async(r,e)=>{try{const{data:t}=await n.get("transactions-summary");return t}catch(t){return e.rejectWithValue(t.message)}}),H={transactionsList:[],transactionCategories:[],transactionSummaryController:null,loading:!1,error:!1},C=k({name:"transactions",initialState:H,selectors:{selectTransactions:r=>r.transactionsList,selectIsLoading:r=>r.loading,selectIsError:r=>r.error},extraReducers:r=>{r.addCase(h.fulfilled,(e,{payload:t})=>{e.transactionsList=t,e.loading=!1}).addCase(m.fulfilled,(e,{payload:t})=>{e.transactionsList=e.transactionsList.filter(o=>o.id!==t),e.loading=!1}).addCase(p.fulfilled,(e,{payload:t})=>{e.transactionsList.push(t),e.loading=!1}).addCase(y.fulfilled,(e,{payload:t})=>{const o=e.transactionsList.findIndex(a=>a.id===t.id);e.transactionsList.splice(o,1,t),e.loading=!1}).addCase(T.fulfilled,(e,{payload:t})=>{e.transactionCategories=t,e.loading=!1}).addCase(L.fulfilled,(e,{payload:t})=>{e.transactionSummaryController=t,e.loading=!1}).addMatcher(l(h.pending,m.pending,p.pending,y.pending,T.pending,L.pending),(e,{payload:t})=>{e.loading=!0,e.error=null}).addMatcher(l(h.rejected,m.rejected,p.rejected,y.rejected,T.rejected,L.rejected),(e,{payload:t})=>{e.error=t,e.loading=!1})}}),N=C.reducer;C.selectors;const B={key:"auth",version:1,storage:P,whitelist:["token"]},q=w(B,G),E=V({reducer:{auth:q,transactions:N},middleware:r=>r({serializableCheck:{ignoredActions:[A,O,b,v,M,_]}}),devTools:!1}),K=W(E);x.createRoot(document.getElementById("root")).render(c.createElement(c.StrictMode,null,c.createElement(U,{store:E},c.createElement(F,{loading:null,persistor:K},c.createElement($,null)))));
//# sourceMappingURL=commonHelpers.js.map
