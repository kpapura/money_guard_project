import{a as Ne,c as x,b as ce,i as W,u as f,R as e,N as Q,d as oe,e as I,r as d,f as Pe,g as P,O as ue,_ as Ae,P as Oe,h as Fe,j as ve,o as qe,k as Ce,l as B,B as $,m as Ye,n as j,S as Ve,D as He,p as Ue,q as T,s as Ge,t as _e,F as Qe,v as Xe,w as Je,x as Ke,y as Ze,z as et,A as tt,C as xe,E as nt,G as at,H as st,I as rt,Q as ct}from"./assets/vendor-fb843ec4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const N=Ne.create({baseURL:"https://wallet.b.goit.study/api/"}),le=n=>{N.defaults.headers.common.Authorization=`Bearer ${n}`},ot=()=>{N.defaults.headers.common.Authorization=""},O=x("register",async(n,t)=>{try{const{data:a}=await N.post("auth/sign-up",n);return le(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),F=x("login",async(n,t)=>{try{const{data:a}=await N.post("auth/sign-in",n);return le(a.token),a}catch(a){return console.log(a),t.rejectWithValue(a.response.data.message)}}),Se=x("logout",async(n,t)=>{try{const{data:a}=await N.delete("auth/sign-out");return ot(),a}catch(a){return t.rejectWithValue(a.message)}}),ee=x("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{le(a);const{data:s}=await N.get("users/current");return console.log(s),s}catch(s){return t.rejectWithValue(s.message)}}),te={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},ie=ce({name:"auth",initialState:te,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>te},extraReducers:n=>{n.addCase(Se.fulfilled,t=>te).addCase(ee.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(W(O.fulfilled,F.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(W(O.pending,F.pending,ee.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(W(O.rejected,F.rejected,ee.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),lt=ie.reducer,{selectIsLoggedIn:X,selectUser:it,selectToken:es,selectIsRefresh:mt,selectBalance:ts,selectIsLoading:ns}=ie.selectors,{logout:dt}=ie.actions,ne=({component:n,redirectTo:t="/"})=>f(X)?e.createElement(n,null):e.createElement(Q,{to:t}),ge=({component:n,redirectTo:t="/"})=>f(X)?e.createElement(Q,{to:t}):e.createElement(n,null),ut="_wrap_1nzyu_1",_t="_logo_1nzyu_5",gt="_text_1nzyu_14",ae={wrap:ut,logo:_t,text:gt},pt=({closeModal:n})=>{const t=oe(),a=I(),s=()=>{a(Se()),a(dt()),n(),t("/")};return e.createElement("div",{className:ae.wrap},e.createElement("a",{href:"",className:ae.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:ae.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},Et="_closeButton_11uif_2",ht="_modalContent_11uif_13",bt="_modalWrapper_11uif_33",se={closeButton:Et,modalContent:ht,modalWrapper:bt},ft=document.querySelector("#modal"),Ie=({closeModal:n,children:t})=>{const a=d.useCallback(r=>{r.key==="Escape"&&n()},[n]);d.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=r=>{r.target===r.currentTarget&&n()};return Pe.createPortal(e.createElement("div",{onClick:s,className:se.modalWrapper},e.createElement("div",{className:se.modalContent},e.createElement("button",{className:se.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),ft)},ke=()=>{const[n,t]=d.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(c=>!c)}},wt="_header_1snvw_1",yt="_hederContainer_1snvw_9",Nt="_logo_1snvw_17",vt="_wrap_1snvw_27",Ct="_user_1snvw_32",xt="_button_1snvw_38",St="_icon_1snvw_52",It="_heder_1snvw_9",R={header:wt,hederContainer:yt,logo:Nt,wrap:vt,user:Ct,button:xt,icon:St,heder:It},kt=()=>{const{isOpen:n,toggle:t}=ke(),a=f(it),s=a.email.indexOf("@"),r=a.email.slice(0,s);return e.createElement("header",{className:R.header},e.createElement("div",{className:R.hederContainer},e.createElement("a",{href:"",className:R.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("div",{className:R.wrap}," ",e.createElement("p",{className:R.user},r),e.createElement("button",{className:R.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:R.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement(Ie,{closeModal:t},e.createElement(pt,{closeModal:t}))))},Te=()=>{const[n,t]=d.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return d.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Tt=()=>{const n=Te().windowWidth;return e.createElement("div",null,e.createElement(P,{to:"home"},"Home"),e.createElement(P,{to:"statistics"},"Statistics"),n<768&&e.createElement(P,{to:"/currency"},"Currency"))},Rt=()=>f(X)?e.createElement(e.Fragment,null,e.createElement(kt,null),e.createElement(Tt,null),e.createElement(ue,null)):e.createElement(e.Fragment,null,e.createElement(ue,null)),Dt="_login_register_section_1c8bj_1",Lt="_register_login_section_1c8bj_2",jt="_background_container_login_1c8bj_13",Mt="_background_container_registration_1c8bj_14",Bt="_gradient_container_1c8bj_163",$t="_form_container_1c8bj_171",zt="_form_1c8bj_171",Wt="_submit_btn_1c8bj_210",Pt="_inactive_btn_1c8bj_230",At="_password_label_1c8bj_247",Ot="_password_input_1c8bj_256",Ft="_error_container_1c8bj_267",qt="_username_1c8bj_271",Yt="_email_1c8bj_277",Vt="_password_1c8bj_247",Ht="_cpassword_1c8bj_289",Ut="_eye_1c8bj_304",Gt="_name_label_1c8bj_308",Qt="_name_input_1c8bj_316",Xt="_name_user_icon_1c8bj_335",Jt="_icon_email_cont_1c8bj_339",Kt="_password_icon_1c8bj_343",Zt="_button_cont_1c8bj_347",en="_strengthBar_1c8bj_353",tn="_porgress_container_1c8bj_373",nn="_logo_wrapper_1c8bj_378",an="_background_img_container_login_1c8bj_551",sn="_background_img_container_registration_1c8bj_552",rn="_background_container_1c8bj_13",m={login_register_section:Dt,register_login_section:Lt,background_container_login:jt,background_container_registration:Mt,gradient_container:Bt,form_container:$t,form:zt,submit_btn:Wt,inactive_btn:Pt,password_label:At,password_input:Ot,error_container:Ft,username:qt,email:Yt,password:Vt,cpassword:Ht,eye:Ut,name_label:Gt,name_input:Qt,name_user_icon:Xt,icon_email_cont:Jt,password_icon:Kt,button_cont:Zt,strengthBar:en,porgress_container:tn,logo_wrapper:nn,background_img_container_login:an,background_img_container_registration:sn,background_container:rn},pe=({register:n,errors:t,name:a,placeholder:s,className:r})=>e.createElement(e.Fragment,null,e.createElement("div",{className:m.error_container},e.createElement("label",{className:m.name_label},a==="username"?e.createElement("div",{className:m.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:m.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:m.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:m[r]},t[a].message))),cn=({password:n})=>e.createElement("div",{className:m.porgress_container},e.createElement(Ae,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:m.strengthBar})),Ee=({register:n,errors:t,name:a,placeholder:s,getValues:r,formType:c,className:u})=>{const[_,l]=d.useState("password"),[p,g]=d.useState("");function v(o){g(o.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:m.error_container},e.createElement("label",{className:m.password_label},e.createElement("div",{className:m.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:o=>o===r("password")||"Passwords do not match"}),type:_,placeholder:s,onChange:v,className:m.password_input})," ",e.createElement("div",{className:m.eye,onClick:()=>{l(_==="password"?"text":"password")}},_==="password"?e.createElement(Oe,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Fe,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:m[u]},t[a].message)),a==="password"&&c!=="login"&&e.createElement(cn,{password:p}))},Re=({onDataSubmit:n,formType:t,schema:a})=>{const[s,r]=d.useState(0);d.useEffect(()=>{const g=()=>{r(window.innerWidth)};return window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}},[]);const{register:c,reset:u,handleSubmit:_,formState:{errors:l}}=ve({resolver:qe(a)}),p=g=>{const{passwordConfirmation:v,...o}=g;n(o),u()};return e.createElement(e.Fragment,null,e.createElement("section",{className:t==="login"?`${m.login_register_section}`:`${m.register_login_section}`},t==="login"?e.createElement(e.Fragment,null,e.createElement("div",{className:m.background_img_container_login},e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:m.background_container_login},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))):e.createElement(e.Fragment,null,e.createElement("div",{className:m.background_container_registration},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:m.background_img_container_registration},e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:m.form_container,style:{padding:s<768&&t==="login"?"98px 20px":s>768&&t==="login"?"80px 62px":"40px 62px"}},e.createElement("a",{href:"",className:m.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("form",{className:m.form,onSubmit:_(p)},t==="register"&&e.createElement(pe,{register:c,errors:l,name:"username",placeholder:"Name",className:"username"}),e.createElement(pe,{register:c,errors:l,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(Ee,{register:c,errors:l,name:"password",placeholder:"Password",onChange:g=>handleChange(g),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(Ee,{register:c,errors:l,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:m.button_cont},e.createElement("button",{className:m.submit_btn,type:"submit"},"log in"),e.createElement(P,{className:m.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:m.button_cont},e.createElement("button",{className:m.submit_btn,type:"submit"},"register"),e.createElement(P,{className:m.inactive_btn,to:"/login"},"log in"))," "))))},on=Ce({password:B().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:B().required().email("Email is not valid")}).required(),ln=()=>{const n=oe(),t=I(),a=r=>{t(F(r)).unwrap().then(()=>{n("/home")}).catch(c=>{console.log(c.message),$(c)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement("div",null,e.createElement(Re,{formType:"login",onDataSubmit:a,values:s,schema:on}))},mn=Ce({username:B().required(),password:B().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:B().required().email("Email is not valid"),passwordConfirmation:B().oneOf([Ye("password"),null],"Passwords must match")}).required(),dn="_registerWrapper_15m0u_1",un={registerWrapper:dn},_n=()=>{const n=I(),t=oe(),a=s=>{n(O(s)).unwrap().then(()=>{t("/home")}).catch(r=>{console.log(r),$(r)})};return e.createElement("div",{className:un.registerWrapper},e.createElement(Re,{onDataSubmit:a,formType:"register",schema:mn}))},q=x("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await N.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),Y=x("deleteTransaction",async(n,t)=>{try{return await N.delete(`transactions/${n}`),n}catch(a){return t.rejectWithValue(a.message)}}),V=x("addTransaction",async(n,t)=>{try{const{data:a}=await N.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),H=x("editTransaction",async(n,t)=>{try{const{data:a}=await N.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),U=x("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await N.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),G=x("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await N.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),me=()=>{const n=j.useMediaQuery({query:"(min-width: 768px)"}),t=j.useMediaQuery({query:"(min-width: 1280px)"}),a=j.useMediaQuery({query:"(max-width: 768px)"}),s=j.useMediaQuery({query:"(max-width: 767px)"}),r=j.useMediaQuery({query:"(orientation: portrait)"}),c=j.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:r,isRetina:c}},gn={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},de=ce({name:"transactions",initialState:gn,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(q.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(Y.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a),t.loading=!1}).addCase(V.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(H.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(r=>r.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(U.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(G.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(W(q.pending,Y.pending,V.pending,H.pending,U.pending,G.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(W(q.rejected,Y.rejected,V.rejected,H.rejected,U.rejected,G.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),pn=de.reducer;de.actions;const{selectTransactions:En,selectIsLoading:as,selectIsError:ss,selectTransactionCategories:De,selectYear:rs,selectMonth:cs,selectCategoriesSummary:hn,selectExpenseSummary:os,selectIncomeSummary:ls,selectPeriodTotal:is}=de.selectors,bn="_labelExpense_c530i_8",fn="_labelIncome_c530i_15",wn="_activeIncome_c530i_46",yn="_activeExpense_c530i_53",Nn="_slider_c530i_59",vn="_round_c530i_106",S={"transaction-switcher":"_transaction-switcher_c530i_2",switch:"_switch_c530i_22",labelExpense:bn,labelIncome:fn,activeIncome:wn,activeExpense:yn,slider:Nn,round:vn},Cn=({onChange:n})=>{const[t,a]=d.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:S["transaction-switcher"]},e.createElement("span",{className:t?S.activeIncome:S.labelIncome},"Income"),e.createElement("label",{className:`${S.switch} ${t?S.income:S.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${S.slider} ${S.round}`})),e.createElement("span",{className:t?S.labelExpense:S.activeExpense},"Expense"))},xn="_container_qwzc8_2",Sn="_formWrapper_qwzc8_13",In="_header_qwzc8_21",kn="_secondContainer_qwzc8_27",Tn="_category_qwzc8_30",Rn="_boxDate_qwzc8_43",Dn="_incomeInput_qwzc8_52",Ln="_customInput_qwzc8_53",jn="_svgBox_qwzc8_70",Mn="_comment_qwzc8_91",Bn="_selectExpense_qwzc8_92",$n="_btnBox_qwzc8_108",zn="_checkBox_qwzc8_147",b={container:xn,formWrapper:Sn,header:In,secondContainer:kn,category:Tn,boxDate:Rn,incomeInput:Dn,customInput:Ln,svgBox:jn,comment:Mn,selectExpense:Bn,btnBox:$n,checkBox:zn},he=n=>n<10?"0"+n:n,be=n=>{const t=n.getFullYear(),a=he(n.getMonth()+1),s=he(n.getDate());return`${t}-${a}-${s}`},fe=({name:n,register:t,errors:a,placeholder:s,className:r})=>e.createElement("div",{className:b.inputContainer},e.createElement("input",{className:r,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message));function Le({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:r}){const{register:c,handleSubmit:u,formState:{errors:_},setValue:l,reset:p}=ve(),[g,v]=d.useState(""),[o,w]=d.useState(""),[D,J]=d.useState(new Date);d.useEffect(()=>{w(n?n.type:"EXPENSE")},[n]),d.useEffect(()=>{l("amount",n&&n.amount)},[n,l]),d.useEffect(()=>{l("comment",n&&n.comment)},[n,l]);const k=d.useMemo(()=>t.map(({id:h,name:We})=>({value:h,label:We})),[t]),L=d.useMemo(()=>k.find(h=>(n==null?void 0:n.categoryId)===h.value),[n,k]),A=h=>{v(h)},K=h=>{s==="add"?(r({transactionDate:be(D),amount:+h.amount,comment:h.comment,type:o,categoryId:o==="EXPENSE"?g.value||k[0].value:"063f1132-ba5d-42b4-951d-44011ca46262"}),p()):(r({transactionDate:be(D),amount:+h.amount,comment:h.comment}),p()),p()},Z=h=>{w(h?"INCOME":"EXPENSE")};return e.createElement("div",{className:b.container},e.createElement("form",{className:b.formWrapper,onSubmit:u(K)},e.createElement("h1",{className:b.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(Cn,{onChange:Z}):e.createElement("div",null,e.createElement("ul",{className:b.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&o==="EXPENSE"||Z(!0)},className:n.type==="INCOME"||o==="INCOME"?b.activeIncome:"",disabled:s==="edit"&&o==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&o==="INCOME"||Z(!1)},className:o==="EXPENSE"?b.activeExpense:"",disabled:s==="edit"&&o==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:b.secondContainer},o==="EXPENSE"&&e.createElement("div",{className:b.category},e.createElement(Ve,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:k,placeholder:"Select category",defaultValue:L&&L,onChange:A,isDisabled:s==="edit"}),_.category&&e.createElement("span",null,_.category.message)),e.createElement("div",{className:b.boxDate},e.createElement(fe,{className:b.incomeInput,name:"amount",placeholder:"0.00",errors:_,register:c}),e.createElement("div",{className:b.svgBox},e.createElement(He,{className:b.customInput,selected:n?n.transactionDate:D,onChange:h=>{l("transactionDate",h),J(h)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-date"})),_.transactionDate&&e.createElement("span",null,_.transactionDate.message))),e.createElement(fe,{className:b.comment,name:"comment",placeholder:"Comment",errors:_,register:c}),e.createElement("div",{className:b.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}function Wn({categories:n,editContent:t,toggle:a}){const s=I(),r=c=>{s(H({content:{...c},id:t.id})).unwrap().then(u=>{$.success("Changed!"),a()}).catch(u=>{$.error("Credentials is not valid!")})};return e.createElement(Le,{toggle:a,content:t.content,categories:n,onDataSubmit:r,typeForm:"edit"})}function Pn({categories:n,toggle:t}){const a=I(),s=r=>{a(V(r)).unwrap().then(()=>{$.success("Transaction was successfully added"),t()}).catch(c=>{$.error("Credentials is not valid!")})};return e.createElement(Le,{categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const je="/money_guard_project/assets/sprite-d3dedbbb.svg",An="_transaction_item_1bzo6_1",On="_income_border_1bzo6_6",Fn="_expense_border_1bzo6_10",qn="_income_text_1bzo6_14",Yn="_expense_text_1bzo6_19",Vn="_transactions_table_mobile_1bzo6_24",Hn="_transaction_colum_1bzo6_30",Un="_transaction_first_column_1bzo6_34",Gn="_transaction_row_mobile_1bzo6_38",Qn="_transaction_row_1bzo6_38",Xn="_table_body_1bzo6_57",Jn="_btn_delete_1bzo6_61",Kn="_btn_edit_1bzo6_76",Zn="_btn_wrapper_1bzo6_86",ea="_icon_edit_1bzo6_93",i={transaction_item:An,income_border:On,expense_border:Fn,income_text:qn,expense_text:Yn,transactions_table_mobile:Vn,transaction_colum:Hn,transaction_first_column:Un,transaction_row_mobile:Gn,transaction_row:Qn,table_body:Xn,btn_delete:Jn,btn_edit:Kn,btn_wrapper:Zn,icon_edit:ea},we=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:r,categoryId:c,comment:u,amount:_}=n,{isBigScreenOrTablet:l,isMobile:p}=me(),g=I(),v=f(De);function o(L){const A=v.find(K=>K.id===L);return A?A.name:"Unknown Category"}const w=L=>{g(Y(L))},D=r.toLowerCase()==="income"?"+":"-",J=r.toLowerCase()==="income"?i.income_border:i.expense_border,k=r.toLowerCase()==="income"?i.income_text:i.expense_text;return e.createElement(e.Fragment,null,p&&e.createElement("li",{key:a,className:`${i.transaction_item} ${J}`},e.createElement("table",{className:i.transactions_table_mobile},e.createElement("tbody",{className:i.table_body},e.createElement("tr",{className:i.transaction_row_mobile},e.createElement("td",{className:i.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:i.transaction_row_mobile},e.createElement("td",{className:i.transaction_first_column},"Type"),e.createElement("td",null,D)),e.createElement("tr",{className:i.transaction_row_mobile},e.createElement("td",{className:i.transaction_first_column},"Category"),e.createElement("td",null,o(c))),e.createElement("tr",{className:i.transaction_row_mobile},e.createElement("td",{className:i.transaction_first_column},"Comment"),e.createElement("td",null,u)),e.createElement("tr",{className:i.transaction_row_mobile},e.createElement("td",{className:i.transaction_first_column},"Sum"),e.createElement("td",{className:k},_)),e.createElement("tr",{className:i.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:i.btn_delete,onClick:()=>w(a)},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:_,comment:u,transactionDate:s},a),className:i.btn_edit},e.createElement("svg",{className:i.icon_edit},e.createElement("use",{xlinkHref:`${je}#icon-edit`}))," ","Edit")))))),l&&e.createElement("tr",{className:i.transaction_row},e.createElement("td",{className:i.transaction_colum},s),e.createElement("td",{className:i.transaction_colum,style:{textAlign:"center"}},D),e.createElement("td",{className:i.transaction_colum},o(c)),e.createElement("td",{className:i.transaction_colum},u),e.createElement("td",{className:`${i.transaction_colum} ${k}`,style:{textAlign:"right"}},_),e.createElement("td",{className:i.transaction_colum},e.createElement("div",{className:i.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:_,comment:u,transactionDate:s},a),className:i.btn_edit},"Edit"),e.createElement("button",{className:i.btn_delete,onClick:()=>w(a)},"Delete")))))},ta="_transactions_section_smf2v_1",na="_transactions_container_smf2v_34",aa="_transactions_table_smf2v_85",sa="_transactions_list_smf2v_92",ra="_transaction_row_head_smf2v_98",ca="_table_body_smf2v_121",oa="_btn_add_smf2v_125",la="_icon_plus_smf2v_140",ia="_empty_transactions_smf2v_146",y={transactions_section:ta,transactions_container:na,transactions_table:aa,transactions_list:sa,transaction_row_head:ra,table_body:ca,btn_add:oa,icon_plus:la,empty_transactions:ia},ma=()=>{const{isOpen:n,toggle:t}=ke(),[a,s]=d.useState(""),r=f(En),c=f(De),{isBigScreenOrTablet:u,isMobile:_}=me();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const l=(g,v,o)=>{t(),s({content:g,id:v,name:o}),n&&document.body.classList.add("modal-open")},p=()=>{t(),s(null)};return e.createElement("section",{className:y.transactions_section},e.createElement("div",{className:y.transactions_container},_&&e.createElement("ul",{className:y.transactions_list},r.length>0?r.map(g=>e.createElement(we,{handleEditItem:l,key:g.id,transaction:g})):e.createElement("div",{className:y.empty_transactions},"No transactions")),u&&e.createElement(e.Fragment,null,r.length>0?e.createElement("table",{className:y.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:y.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:y.table_body},r.map(g=>e.createElement(we,{handleEditItem:l,key:g.id,transaction:g})))):e.createElement(e.Fragment,null,e.createElement("table",{className:y.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:y.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:y.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>p(),className:y.btn_add}," ",e.createElement("svg",{className:y.icon_plus},e.createElement("use",{xlinkHref:`${je}#icon-plus`})))),n&&e.createElement(Ie,{closeModal:t},a?e.createElement(Wn,{editContent:a,categories:c,toggle:t}):e.createElement(Pn,{categories:c,toggle:t})))},Me=x("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await Ne.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),da={usdRate:null,eurRate:null,lastFetchTime:null},Be=ce({name:"currency",initialState:da,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(Me.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),ua=Be.reducer,{selectUsdRate:_a,selectEurRate:ga,selectLastFetchTime:pa}=Be.selectors,Ea="_wrapper_d2ubo_14",ha="_title_d2ubo_49",ba="_row_d2ubo_79",fa="_titleItem_d2ubo_97",wa="_rowItem_d2ubo_98",ya="_vector_d2ubo_104",Na="_image_d2ubo_109",va="_secondimage_d2ubo_132",Ca="_smallnumeur_d2ubo_148",xa="_smallnumusd_d2ubo_158",E={wrapper:Ea,title:ha,row:ba,titleItem:fa,rowItem:wa,vector:ya,image:Na,secondimage:va,smallnumeur:Ca,smallnumusd:xa};function $e(){const n=I(),t=f(_a),a=f(ga),s=f(pa),{isDesktopOrLaptop:r,isBigScreen:c,isTabletOrMobile:u,isRetina:_}=me();let l="../../img/images/currency_mobile.webp",p="../../img/images/line_desc_mob_1x.webp";return window.devicePixelRatio>=2?r||c?(l="../../img/images/currency_desk@2x.webp",p="../../img/images/line_desc_2x.webp"):u&&(l="../../img/images/currency_tablet@2x.webp",p="../../img/images/line_desc_tab_2x.webp"):r||c?(l="../../img/images/currency_desk.webp",p="../../img/images/line_desc_1x.webp"):u&&(l="../../img/images/currency_tablet.webp",p="../../img/images/line_desc_tab_1x.webp"),d.useEffect(()=>{(new Date().getTime()-s)/(1e3*60*60)>1&&n(Me())},[n,s]),e.createElement("div",{className:E.wrapper},e.createElement("div",{className:E.secondwrapper},e.createElement("ul",{className:E.title},e.createElement("li",{className:E.titleItem},"Currency"),e.createElement("li",{className:E.titleItem},"Purchase"),e.createElement("li",{className:E.titleItem},"Sale")),t&&e.createElement("ul",{className:E.row},e.createElement("li",{className:E.rowItem},"USD"),e.createElement("li",{className:E.rowItem},t.rateBuy),e.createElement("li",{className:E.rowItem},t.rateSell)),a&&e.createElement("ul",{className:E.row},e.createElement("li",{className:E.rowItem},"EUR"),e.createElement("li",{className:E.rowItem},a.rateBuy),e.createElement("li",{className:E.rowItem},a.rateSell)),r&&e.createElement(e.Fragment,null,e.createElement("p",{className:E.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:E.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:E.image,src:l,alt:"Currency rate"}),e.createElement("img",{className:E.secondimage,src:p,alt:"Currency rate"})))}const Sa=()=>{const n=Te().windowWidth,t=I();return d.useEffect(()=>{t(q())},[t]),d.useEffect(()=>{t(U())},[t]),e.createElement(e.Fragment,null,n>=768&&e.createElement($e,null),e.createElement(ma,null))},Ia="_loaderWrapper_1hccn_1",ka="_loader_1hccn_1",Ta="_spinner_1hccn_1",Ra="_loaderName_1hccn_34",re={loaderWrapper:Ia,loader:ka,spinner:Ta,loaderName:Ra},ye=()=>e.createElement("div",{className:re.loaderWrapper},e.createElement("div",{className:re.loader},e.createElement("span",{className:re.loaderName}))),Da="_selectContainers_1ftgu_1",La="_select_1ftgu_1",ja="_option_1ftgu_19",z={selectContainers:Da,select:La,option:ja},Ma=({onMonthChange:n,onYearChange:t})=>{const a=new Date,s=a.getFullYear(),[r,c]=d.useState(a.getMonth()+1),[u,_]=d.useState(s),l=o=>{c(parseInt(o.target.value)),n(parseInt(o.target.value))},p=o=>{_(parseInt(o.target.value)),t(parseInt(o.target.value))},g=Array.from({length:s-2019},(o,w)=>s-w).reverse(),v=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.createElement("div",{className:z.selectContainers},e.createElement("select",{className:z.select,value:r,onChange:l},v.map((o,w)=>e.createElement("option",{className:z.option,key:w+1,value:w+1},o))),e.createElement("select",{className:z.select,value:u,onChange:p},g.map(o=>e.createElement("option",{className:z.option,key:o,value:o},o))))},Ba="_statisticsContainer_12lnp_1",$a="_chartContainer_12lnp_27",za="_title_12lnp_31",Wa="_tableContainer_12lnp_36",Pa="_contentContainer_12lnp_59",M={statisticsContainer:Ba,chartContainer:$a,title:za,tableContainer:Wa,contentContainer:Pa},Aa="_tableContainer_g4cyy_1",Oa="_table_g4cyy_1",Fa="_tableHeader_g4cyy_12",qa="_tableCell_g4cyy_25",Ya="_tableRow_g4cyy_33",Va="_paragraphContainer_g4cyy_37",Ha="_paragraph_g4cyy_37",C={tableContainer:Aa,table:Oa,tableHeader:Fa,tableCell:qa,tableRow:Ya,paragraphContainer:Va,paragraph:Ha},Ua=({transactionsSummary:n})=>{const t=(n==null?void 0:n.categoriesSummary)||[],a=(n==null?void 0:n.incomeSummary)||0,s=(n==null?void 0:n.expenseSummary)||0;return e.createElement("div",{className:C.tableContainer},e.createElement("table",{className:C.table},e.createElement("thead",{className:C.tableHeader},e.createElement("tr",null,e.createElement("th",{className:C.tableCell},"Category"),e.createElement("th",{className:C.tableCell},"Sum"))),e.createElement("tbody",null,t.map((r,c)=>e.createElement("tr",{key:c,className:C.tableRow},e.createElement("td",{className:C.tableCell},r.name),e.createElement("td",{className:C.tableCell},r.total))))),e.createElement("div",{className:C.paragraphContainer},e.createElement("p",{className:C.paragraph},"Income: ",a),e.createElement("p",{className:C.paragraph},"Expenses: ",s)))},Ga=()=>{const n=I(),t=f(hn),[a,s]=d.useState(new Date().getMonth()+1),[r,c]=d.useState(new Date().getFullYear());d.useEffect(()=>{n(G({month:a,year:r}))},[a,r,n]);const u=l=>{s(l)},_=l=>{c(l)};return e.createElement("section",{className:M.statisticsContainer},e.createElement("div",{className:M.titleContainer},e.createElement("h2",{className:M.title},"Statistics")),e.createElement("div",{className:M.contentContainer},e.createElement("div",{className:M.chartContainer}),e.createElement("div",{className:M.tableContainer},e.createElement(Ma,{onMonthChange:u,onYearChange:_}),e.createElement(Ua,{transactionsSummary:t}))))};function Qa(){const n=f(X),t=f(mt);return I(),t?e.createElement(ye,null):e.createElement(e.Fragment,null,e.createElement(d.Suspense,{fallback:e.createElement(ye,null)},e.createElement(Ue,null,e.createElement(T,{path:"/",element:e.createElement(Rt,null)},e.createElement(T,{index:!0,element:e.createElement(ge,{component:ln,redirectTo:"/home"})}),e.createElement(T,{path:"register",element:e.createElement(ge,{component:_n,redirectTo:"/home"})}),e.createElement(T,{path:"/home",element:e.createElement(ne,{component:Sa,redirectTo:"/"})}),e.createElement(T,{path:"/statistics",element:e.createElement(ne,{component:Ga,redirectTo:"/"})}),e.createElement(T,{path:"/currency",element:e.createElement(ne,{component:$e,redirectTo:"/"})})),e.createElement(T,{path:"*",element:n?e.createElement(Q,{to:"/home"}):e.createElement(Q,{to:"/"})}))))}const Xa={key:"auth",version:1,storage:xe,whitelist:["token"]},Ja={key:"root",storage:xe},ze=Ge({reducer:{auth:_e(Xa,lt),transactions:pn,currency:_e(Ja,ua)},middleware:n=>n({serializableCheck:{ignoredActions:[Qe,Xe,Je,Ke,Ze,et]}}),devTools:!1}),Ka=tt(ze);nt.createRoot(document.getElementById("root")).render(e.createElement(at,null,e.createElement(st,{store:ze},e.createElement(rt,{loading:null,persistor:Ka},e.createElement(Qa,null),e.createElement(ct,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
