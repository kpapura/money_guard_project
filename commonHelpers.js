import{R as i,a as E,c,b as j,i as l,p as I,d as w,e as V,f as W,F as P,g as A,P as O,h as b,j as v,k as M,l as _,m as x,n as U}from"./assets/vendor-0861a3e9.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();function F(){return i.createElement(i.Fragment,null,i.createElement("h1",null,"HELLO"))}const n=E.create({baseURL:"https://wallet.b.goit.study/api/"}),L=r=>{n.defaults.headers.common.Authorization=`Bearer ${r}`},$=()=>{n.defaults.headers.common.Authorization=""},u=c("register",async(r,e)=>{try{const{data:t}=await n.post("auth/sign-up",r);return L(t.token),console.log(t),t}catch(t){return e.rejectWithValue(t.message)}}),f=c("login",async(r,e)=>{try{const{data:t}=await n.post("auth/sign-in",r);return L(t.token),console.log(t),t}catch(t){return e.rejectWithValue(t.message)}}),z=c("logout",async(r,e)=>{try{const{data:t}=await n.delete("auth/sign-out");return console.log(t),$(),t}catch(t){return e.rejectWithValue(t.message)}}),g=c("refresh",async(r,e)=>{const t=e.getState().auth.token;if(!t)return e.rejectWithValue("Token is not exist!");try{L(t);const{data:o}=await n.get("users/current");return o}catch(o){return e.rejectWithValue(o.message)}}),R={user:{name:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1},S=j({name:"auth",initialState:R,selectors:{selectUser:r=>r.user,selectIsLoggedIn:r=>r.isLoggedIn,selectToken:r=>r.isLoggedIn,selectIsRefresh:r=>r.isRefresh},extraReducers:r=>{r.addCase(z.fulfilled,e=>R).addCase(g.fulfilled,(e,{payload:t})=>{e.user.name=t.name,e.user.email=t.email,e.isLoggedIn=!0,e.isRefresh=!1}).addMatcher(l(u.fulfilled,f.fulfilled),(e,{payload:t})=>{e.user.name=t.user.name,e.user.email=t.user.email,e.token=t.token,e.isLoggedIn=!0}).addMatcher(l(u.pending,f.pending,g.pending),e=>{e.loading=!0,e.error=null,e.isRefresh=!0}).addMatcher(l(u.rejected,f.rejected,g.rejected),(e,{payload:t})=>{e.error=t,e.loading=!1,e.isRefresh=!1})}}),D=S.reducer;S.selectors;const h=c("fetchTransactionsData",async(r,e)=>{try{const{data:t}=await n.get("transactions");return t}catch(t){return e.rejectWithValue(t.message)}}),m=c("deleteTransaction",async(r,e)=>{try{const{data:t}=await n.delete(`transactions/${r}`);return t.id}catch(t){return e.rejectWithValue(t.message)}}),p=c("addTransaction",async(r,e)=>{try{const{data:t}=await n.post("transactions",r);return t}catch(t){return e.rejectWithValue(t.message)}}),y=c("editTransaction",async(r,e)=>{try{const{data:t}=await n.patch(`/transactions/${r.id}`,r);return t}catch(t){return e.rejectWithValue(t.message)}}),T=c("fetchTransactionCategories",async(r,e)=>{try{const{data:t}=await n.get("transaction-categories");return t}catch(t){return e.rejectWithValue(t.message)}});c("fetchTransactionSummaryController",async(r,e)=>{try{const{data:t}=await n.get("transactions-summary");return t}catch(t){return e.rejectWithValue(t.message)}});const G={transactionsList:[],transactionCategories:[],transactionSummaryController:null,loading:!1,error:!1},C=j({name:"transactions",initialState:G,selectors:{selectTransactions:r=>r.transactionsList,selectIsLoading:r=>r.loading,selectIsError:r=>r.error},extraReducers:r=>{r.addCase(h.fulfilled,(e,{payload:t})=>{e.transactionsList=t,e.loading=!1}).addCase(m.fulfilled,(e,{payload:t})=>{e.transactionsList=e.transactionsList.filter(o=>o.id!==t),e.loading=!1}).addCase(p.fulfilled,(e,{payload:t})=>{e.transactionsList.push(t),e.loading=!1}).addCase(y.fulfilled,(e,{payload:t})=>{const o=e.transactionsList.findIndex(a=>a.id===t.id);e.transactionsList.splice(o,1,t),e.loading=!1}).addCase(T.fulfilled,(e,{payload:t})=>{e.transactionCategories=t,e.loading=!1}).addCase(fetchTransactionSummaryController.fulfilled,(e,{payload:t})=>{e.transactionSummaryController=t,e.loading=!1}).addMatcher(l(h.pending,m.pending,p.pending,y.pending,T.pending,fetchTransactionSummaryController.pending),(e,{payload:t})=>{e.loading=!0,e.error=null}).addMatcher(l(h.rejected,m.rejected,p.rejected,y.rejected,T.rejected,fetchTransactionSummaryController.rejected),(e,{payload:t})=>{e.error=t,e.loading=!1})}}),H=C.reducer;C.selectors;const N={key:"auth",version:1,storage:W,whitelist:["token"]},B=I(N,D),k=w({reducer:{auth:B,transactions:H},middleware:r=>r({serializableCheck:{ignoredActions:[P,A,O,b,v,M]}}),devTools:!1}),q=V(k);_.createRoot(document.getElementById("root")).render(i.createElement(i.StrictMode,null,i.createElement(x,{store:k},i.createElement(U,{loading:null,persistor:q},i.createElement(F,null)))));
//# sourceMappingURL=commonHelpers.js.map
