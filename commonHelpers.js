import{a as Le,c as I,b as pe,i as j,u as Ee,d as L,R as e,r as u,e as Qe,f as W,g as h,L as Je,N as B,h as A,O as we,_ as Ke,P as Ze,j as et,k as $e,o as Re,l as re,m as $,B as z,n as tt,S as nt,D as at,p as De,q as Be,s as st,t as ae,v as rt,w as R,x as ct,y as fe,F as ot,z as lt,A as it,C as mt,E as ut,G as dt,H as _t,I as Me,J as gt,K as pt,M as Et,Q as ht,T as bt}from"./assets/vendor-f9f9bdf4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const k="/money_guard_project/assets/sprite-7c7b64a9.svg",vt="_wrap_1nzyu_1",yt="_logo_1nzyu_5",wt="_text_1nzyu_14",le={wrap:vt,logo:yt,text:wt},S=Le.create({baseURL:"https://wallet.b.goit.study/api/"}),he=n=>{S.defaults.headers.common.Authorization=`Bearer ${n}`},ft=()=>{S.defaults.headers.common.Authorization=""},G=I("register",async(n,t)=>{try{const{data:a}=await S.post("auth/sign-up",n);return he(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),X=I("login",async(n,t)=>{try{const{data:a}=await S.post("auth/sign-in",n);return he(a.token),a}catch(a){return console.log(a),t.rejectWithValue(a.response.data.message)}}),We=I("logout",async(n,t)=>{try{const{data:a}=await S.delete("auth/sign-out");return ft(),a}catch(a){return t.rejectWithValue(a.message)}}),Q=I("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{he(a);const{data:s}=await S.get("users/current");return console.log(s),s}catch(s){return t.rejectWithValue(s.message)}}),ie={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},be=pe({name:"auth",initialState:ie,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance,selectIsLoading:n=>n.loading},reducers:{logout:n=>ie},extraReducers:n=>{n.addCase(We.fulfilled,t=>ie).addCase(Q.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(j(G.fulfilled,X.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(j(G.pending,X.pending,Q.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(j(G.rejected,X.rejected,Q.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),Nt=be.reducer,{selectIsLoggedIn:ce,selectUser:Ct,selectToken:Os,selectIsRefresh:xt,selectBalance:kt,selectIsLoading:St}=be.selectors,{logout:It}=be.actions,Tt=({closeModal:n})=>{const t=Ee(),a=L(),s=()=>{a(We()),a(It()),n(),t("/")};return e.createElement("div",{className:le.wrap},e.createElement("a",{href:"",className:le.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:le.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},Lt="_closeButton_qk8jt_1",$t="_modalContent_qk8jt_16",Rt="_modalWrapper_qk8jt_40",me={closeButton:Lt,modalContent:$t,modalWrapper:Rt},Dt=document.querySelector("#modal"),ze=({closeModal:n,children:t})=>{const a=u.useCallback(r=>{r.key==="Escape"&&n()},[n]);u.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=r=>{r.target===r.currentTarget&&n()};return Qe.createPortal(e.createElement("div",{onClick:s,className:me.modalWrapper},e.createElement("div",{className:me.modalContent},e.createElement("button",{className:me.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),Dt)},Pe=()=>{const[n,t]=u.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(c=>!c)}},Bt="_header_xi0pd_1",Mt="_hederContainer_xi0pd_19",Wt="_logo_xi0pd_38",zt="_wrap_xi0pd_52",Pt="_user_xi0pd_58",qt="_button_xi0pd_64",At="_icon_xi0pd_92",D={header:Bt,hederContainer:Mt,logo:Wt,wrap:zt,user:Pt,button:qt,icon:At},H=()=>{const n=W.useMediaQuery({query:"(min-width: 768px)"}),t=W.useMediaQuery({query:"(min-width: 1280px)"}),a=W.useMediaQuery({query:"(max-width: 768px)"}),s=W.useMediaQuery({query:"(max-width: 767px)"}),r=W.useMediaQuery({query:"(orientation: portrait)"}),c=W.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:r,isRetina:c}},Ot=()=>{const{isOpen:n,toggle:t}=Pe(),{isBigScreenOrTablet:a,isMobile:s}=H(),r=h(Ct),c=r.email.indexOf("@"),i=r.email.slice(0,c);return e.createElement("header",{className:D.header},e.createElement("div",{className:D.hederContainer},e.createElement(Je,{to:"/",className:D.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{xlinkHref:`${k}#icon-logo`})),"Money Guard"),e.createElement("div",{className:D.wrap}," ",e.createElement("p",{className:D.user},i),e.createElement("button",{className:D.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:D.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ",a?"Exit":"")),n&&e.createElement(ze,{closeModal:t},e.createElement(Tt,{closeModal:t}))))},ve=()=>{const[n,t]=u.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return u.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Ft="_navLinkContainer_6mdav_1",jt="_navLinkWrapper_6mdav_10",Ht="_navLinkTitle_6mdav_17",Yt="_active_6mdav_36",Vt="_navLinkIconBg_6mdav_45",Ut="_navLinkIcon_6mdav_45",E={navLinkContainer:Ft,navLinkWrapper:jt,navLinkTitle:Ht,active:Yt,navLinkIconBg:Vt,navLinkIcon:Ut},Gt=()=>{const n=ve().windowWidth;return e.createElement("div",{className:E.navLinkContainer},e.createElement("div",{className:E.navLinkWrapper},n<768?e.createElement(B,{to:"home",className:({isActive:t})=>A(E.navLinkTitle,t&&E.active)},e.createElement("div",{className:E.navLinkIconBg},e.createElement("svg",{width:"38",height:"38",className:E.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-home`})))):e.createElement(B,{to:"home",className:({isActive:t})=>A(E.navLinkTitle,t&&E.active)},e.createElement("div",{className:E.navLinkIconBg},e.createElement("svg",{width:"18",height:"18",className:E.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-home`}))),"Home"),n<768?e.createElement(B,{to:"statistics",className:({isActive:t})=>A(E.navLinkTitle,t&&E.active)},e.createElement("div",{className:E.navLinkIconBg},e.createElement("svg",{width:"32",height:"32",className:E.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-statistics`})))):e.createElement(B,{to:"statistics",className:({isActive:t})=>A(E.navLinkTitle,t&&E.active)},e.createElement("div",{className:E.navLinkIconBg},e.createElement("svg",{width:"16",height:"16",className:E.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-statistics`}))),"Statistics"),n<768&&e.createElement(B,{to:"/currency",className:({isActive:t})=>A(E.navLinkTitle,t&&E.active)},e.createElement("div",{className:E.navLinkIconBg},e.createElement("svg",{width:"38",height:"38",className:E.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-currency`}))))))},Xt="_wrapper_rag0p_1",Qt="_title_rag0p_35",Jt="_text_rag0p_43",ue={wrapper:Xt,title:Qt,text:Jt};function qe(){const n=h(kt);return e.createElement("div",{className:ue.wrapper},e.createElement("p",{className:ue.title},"YOUR BALANCE"),e.createElement("p",{className:ue.text},"₴ ",n))}const Ae=I("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await Le.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),Kt={usdRate:null,eurRate:null,lastFetchTime:null},Oe=pe({name:"currency",initialState:Kt,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(Ae.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),Zt=Oe.reducer,{selectUsdRate:en,selectEurRate:tn,selectLastFetchTime:nn}=Oe.selectors,an="_wrapper_10m6q_1",sn="_title_10m6q_44",rn="_row_10m6q_75",cn="_titleItem_10m6q_95",on="_rowItem_10m6q_105",ln="_vector_10m6q_115",mn="_image_10m6q_120",un="_secondimage_10m6q_147",dn="_smallnumeur_10m6q_163",_n="_smallnumusd_10m6q_173",v={wrapper:an,title:sn,row:rn,titleItem:cn,rowItem:on,vector:ln,image:mn,secondimage:un,smallnumeur:dn,smallnumusd:_n};function Fe(){const n=L(),t=h(en),a=h(tn),s=h(nn),{isDesktopOrLaptop:r,isBigScreen:c,isTabletOrMobile:i,isRetina:g}=H();let _="",p="";return g?c?(_="../../img/images/currency_desk@2x.webp",p="../../img/images/line_desc_2x.webp"):i?(_="../../img/images/currency_tablet@2x.webp",p="../../img/images/line_desc_tab_2x.webp"):(_="../../img/images/currency_mobile@2x.webp",p="../../img/images/line_desc_mob_2x.webp"):c?(_="../../img/images/currency_desk.webp",p="../../img/images/line_desc_1x.webp"):i?(_="../../img/images/currency_tablet.webp",p="../../img/images/line_desc_tab_1x.webp"):(_="../../img/images/currency_mobile.webp",p="../../img/images/line_desc_mob_1x.webp"),u.useEffect(()=>{(new Date().getTime()-s)/(1e3*60*60)>1&&n(Ae())},[n,s]),e.createElement("div",{className:v.wrapper},e.createElement("ul",{className:v.title},e.createElement("li",{className:v.titleItem},"Currency"),e.createElement("li",{className:v.titleItem},"Purchase"),e.createElement("li",{className:v.titleItem},"Sale")),t&&e.createElement("ul",{className:v.row},e.createElement("li",{className:v.rowItem},"USD"),e.createElement("li",{className:v.rowItem},t.rateBuy),e.createElement("li",{className:v.rowItem},t.rateSell)),a&&e.createElement("ul",{className:v.row},e.createElement("li",{className:v.rowItem},"EUR"),e.createElement("li",{className:v.rowItem},a.rateBuy),e.createElement("li",{className:v.rowItem},a.rateSell)),c&&e.createElement(e.Fragment,null,e.createElement("p",{className:v.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:v.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:v.image,src:_,alt:"Currency rate"}),e.createElement("img",{className:v.secondimage,src:p,alt:"Currency rate"}))}const gn="_loaderWrapper_1hccn_1",pn="_loader_1hccn_1",En="_spinner_1hccn_1",hn="_loaderName_1hccn_34",de={loaderWrapper:gn,loader:pn,spinner:En,loaderName:hn},se=()=>e.createElement("div",{className:de.loaderWrapper},e.createElement("div",{className:de.loader},e.createElement("span",{className:de.loaderName}))),bn="_walletContainer_1w4tn_1",vn="_mainContainer_1w4tn_9",yn="_commonInfo_1w4tn_32",wn="_wrap_1w4tn_62",fn="_navBar_1w4tn_68",Nn="_balance_1w4tn_74",Cn="_transactions_section_1w4tn_76",O={walletContainer:bn,mainContainer:vn,commonInfo:yn,wrap:wn,navBar:fn,balance:Nn,transactions_section:Cn},xn=()=>{const n=h(St),t=h(ce),a=ve().windowWidth;return t?e.createElement(e.Fragment,null,n&&e.createElement(se,null),e.createElement(Ot,null),e.createElement("div",{className:O.walletContainer},e.createElement("div",{className:O.mainContainer},e.createElement("div",{className:O.commonInfo},e.createElement("div",{className:O.wrap},e.createElement(Gt,{className:O.navBar}),a>=768&&e.createElement(qe,null)),a>=768&&e.createElement(Fe,null)),e.createElement(u.Suspense,{fallback:e.createElement(se,null)},e.createElement(we,null))))):e.createElement(e.Fragment,null,e.createElement(we,null))},kn="_login_register_section_1xhyp_1",Sn="_register_login_section_1xhyp_2",In="_background_container_login_1xhyp_13",Tn="_background_container_registration_1xhyp_14",Ln="_gradient_container_1xhyp_163",$n="_form_container_login_1xhyp_169",Rn="_form_container_register_1xhyp_170",Dn="_form_1xhyp_169",Bn="_submit_btn_1xhyp_207",Mn="_inactive_btn_1xhyp_227",Wn="_password_label_1xhyp_244",zn="_password_input_1xhyp_253",Pn="_error_container_1xhyp_263",qn="_username_1xhyp_267",An="_email_1xhyp_273",On="_password_1xhyp_244",Fn="_cpassword_1xhyp_285",jn="_eye_1xhyp_299",Hn="_name_label_1xhyp_303",Yn="_name_input_1xhyp_311",Vn="_name_user_icon_1xhyp_336",Un="_icon_email_cont_1xhyp_340",Gn="_password_icon_1xhyp_344",Xn="_button_cont_1xhyp_348",Qn="_strengthBar_1xhyp_354",Jn="_porgress_container_1xhyp_374",Kn="_logo_wrapper_1xhyp_379",Zn="_background_img_container_login_1xhyp_583",ea="_background_img_container_registration_1xhyp_584",ta="_background_container_1xhyp_13",m={login_register_section:kn,register_login_section:Sn,background_container_login:In,background_container_registration:Tn,gradient_container:Ln,form_container_login:$n,form_container_register:Rn,form:Dn,submit_btn:Bn,inactive_btn:Mn,password_label:Wn,password_input:zn,error_container:Pn,username:qn,email:An,password:On,cpassword:Fn,eye:jn,name_label:Hn,name_input:Yn,name_user_icon:Vn,icon_email_cont:Un,password_icon:Gn,button_cont:Xn,strengthBar:Qn,porgress_container:Jn,logo_wrapper:Kn,background_img_container_login:Zn,background_img_container_registration:ea,background_container:ta},Ne=({register:n,errors:t,name:a,placeholder:s,className:r})=>e.createElement(e.Fragment,null,e.createElement("div",{className:m.error_container},e.createElement("label",{className:m.name_label},a==="username"?e.createElement("div",{className:m.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:m.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:m.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:m[r]},t[a].message))),na=({password:n})=>e.createElement("div",{className:m.porgress_container},e.createElement(Ke,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:m.strengthBar})),Ce=({register:n,errors:t,name:a,placeholder:s,getValues:r,formType:c,className:i})=>{const[g,_]=u.useState("password"),[p,d]=u.useState("");function f(o){d(o.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:m.error_container},e.createElement("label",{className:m.password_label},e.createElement("div",{className:m.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:o=>o===r("password")||"Passwords do not match"}),type:g,placeholder:s,onChange:f,className:m.password_input})," ",e.createElement("div",{className:m.eye,onClick:()=>{_(g==="password"?"text":"password")}},g==="password"?e.createElement(Ze,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(et,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:m[i]},t[a].message)),a==="password"&&c!=="login"&&e.createElement(na,{password:p}))},je=({onDataSubmit:n,formType:t,schema:a})=>{const[s,r]=u.useState(0);u.useEffect(()=>{const d=()=>{r(window.innerWidth)};return window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]);const{register:c,reset:i,handleSubmit:g,formState:{errors:_}}=$e({resolver:Re(a)}),p=d=>{const{passwordConfirmation:f,...o}=d;n(o),i()};return e.createElement(e.Fragment,null,e.createElement("section",{className:t==="login"?`${m.login_register_section}`:`${m.register_login_section}`},t==="login"?e.createElement(e.Fragment,null,e.createElement("div",{className:m.background_container_login},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))," ",e.createElement("div",{className:m.background_img_container_login},e.createElement("div",null),e.createElement("div",null))):e.createElement(e.Fragment,null,e.createElement("div",{className:m.background_container_registration},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:m.background_img_container_registration},e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:t==="login"?m.form_container_login:m.form_container_register},e.createElement("a",{href:"",className:m.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{xlinkHref:`${k}#icon-logo`})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{xlinkHref:`${k}#icon-logo`})),"Money Guard"),e.createElement("form",{className:m.form,onSubmit:g(p)},t==="register"&&e.createElement(Ne,{register:c,errors:_,name:"username",placeholder:"Name",className:"username"}),e.createElement(Ne,{register:c,errors:_,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(Ce,{register:c,errors:_,name:"password",placeholder:"Password",onChange:d=>handleChange(d),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(Ce,{register:c,errors:_,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:m.button_cont},e.createElement("button",{className:m.submit_btn,type:"submit"},"log in"),e.createElement(B,{className:m.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:m.button_cont},e.createElement("button",{className:m.submit_btn,type:"submit"},"register"),e.createElement(B,{className:m.inactive_btn,to:"/login"},"log in"))," "))))},aa=re({password:$().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:$().required().email("Email is not valid")}).required(),sa=()=>{const n=Ee(),t=L(),a=r=>{t(X(r)).unwrap().then(()=>{n("/home")}).catch(c=>{console.log(c.message),z(c)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement(e.Fragment,null,e.createElement(je,{formType:"login",onDataSubmit:a,values:s,schema:aa}))},ra=re({username:$().required(),password:$().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:$().required().email("Email is not valid"),passwordConfirmation:$().oneOf([tt("password"),null],"Passwords must match")}).required();const ca=()=>{const n=L(),t=Ee(),a=s=>{n(G(s)).unwrap().then(()=>{t("/home")}).catch(r=>{console.log(r),z(r)})};return e.createElement(e.Fragment,null,e.createElement(je,{onDataSubmit:a,formType:"register",schema:ra}))},J=I("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await S.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),K=I("deleteTransaction",async(n,t)=>{try{return await S.delete(`transactions/${n.id}`),n}catch(a){return t.rejectWithValue(a.message)}}),Z=I("addTransaction",async(n,t)=>{try{const{data:a}=await S.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),ee=I("editTransaction",async(n,t)=>{try{const{data:a}=await S.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),te=I("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await S.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),ne=I("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await S.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),oa={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},ye=pe({name:"transactions",initialState:oa,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(J.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(K.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a.id),t.loading=!1}).addCase(Z.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(ee.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(r=>r.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(te.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(ne.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(j(J.pending,K.pending,Z.pending,ee.pending,te.pending,ne.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(j(J.rejected,K.rejected,Z.rejected,ee.rejected,te.rejected,ne.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),la=ye.reducer;ye.actions;const{selectTransactions:ia,selectIsLoading:Fs,selectIsError:js,selectTransactionCategories:He,selectYear:Hs,selectMonth:Ys,selectCategoriesSummary:ma,selectExpenseSummary:ua,selectIncomeSummary:da,selectPeriodTotal:_a}=ye.selectors,ga="_labelExpense_quz5u_21",pa="_labelIncome_quz5u_27",Ea="_activeIncome_quz5u_33",ha="_activeExpense_quz5u_40",ba="_slider_quz5u_46",va="_round_quz5u_91",T={"transaction-switcher":"_transaction-switcher_quz5u_2",switch:"_switch_quz5u_9",labelExpense:ga,labelIncome:pa,activeIncome:Ea,activeExpense:ha,slider:ba,round:va},ya=({onChange:n})=>{const[t,a]=u.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:T["transaction-switcher"]},e.createElement("span",{className:t?T.activeIncome:T.labelIncome},"Income"),e.createElement("label",{className:`${T.switch} ${t?T.income:T.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${T.slider} ${T.round}`})),e.createElement("span",{className:t?T.labelExpense:T.activeExpense},"Expense"))},wa="_container_1pzgo_1",fa="_formWrapper_1pzgo_20",Na="_header_1pzgo_32",Ca="_secondContainer_1pzgo_42",xa="_category_1pzgo_51",ka="_boxDate_1pzgo_64",Sa="_incomeInput_1pzgo_78",Ia="_customInput_1pzgo_79",Ta="_svgBox_1pzgo_108",La="_comment_1pzgo_137",$a="_selectExpense_1pzgo_138",Ra="_btnBox_1pzgo_157",Da="_activeIncome_1pzgo_164",Ba="_activeExpense_1pzgo_171",Ma="_checkBox_1pzgo_177",Wa="_inputContainer_1pzgo_190",za="_active_1pzgo_164",Pa="_hidden_1pzgo_205",y={container:wa,formWrapper:fa,header:Na,secondContainer:Ca,category:xa,boxDate:ka,incomeInput:Sa,customInput:Ia,svgBox:Ta,comment:La,selectExpense:$a,btnBox:Ra,activeIncome:Da,activeExpense:Ba,checkBox:Ma,inputContainer:Wa,active:za,hidden:Pa},xe=({name:n,register:t,errors:a,placeholder:s,className:r})=>e.createElement("div",{className:y.inputContainer},e.createElement("input",{autoComplete:"off",className:r,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message)),ke=n=>n<10?"0"+n:n,Se=n=>{const t=n.getFullYear(),a=ke(n.getMonth()+1),s=ke(n.getDate());return`${t}-${a}-${s}`};function Ye({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:r,schema:c}){const{register:i,handleSubmit:g,formState:{errors:_},setValue:p}=$e({resolver:Re(c),mode:"onChange"}),[d,f]=u.useState(null),[o,w]=u.useState(""),[N,P]=u.useState(null),[q,Y]=u.useState(!0);u.useEffect(()=>{w(n?n.type:"EXPENSE"),p("amount",n&&+n.amount.toString().replace("-","")),p("comment",n&&n.comment)},[n,p]);const M=u.useMemo(()=>t.map(({id:b,name:Xe})=>({value:b,label:Xe})),[t]),V=u.useMemo(()=>M.find(b=>(n==null?void 0:n.categoryId)===b.value),[n,M]),Ue=b=>{f(b)},Ge=b=>{if(s==="add"&&d)r({transactionDate:Se(N),amount:o==="EXPENSE"?+`-${b.amount}`:+b.amount,comment:b.comment,type:o,categoryId:o==="EXPENSE"?d==null?void 0:d.value:"063f1132-ba5d-42b4-951d-44011ca46262"}),Y(!0);else if(s==="add"&&!d){Y(!1);return}else r({transactionDate:n?n.transactionDate:Se(N),amount:o==="EXPENSE"?+`-${b.amount}`:+b.amount,comment:b.comment})},oe=b=>{w(b?"INCOME":"EXPENSE")};return e.createElement("div",{className:y.container},e.createElement("form",{className:y.formWrapper,onSubmit:g(Ge)},e.createElement("h1",{className:y.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(ya,{onChange:oe}):e.createElement("div",null,e.createElement("ul",{className:y.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&o==="EXPENSE"||oe(!0)},className:n.type==="INCOME"||o==="INCOME"?y.activeIncome:"",disabled:s==="edit"&&o==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&o==="INCOME"||oe(!1)},className:o==="EXPENSE"?y.activeExpense:"",disabled:s==="edit"&&o==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:y.secondContainer},o==="EXPENSE"&&e.createElement("div",{className:y.category},e.createElement(nt,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:M,placeholder:"Select category",defaultValue:V&&V,onChange:Ue,isDisabled:s==="edit"}),e.createElement("span",{className:q?y.hidden:y.active},"Please, choose the category")),e.createElement("div",{className:y.boxDate},e.createElement(xe,{className:y.incomeInput,name:"amount",placeholder:"0.00",autoComplete:"false",errors:_,register:i}),e.createElement("div",{className:y.svgBox},e.createElement(at,{className:y.customInput,selected:n?n.transactionDate:N,placeholderText:"Enter the date",onChange:b=>{p("transactionDate",b),P(b)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{xlinkHref:`${k}#icon-date`})),_.transactionDate&&e.createElement("span",null,_.transactionDate.message))),e.createElement(xe,{className:y.comment,name:"comment",placeholder:"Comment",errors:_,register:i}),e.createElement("div",{className:y.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}const qa=re({comment:$().min(5,"Give more details"),transactionDate:De(),amount:Be().typeError("Please enter the number").min(1,"Number must be at least 1 character")});function Aa({categories:n,editContent:t,toggle:a}){const s=L(),r=c=>{s(ee({content:{...c},id:t.id})).unwrap().then(i=>{z.success("Changed!"),a()}).catch(i=>{z.error("Credentials is not valid!")})};return e.createElement(Ye,{schema:qa,toggle:a,content:t.content,categories:n,onDataSubmit:r,typeForm:"edit"})}const Oa=re({comment:$().required("Describe your transaction").min(5,"Give more details"),transactionDate:De().required("Please choose the date"),amount:Be().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function Fa({categories:n,toggle:t}){const a=L(),s=r=>{a(Z(r)).unwrap().then(()=>{z.success("Transaction was successfully added"),t()}).catch(c=>{z.error("Credentials is not valid!")})};return e.createElement(Ye,{schema:Oa,categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const ja="_transaction_item_172wv_1",Ha="_income_border_172wv_6",Ya="_expense_border_172wv_10",Va="_income_text_172wv_14",Ua="_expense_text_172wv_19",Ga="_transactions_table_mobile_172wv_24",Xa="_transaction_colum_172wv_30",Qa="_transaction_first_column_172wv_34",Ja="_transaction_row_mobile_172wv_38",Ka="_transaction_row_172wv_38",Za="_table_body_172wv_57",es="_btn_delete_172wv_61",ts="_btn_edit_172wv_75",ns="_btn_wrapper_172wv_84",as="_icon_edit_172wv_91",l={transaction_item:ja,income_border:Ha,expense_border:Ya,income_text:Va,expense_text:Ua,transactions_table_mobile:Ga,transaction_colum:Xa,transaction_first_column:Qa,transaction_row_mobile:Ja,transaction_row:Ka,table_body:Za,btn_delete:es,btn_edit:ts,btn_wrapper:ns,icon_edit:as},Ie=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:r,categoryId:c,comment:i,amount:g}=n,{isBigScreenOrTablet:_,isMobile:p}=H(),d=L(),f=h(He);function o(Y){const M=f.find(V=>V.id===Y);return M?M.name:"Unknown Category"}const w=()=>{d(K(n))},N=r.toLowerCase()==="income"?"+":"-",P=r.toLowerCase()==="income"?l.income_border:l.expense_border,q=r.toLowerCase()==="income"?l.income_text:l.expense_text;return e.createElement(e.Fragment,null,p&&e.createElement("li",{key:a,className:`${l.transaction_item} ${P}`},e.createElement("table",{className:l.transactions_table_mobile},e.createElement("tbody",{className:l.table_body},e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Type"),e.createElement("td",null,N)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Category"),e.createElement("td",null,o(c))),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Comment"),e.createElement("td",null,i)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Sum"),e.createElement("td",{className:q},g)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:l.btn_delete,onClick:w},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:g,comment:i,transactionDate:s},a),className:l.btn_edit},e.createElement("svg",{className:l.icon_edit},e.createElement("use",{xlinkHref:`${k}#icon-edit`}))," ","Edit")))))),_&&e.createElement("tr",{className:l.transaction_row},e.createElement("td",{className:l.transaction_colum},s),e.createElement("td",{className:l.transaction_colum,style:{textAlign:"center"}},N),e.createElement("td",{className:l.transaction_colum},o(c)),e.createElement("td",{className:l.transaction_colum},i),e.createElement("td",{className:`${l.transaction_colum} ${q}`,style:{textAlign:"right"}},g),e.createElement("td",{className:l.transaction_colum},e.createElement("div",{className:l.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:g,comment:i,transactionDate:s},a),className:l.btn_edit},e.createElement("svg",{className:l.icon_edit},e.createElement("use",{xlinkHref:`${k}#icon-edit`}))),e.createElement("button",{className:l.btn_delete,onClick:w},"Delete")))))},ss="_transactions_section_1a187_1",rs="_transactions_container_1a187_21",cs="_transactions_table_1a187_54",os="_transactions_list_1a187_61",ls="_transaction_row_head_1a187_67",is="_table_body_1a187_90",ms="_btn_add_1a187_98",us="_icon_plus_1a187_116",ds="_empty_transactions_1a187_122",x={transactions_section:ss,transactions_container:rs,transactions_table:cs,transactions_list:os,transaction_row_head:ls,table_body:is,btn_add:ms,icon_plus:us,empty_transactions:ds},_s=()=>{const{isOpen:n,toggle:t}=Pe(),[a,s]=u.useState(""),r=h(ia),c=h(He),{isBigScreenOrTablet:i,isMobile:g}=H();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const _=(d,f,o)=>{t(),s({content:d,id:f,name:o}),n&&document.body.classList.add("modal-open")},p=()=>{t(),s(null)};return e.createElement("section",{className:x.transactions_section},e.createElement("div",{className:x.transactions_container},g&&e.createElement("ul",{className:x.transactions_list},r.length>0?r.map(d=>e.createElement(Ie,{handleEditItem:_,key:d.id,transaction:d})):e.createElement("div",{className:x.empty_transactions},"No transactions")),i&&e.createElement(e.Fragment,null,r.length>0?e.createElement("table",{className:x.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:x.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:x.table_body},r.map(d=>e.createElement(Ie,{handleEditItem:_,key:d.id,transaction:d})))):e.createElement(e.Fragment,null,e.createElement("table",{className:x.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:x.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:x.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>p(),className:x.btn_add}," ",e.createElement("svg",{className:x.icon_plus},e.createElement("use",{xlinkHref:`${k}#icon-plus`})))),n&&e.createElement(ze,{closeModal:t},a?e.createElement(Aa,{editContent:a,categories:c,toggle:t}):e.createElement(Fa,{categories:c,toggle:t})))},gs=()=>{const n=L(),t=ve().windowWidth;return u.useEffect(()=>{n(J())},[n]),e.createElement(e.Fragment,null,t<768&&e.createElement(qe,null),e.createElement(_s,null))},ps="_selectContainers_1uewu_1",Es="_select_1uewu_1",hs="_option_1uewu_17",F={selectContainers:ps,select:Es,option:hs},bs=({onMonthChange:n,onYearChange:t})=>{const a=new Date,s=a.getFullYear(),[r,c]=u.useState(a.getMonth()+1),[i,g]=u.useState(s),_=o=>{c(parseInt(o.target.value)),n(parseInt(o.target.value))},p=o=>{g(parseInt(o.target.value)),t(parseInt(o.target.value))},d=Array.from({length:s-2019},(o,w)=>s-w).reverse(),f=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.createElement("div",{className:F.selectContainers},e.createElement("select",{className:F.select,value:r,onChange:_},f.map((o,w)=>e.createElement("option",{className:F.option,key:w+1,value:w+1},o))),e.createElement("select",{className:F.select,value:i,onChange:p},d.map(o=>e.createElement("option",{className:F.option,key:o,value:o},o))))},vs="_statisticsContainer_t8y9x_1",ys="_title_t8y9x_27",ws="_tableContainer_t8y9x_33",fs="_contentContainer_t8y9x_60",U={statisticsContainer:vs,title:ys,tableContainer:ws,contentContainer:fs},Ns="_tableContainer_g4cyy_1",Cs="_table_g4cyy_1",xs="_tableHeader_g4cyy_12",ks="_tableCell_g4cyy_25",Ss="_tableRow_g4cyy_33",Is="_paragraphContainer_g4cyy_37",Ts="_paragraph_g4cyy_37",C={tableContainer:Ns,table:Cs,tableHeader:xs,tableCell:ks,tableRow:Ss,paragraphContainer:Is,paragraph:Ts},Ls=({transactionsSummary:n,colors:t,incomeSummary:a,expenseSummary:s})=>e.createElement("div",{className:C.tableContainer},e.createElement("table",{className:C.table},e.createElement("thead",{className:C.tableHeader},e.createElement("tr",null,e.createElement("th",{className:C.tableCell}),e.createElement("th",{className:C.tableCell},"Category"),e.createElement("th",{className:C.tableCell},"Sum"))),e.createElement("tbody",null,n.map((r,c)=>e.createElement("tr",{key:c,className:C.tableRow},e.createElement("td",{className:C.tableCell,style:{backgroundColor:t[r.name]}}),e.createElement("td",{className:C.tableCell},r.name),e.createElement("td",{className:C.tableCell},r.total))))),e.createElement("div",{className:C.paragraphContainer},e.createElement("p",{className:C.paragraph},"Income: ",a),e.createElement("p",{className:C.paragraph},"Expenses: ",s))),$s="_chartWrapper_1hlm6_1",Rs="_doughnut_1hlm6_5",Ds="_periodText_1hlm6_9",_e={chartWrapper:$s,doughnut:Rs,periodText:Ds},Bs=({transactions:n,colors:t,period:a})=>{if(!n||!t)return e.createElement("div",null,"No data available");const s=a.toFixed(2),r={datasets:[{data:n==null?void 0:n.map(c=>c.total),backgroundColor:n==null?void 0:n.map(c=>t[c.name]),hoverBackgroundColor:n==null?void 0:n.map(c=>t[c.name]),cutout:95}]};return e.createElement("div",{className:_e.chartWrapper},e.createElement(st,{data:r,className:_e.doughnut}),e.createElement("p",{className:_e.periodText}," ₴ ",s))},Ms=()=>{const n=L(),t=h(ma),a=h(da),s=h(ua),r=h(_a),[c,i]=u.useState(new Date().getMonth()+1),[g,_]=u.useState(new Date().getFullYear()),[p,d]=u.useState({});u.useEffect(()=>{n(ne({month:c,year:g}))},[c,g,n]);const f=()=>{const N={};t==null||t.forEach(({name:P,index:q})=>{N[P]=`#${Math.floor(Math.random()*16777215).toString(16)}`}),d(N)};u.useEffect(()=>{f()},[t]);const o=N=>{i(N)},w=N=>{_(N)};return e.createElement("section",{className:U.statisticsContainer},e.createElement("h2",{className:U.title},"Statistics"),e.createElement("div",{className:U.contentContainer},e.createElement(Bs,{transactions:t,period:r,colors:p}),e.createElement("div",{className:U.tableContainer},e.createElement(bs,{onMonthChange:o,onYearChange:w}),e.createElement(Ls,{transactionsSummary:t,colors:p,incomeSummary:a,expenseSummary:s}))))},ge=({component:n,redirectTo:t="/"})=>h(ce)?e.createElement(n,null):e.createElement(ae,{to:t}),Te=({component:n,redirectTo:t="/"})=>h(ce)?e.createElement(ae,{to:t}):e.createElement(n,null);function Ws(){const n=h(ce),t=h(xt),{isDesktopOrLaptop:a,isBigScreen:s,isTabletOrMobile:r,isRetina:c,isMobile:i}=H(),g=L();return i&&console.log("ok"),u.useEffect(()=>{g(Q()),g(te())},[g]),t?e.createElement(se,null):e.createElement(e.Fragment,null,e.createElement(u.Suspense,{fallback:e.createElement(se,null)},e.createElement(rt,null,e.createElement(R,{index:!0,element:e.createElement(Te,{component:sa,redirectTo:"/home"})}),e.createElement(R,{path:"register",element:e.createElement(Te,{component:ca,redirectTo:"/home"})}),e.createElement(R,{path:"/",element:e.createElement(xn,null)},e.createElement(R,{path:"/home",element:e.createElement(ge,{component:gs,redirectTo:"/"})}),e.createElement(R,{path:"/statistics",element:e.createElement(ge,{component:Ms,redirectTo:"/"})}),i&&e.createElement(R,{path:"/currency",element:e.createElement(ge,{component:Fe,redirectTo:"/"})})),e.createElement(R,{path:"*",element:n?e.createElement(ae,{to:"/home"}):e.createElement(ae,{to:"/"})}))))}const zs={key:"auth",version:1,storage:Me,whitelist:["token"]},Ps={key:"root",storage:Me},Ve=ct({reducer:{auth:fe(zs,Nt),transactions:la,currency:fe(Ps,Zt)},middleware:n=>n({serializableCheck:{ignoredActions:[ot,lt,it,mt,ut,dt]}}),devTools:!1}),qs=_t(Ve);gt.createRoot(document.getElementById("root")).render(e.createElement(pt,{basename:"/money_guard_project"},e.createElement(Et,{store:Ve},e.createElement(ht,{loading:null,persistor:qs},e.createElement(Ws,null),e.createElement(bt,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
