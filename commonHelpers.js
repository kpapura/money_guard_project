import{a as Ce,c as x,b as oe,i as q,u as w,R as e,N as Q,d as le,e as T,r as m,f as Oe,g as W,O as ge,_ as Fe,P as Ye,h as Ve,j as Se,o as xe,k as ie,l as S,B as $,m as He,n as j,S as Ue,D as Xe,p as Ge,q as ee,s as Qe,t as D,v as Je,w as Ee,F as Ke,x as Ze,y as et,z as tt,A as nt,C as at,E as st,G as Ie,H as rt,I as ct,J as ot,K as lt,Q as it}from"./assets/vendor-c14cb9d8.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const N=Ce.create({baseURL:"https://wallet.b.goit.study/api/"}),me=n=>{N.defaults.headers.common.Authorization=`Bearer ${n}`},mt=()=>{N.defaults.headers.common.Authorization=""},O=x("register",async(n,t)=>{try{const{data:a}=await N.post("auth/sign-up",n);return me(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),F=x("login",async(n,t)=>{try{const{data:a}=await N.post("auth/sign-in",n);return me(a.token),a}catch(a){return console.log(a),t.rejectWithValue(a.response.data.message)}}),Te=x("logout",async(n,t)=>{try{const{data:a}=await N.delete("auth/sign-out");return mt(),a}catch(a){return t.rejectWithValue(a.message)}}),te=x("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{me(a);const{data:s}=await N.get("users/current");return console.log(s),s}catch(s){return t.rejectWithValue(s.message)}}),ne={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},ue=oe({name:"auth",initialState:ne,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>ne},extraReducers:n=>{n.addCase(Te.fulfilled,t=>ne).addCase(te.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(q(O.fulfilled,F.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(q(O.pending,F.pending,te.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(q(O.rejected,F.rejected,te.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),ut=ue.reducer,{selectIsLoggedIn:J,selectUser:dt,selectToken:ss,selectIsRefresh:_t,selectBalance:rs,selectIsLoading:cs}=ue.selectors,{logout:gt}=ue.actions,ae=({component:n,redirectTo:t="/"})=>w(J)?e.createElement(n,null):e.createElement(Q,{to:t}),pe=({component:n,redirectTo:t="/"})=>w(J)?e.createElement(Q,{to:t}):e.createElement(n,null),Et="_wrap_1nzyu_1",pt="_logo_1nzyu_5",ht="_text_1nzyu_14",se={wrap:Et,logo:pt,text:ht},bt=({closeModal:n})=>{const t=le(),a=T(),s=()=>{a(Te()),a(gt()),n(),t("/")};return e.createElement("div",{className:se.wrap},e.createElement("a",{href:"",className:se.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:se.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},ft="_closeButton_11uif_2",wt="_modalContent_11uif_13",yt="_modalWrapper_11uif_33",re={closeButton:ft,modalContent:wt,modalWrapper:yt},Nt=document.querySelector("#modal"),ke=({closeModal:n,children:t})=>{const a=m.useCallback(r=>{r.key==="Escape"&&n()},[n]);m.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=r=>{r.target===r.currentTarget&&n()};return Oe.createPortal(e.createElement("div",{onClick:s,className:re.modalWrapper},e.createElement("div",{className:re.modalContent},e.createElement("button",{className:re.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),Nt)},Re=()=>{const[n,t]=m.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(c=>!c)}},vt="_header_1snvw_1",Ct="_hederContainer_1snvw_9",St="_logo_1snvw_17",xt="_wrap_1snvw_27",It="_user_1snvw_32",Tt="_button_1snvw_38",kt="_icon_1snvw_52",Rt="_heder_1snvw_9",L={header:vt,hederContainer:Ct,logo:St,wrap:xt,user:It,button:Tt,icon:kt,heder:Rt},Dt=()=>{const{isOpen:n,toggle:t}=Re(),a=w(dt),s=a.email.indexOf("@"),r=a.email.slice(0,s);return e.createElement("header",{className:L.header},e.createElement("div",{className:L.hederContainer},e.createElement("a",{href:"",className:L.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("div",{className:L.wrap}," ",e.createElement("p",{className:L.user},r),e.createElement("button",{className:L.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:L.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement(ke,{closeModal:t},e.createElement(bt,{closeModal:t}))))},De=()=>{const[n,t]=m.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return m.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Lt=()=>{const n=De().windowWidth;return e.createElement("div",null,e.createElement(W,{to:"home"},"Home"),e.createElement(W,{to:"statistics"},"Statistics"),n<768&&e.createElement(W,{to:"/currency"},"Currency"))},jt=()=>w(J)?e.createElement(e.Fragment,null,e.createElement(Dt,null),e.createElement(Lt,null),e.createElement(ge,null)):e.createElement(e.Fragment,null,e.createElement(ge,null)),Mt="_login_register_section_1c8bj_1",$t="_register_login_section_1c8bj_2",Bt="_background_container_login_1c8bj_13",zt="_background_container_registration_1c8bj_14",Pt="_gradient_container_1c8bj_163",qt="_form_container_1c8bj_171",Wt="_form_1c8bj_171",At="_submit_btn_1c8bj_210",Ot="_inactive_btn_1c8bj_230",Ft="_password_label_1c8bj_247",Yt="_password_input_1c8bj_256",Vt="_error_container_1c8bj_267",Ht="_username_1c8bj_271",Ut="_email_1c8bj_277",Xt="_password_1c8bj_247",Gt="_cpassword_1c8bj_289",Qt="_eye_1c8bj_304",Jt="_name_label_1c8bj_308",Kt="_name_input_1c8bj_316",Zt="_name_user_icon_1c8bj_335",en="_icon_email_cont_1c8bj_339",tn="_password_icon_1c8bj_343",nn="_button_cont_1c8bj_347",an="_strengthBar_1c8bj_353",sn="_porgress_container_1c8bj_373",rn="_logo_wrapper_1c8bj_378",cn="_background_img_container_login_1c8bj_551",on="_background_img_container_registration_1c8bj_552",ln="_background_container_1c8bj_13",i={login_register_section:Mt,register_login_section:$t,background_container_login:Bt,background_container_registration:zt,gradient_container:Pt,form_container:qt,form:Wt,submit_btn:At,inactive_btn:Ot,password_label:Ft,password_input:Yt,error_container:Vt,username:Ht,email:Ut,password:Xt,cpassword:Gt,eye:Qt,name_label:Jt,name_input:Kt,name_user_icon:Zt,icon_email_cont:en,password_icon:tn,button_cont:nn,strengthBar:an,porgress_container:sn,logo_wrapper:rn,background_img_container_login:cn,background_img_container_registration:on,background_container:ln},he=({register:n,errors:t,name:a,placeholder:s,className:r})=>e.createElement(e.Fragment,null,e.createElement("div",{className:i.error_container},e.createElement("label",{className:i.name_label},a==="username"?e.createElement("div",{className:i.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:i.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:i.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:i[r]},t[a].message))),mn=({password:n})=>e.createElement("div",{className:i.porgress_container},e.createElement(Fe,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:i.strengthBar})),be=({register:n,errors:t,name:a,placeholder:s,getValues:r,formType:c,className:u})=>{const[E,o]=m.useState("password"),[g,d]=m.useState("");function v(_){d(_.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:i.error_container},e.createElement("label",{className:i.password_label},e.createElement("div",{className:i.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:_=>_===r("password")||"Passwords do not match"}),type:E,placeholder:s,onChange:v,className:i.password_input})," ",e.createElement("div",{className:i.eye,onClick:()=>{o(E==="password"?"text":"password")}},E==="password"?e.createElement(Ye,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Ve,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:i[u]},t[a].message)),a==="password"&&c!=="login"&&e.createElement(mn,{password:g}))},Le=({onDataSubmit:n,formType:t,schema:a})=>{const[s,r]=m.useState(0);m.useEffect(()=>{const d=()=>{r(window.innerWidth)};return window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]);const{register:c,reset:u,handleSubmit:E,formState:{errors:o}}=Se({resolver:xe(a)}),g=d=>{const{passwordConfirmation:v,..._}=d;n(_),u()};return e.createElement(e.Fragment,null,e.createElement("section",{className:t==="login"?`${i.login_register_section}`:`${i.register_login_section}`},t==="login"?e.createElement(e.Fragment,null,e.createElement("div",{className:i.background_img_container_login},e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:i.background_container_login},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))):e.createElement(e.Fragment,null,e.createElement("div",{className:i.background_container_registration},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:i.background_img_container_registration},e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:i.form_container,style:{padding:s<768&&t==="login"?"98px 20px":s>768&&t==="login"?"80px 62px":"40px 62px"}},e.createElement("a",{href:"",className:i.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("form",{className:i.form,onSubmit:E(g)},t==="register"&&e.createElement(he,{register:c,errors:o,name:"username",placeholder:"Name",className:"username"}),e.createElement(he,{register:c,errors:o,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(be,{register:c,errors:o,name:"password",placeholder:"Password",onChange:d=>handleChange(d),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(be,{register:c,errors:o,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:i.button_cont},e.createElement("button",{className:i.submit_btn,type:"submit"},"log in"),e.createElement(W,{className:i.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:i.button_cont},e.createElement("button",{className:i.submit_btn,type:"submit"},"register"),e.createElement(W,{className:i.inactive_btn,to:"/login"},"log in"))," "))))},un=ie({password:S().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:S().required().email("Email is not valid")}).required(),dn=()=>{const n=le(),t=T(),a=r=>{t(F(r)).unwrap().then(()=>{n("/home")}).catch(c=>{console.log(c.message),$(c)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement("div",null,e.createElement(Le,{formType:"login",onDataSubmit:a,values:s,schema:un}))},_n=ie({username:S().required(),password:S().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:S().required().email("Email is not valid"),passwordConfirmation:S().oneOf([He("password"),null],"Passwords must match")}).required(),gn="_registerWrapper_15m0u_1",En={registerWrapper:gn},pn=()=>{const n=T(),t=le(),a=s=>{n(O(s)).unwrap().then(()=>{t("/home")}).catch(r=>{console.log(r),$(r)})};return e.createElement("div",{className:En.registerWrapper},e.createElement(Le,{onDataSubmit:a,formType:"register",schema:_n}))},Y=x("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await N.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),V=x("deleteTransaction",async(n,t)=>{try{return await N.delete(`transactions/${n}`),n}catch(a){return t.rejectWithValue(a.message)}}),H=x("addTransaction",async(n,t)=>{try{const{data:a}=await N.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),U=x("editTransaction",async(n,t)=>{try{const{data:a}=await N.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),X=x("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await N.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),G=x("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await N.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),de=()=>{const n=j.useMediaQuery({query:"(min-width: 768px)"}),t=j.useMediaQuery({query:"(min-width: 1280px)"}),a=j.useMediaQuery({query:"(max-width: 768px)"}),s=j.useMediaQuery({query:"(max-width: 767px)"}),r=j.useMediaQuery({query:"(orientation: portrait)"}),c=j.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:r,isRetina:c}},hn={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},_e=oe({name:"transactions",initialState:hn,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(Y.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(V.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a),t.loading=!1}).addCase(H.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(U.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(r=>r.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(X.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(G.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(q(Y.pending,V.pending,H.pending,U.pending,X.pending,G.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(q(Y.rejected,V.rejected,H.rejected,U.rejected,X.rejected,G.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),bn=_e.reducer;_e.actions;const{selectTransactions:fn,selectIsLoading:os,selectIsError:ls,selectTransactionCategories:je,selectYear:is,selectMonth:ms,selectCategoriesSummary:wn,selectExpenseSummary:us,selectIncomeSummary:ds,selectPeriodTotal:_s}=_e.selectors,yn="_labelExpense_c530i_8",Nn="_labelIncome_c530i_15",vn="_activeIncome_c530i_46",Cn="_activeExpense_c530i_53",Sn="_slider_c530i_59",xn="_round_c530i_106",I={"transaction-switcher":"_transaction-switcher_c530i_2",switch:"_switch_c530i_22",labelExpense:yn,labelIncome:Nn,activeIncome:vn,activeExpense:Cn,slider:Sn,round:xn},In=({onChange:n})=>{const[t,a]=m.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:I["transaction-switcher"]},e.createElement("span",{className:t?I.activeIncome:I.labelIncome},"Income"),e.createElement("label",{className:`${I.switch} ${t?I.income:I.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${I.slider} ${I.round}`})),e.createElement("span",{className:t?I.labelExpense:I.activeExpense},"Expense"))},Tn="_container_qwzc8_2",kn="_formWrapper_qwzc8_13",Rn="_header_qwzc8_21",Dn="_secondContainer_qwzc8_27",Ln="_category_qwzc8_30",jn="_boxDate_qwzc8_43",Mn="_incomeInput_qwzc8_52",$n="_customInput_qwzc8_53",Bn="_svgBox_qwzc8_70",zn="_comment_qwzc8_91",Pn="_selectExpense_qwzc8_92",qn="_btnBox_qwzc8_108",Wn="_checkBox_qwzc8_147",f={container:Tn,formWrapper:kn,header:Rn,secondContainer:Dn,category:Ln,boxDate:jn,incomeInput:Mn,customInput:$n,svgBox:Bn,comment:zn,selectExpense:Pn,btnBox:qn,checkBox:Wn},fe=n=>n<10?"0"+n:n,we=n=>{const t=n.getFullYear(),a=fe(n.getMonth()+1),s=fe(n.getDate());return`${t}-${a}-${s}`},ye=({name:n,register:t,errors:a,placeholder:s,className:r})=>e.createElement("div",{className:f.inputContainer},e.createElement("input",{className:r,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message));function Me({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:r,schema:c}){const{register:u,handleSubmit:E,formState:{errors:o},setValue:g,reset:d}=Se({resolver:xe(c)}),[v,_]=m.useState(""),[h,R]=m.useState(""),[B,A]=m.useState(new Date);m.useEffect(()=>{R(n?n.type:"EXPENSE")},[n]),m.useEffect(()=>{g("amount",n&&n.amount)},[n,g]),m.useEffect(()=>{g("comment",n&&n.comment)},[n,g]);const k=m.useMemo(()=>t.map(({id:b,name:Ae})=>({value:b,label:Ae})),[t]),z=m.useMemo(()=>k.find(b=>(n==null?void 0:n.categoryId)===b.value),[n,k]),K=b=>{_(b)},We=b=>{s==="add"?(r({transactionDate:we(B),amount:+b.amount,comment:b.comment,type:h,categoryId:h==="EXPENSE"?v.value||k[0].value:"063f1132-ba5d-42b4-951d-44011ca46262"}),d()):(r({transactionDate:we(B),amount:+b.amount,comment:b.comment}),d()),d()},Z=b=>{R(b?"INCOME":"EXPENSE")};return e.createElement("div",{className:f.container},e.createElement("form",{className:f.formWrapper,onSubmit:E(We)},e.createElement("h1",{className:f.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(In,{onChange:Z}):e.createElement("div",null,e.createElement("ul",{className:f.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&h==="EXPENSE"||Z(!0)},className:n.type==="INCOME"||h==="INCOME"?f.activeIncome:"",disabled:s==="edit"&&h==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&h==="INCOME"||Z(!1)},className:h==="EXPENSE"?f.activeExpense:"",disabled:s==="edit"&&h==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:f.secondContainer},h==="EXPENSE"&&e.createElement("div",{className:f.category},e.createElement(Ue,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:k,placeholder:"Select category",defaultValue:z&&z,onChange:K,isDisabled:s==="edit"}),o.category&&e.createElement("span",null,o.category.message)),e.createElement("div",{className:f.boxDate},e.createElement(ye,{className:f.incomeInput,name:"amount",placeholder:"0.00",errors:o,register:u}),e.createElement("div",{className:f.svgBox},e.createElement(Xe,{className:f.customInput,selected:n?n.transactionDate:B,onChange:b=>{g("transactionDate",b),A(b)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-date"})),o.transactionDate&&e.createElement("span",null,o.transactionDate.message))),e.createElement(ye,{className:f.comment,name:"comment",placeholder:"Comment",errors:o,register:u}),e.createElement("div",{className:f.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}function An({categories:n,editContent:t,toggle:a}){const s=T(),r=c=>{s(U({content:{...c},id:t.id})).unwrap().then(u=>{$.success("Changed!"),a()}).catch(u=>{$.error("Credentials is not valid!")})};return e.createElement(Me,{toggle:a,content:t.content,categories:n,onDataSubmit:r,typeForm:"edit"})}const On=ie({comment:S().required("Describe your transaction").min(5,"Give more details"),transactionDate:Ge().required("Please choose the date"),type:S().oneOf(["INCOME","EXPENSE"]).required(),category:S().when("type",{is:"EXPENSE",then:S().required("Category is required for expenses"),otherwise:S().notRequired()})}).shape({amount:ee().typeError("Amount must be a number").required("Please enter the amount").when("type",{is:"EXPENSE",then:ee().negative("The amount must be negative"),otherwise:ee().positive("The amount must be positive")})}).required();function Fn({categories:n,toggle:t}){const a=T(),s=r=>{a(H(r)).unwrap().then(()=>{$.success("Transaction was successfully added"),t()}).catch(c=>{$.error("Credentials is not valid!")})};return e.createElement(Me,{schema:On,categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const $e="/money_guard_project/assets/sprite-d3dedbbb.svg",Yn="_transaction_item_1bzo6_1",Vn="_income_border_1bzo6_6",Hn="_expense_border_1bzo6_10",Un="_income_text_1bzo6_14",Xn="_expense_text_1bzo6_19",Gn="_transactions_table_mobile_1bzo6_24",Qn="_transaction_colum_1bzo6_30",Jn="_transaction_first_column_1bzo6_34",Kn="_transaction_row_mobile_1bzo6_38",Zn="_transaction_row_1bzo6_38",ea="_table_body_1bzo6_57",ta="_btn_delete_1bzo6_61",na="_btn_edit_1bzo6_76",aa="_btn_wrapper_1bzo6_86",sa="_icon_edit_1bzo6_93",l={transaction_item:Yn,income_border:Vn,expense_border:Hn,income_text:Un,expense_text:Xn,transactions_table_mobile:Gn,transaction_colum:Qn,transaction_first_column:Jn,transaction_row_mobile:Kn,transaction_row:Zn,table_body:ea,btn_delete:ta,btn_edit:na,btn_wrapper:aa,icon_edit:sa},Ne=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:r,categoryId:c,comment:u,amount:E}=n,{isBigScreenOrTablet:o,isMobile:g}=de(),d=T(),v=w(je);function _(k){const z=v.find(K=>K.id===k);return z?z.name:"Unknown Category"}const h=k=>{d(V(k))},R=r.toLowerCase()==="income"?"+":"-",B=r.toLowerCase()==="income"?l.income_border:l.expense_border,A=r.toLowerCase()==="income"?l.income_text:l.expense_text;return e.createElement(e.Fragment,null,g&&e.createElement("li",{key:a,className:`${l.transaction_item} ${B}`},e.createElement("table",{className:l.transactions_table_mobile},e.createElement("tbody",{className:l.table_body},e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Type"),e.createElement("td",null,R)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Category"),e.createElement("td",null,_(c))),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Comment"),e.createElement("td",null,u)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Sum"),e.createElement("td",{className:A},E)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:l.btn_delete,onClick:()=>h(a)},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:E,comment:u,transactionDate:s},a),className:l.btn_edit},e.createElement("svg",{className:l.icon_edit},e.createElement("use",{xlinkHref:`${$e}#icon-edit`}))," ","Edit")))))),o&&e.createElement("tr",{className:l.transaction_row},e.createElement("td",{className:l.transaction_colum},s),e.createElement("td",{className:l.transaction_colum,style:{textAlign:"center"}},R),e.createElement("td",{className:l.transaction_colum},_(c)),e.createElement("td",{className:l.transaction_colum},u),e.createElement("td",{className:`${l.transaction_colum} ${A}`,style:{textAlign:"right"}},E),e.createElement("td",{className:l.transaction_colum},e.createElement("div",{className:l.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:E,comment:u,transactionDate:s},a),className:l.btn_edit},"Edit"),e.createElement("button",{className:l.btn_delete,onClick:()=>h(a)},"Delete")))))},ra="_transactions_section_smf2v_1",ca="_transactions_container_smf2v_34",oa="_transactions_table_smf2v_85",la="_transactions_list_smf2v_92",ia="_transaction_row_head_smf2v_98",ma="_table_body_smf2v_121",ua="_btn_add_smf2v_125",da="_icon_plus_smf2v_140",_a="_empty_transactions_smf2v_146",y={transactions_section:ra,transactions_container:ca,transactions_table:oa,transactions_list:la,transaction_row_head:ia,table_body:ma,btn_add:ua,icon_plus:da,empty_transactions:_a},ga=()=>{const{isOpen:n,toggle:t}=Re(),[a,s]=m.useState(""),r=w(fn),c=w(je),{isBigScreenOrTablet:u,isMobile:E}=de();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const o=(d,v,_)=>{t(),s({content:d,id:v,name:_}),n&&document.body.classList.add("modal-open")},g=()=>{t(),s(null)};return e.createElement("section",{className:y.transactions_section},e.createElement("div",{className:y.transactions_container},E&&e.createElement("ul",{className:y.transactions_list},r.length>0?r.map(d=>e.createElement(Ne,{handleEditItem:o,key:d.id,transaction:d})):e.createElement("div",{className:y.empty_transactions},"No transactions")),u&&e.createElement(e.Fragment,null,r.length>0?e.createElement("table",{className:y.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:y.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:y.table_body},r.map(d=>e.createElement(Ne,{handleEditItem:o,key:d.id,transaction:d})))):e.createElement(e.Fragment,null,e.createElement("table",{className:y.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:y.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:y.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>g(),className:y.btn_add}," ",e.createElement("svg",{className:y.icon_plus},e.createElement("use",{xlinkHref:`${$e}#icon-plus`})))),n&&e.createElement(ke,{closeModal:t},a?e.createElement(An,{editContent:a,categories:c,toggle:t}):e.createElement(Fn,{categories:c,toggle:t})))},Be=x("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await Ce.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),Ea={usdRate:null,eurRate:null,lastFetchTime:null},ze=oe({name:"currency",initialState:Ea,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(Be.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),pa=ze.reducer,{selectUsdRate:ha,selectEurRate:ba,selectLastFetchTime:fa}=ze.selectors,wa="_wrapper_d2ubo_14",ya="_title_d2ubo_49",Na="_row_d2ubo_79",va="_titleItem_d2ubo_97",Ca="_rowItem_d2ubo_98",Sa="_vector_d2ubo_104",xa="_image_d2ubo_109",Ia="_secondimage_d2ubo_132",Ta="_smallnumeur_d2ubo_148",ka="_smallnumusd_d2ubo_158",p={wrapper:wa,title:ya,row:Na,titleItem:va,rowItem:Ca,vector:Sa,image:xa,secondimage:Ia,smallnumeur:Ta,smallnumusd:ka};function Pe(){const n=T(),t=w(ha),a=w(ba),s=w(fa),{isDesktopOrLaptop:r,isBigScreen:c,isTabletOrMobile:u,isRetina:E}=de();let o="../../img/images/currency_mobile.webp",g="../../img/images/line_desc_mob_1x.webp";return window.devicePixelRatio>=2?r||c?(o="../../img/images/currency_desk@2x.webp",g="../../img/images/line_desc_2x.webp"):u&&(o="../../img/images/currency_tablet@2x.webp",g="../../img/images/line_desc_tab_2x.webp"):r||c?(o="../../img/images/currency_desk.webp",g="../../img/images/line_desc_1x.webp"):u&&(o="../../img/images/currency_tablet.webp",g="../../img/images/line_desc_tab_1x.webp"),m.useEffect(()=>{(new Date().getTime()-s)/(1e3*60*60)>1&&n(Be())},[n,s]),e.createElement("div",{className:p.wrapper},e.createElement("div",{className:p.secondwrapper},e.createElement("ul",{className:p.title},e.createElement("li",{className:p.titleItem},"Currency"),e.createElement("li",{className:p.titleItem},"Purchase"),e.createElement("li",{className:p.titleItem},"Sale")),t&&e.createElement("ul",{className:p.row},e.createElement("li",{className:p.rowItem},"USD"),e.createElement("li",{className:p.rowItem},t.rateBuy),e.createElement("li",{className:p.rowItem},t.rateSell)),a&&e.createElement("ul",{className:p.row},e.createElement("li",{className:p.rowItem},"EUR"),e.createElement("li",{className:p.rowItem},a.rateBuy),e.createElement("li",{className:p.rowItem},a.rateSell)),r&&e.createElement(e.Fragment,null,e.createElement("p",{className:p.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:p.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:p.image,src:o,alt:"Currency rate"}),e.createElement("img",{className:p.secondimage,src:g,alt:"Currency rate"})))}const Ra=()=>{const n=De().windowWidth,t=T();return m.useEffect(()=>{t(Y())},[t]),m.useEffect(()=>{t(X())},[t]),e.createElement(e.Fragment,null,n>=768&&e.createElement(Pe,null),e.createElement(ga,null))},Da="_loaderWrapper_1hccn_1",La="_loader_1hccn_1",ja="_spinner_1hccn_1",Ma="_loaderName_1hccn_34",ce={loaderWrapper:Da,loader:La,spinner:ja,loaderName:Ma},ve=()=>e.createElement("div",{className:ce.loaderWrapper},e.createElement("div",{className:ce.loader},e.createElement("span",{className:ce.loaderName}))),$a="_selectContainers_1ftgu_1",Ba="_select_1ftgu_1",za="_option_1ftgu_19",P={selectContainers:$a,select:Ba,option:za},Pa=({onMonthChange:n,onYearChange:t})=>{const a=new Date,s=a.getFullYear(),[r,c]=m.useState(a.getMonth()+1),[u,E]=m.useState(s),o=_=>{c(parseInt(_.target.value)),n(parseInt(_.target.value))},g=_=>{E(parseInt(_.target.value)),t(parseInt(_.target.value))},d=Array.from({length:s-2019},(_,h)=>s-h).reverse(),v=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.createElement("div",{className:P.selectContainers},e.createElement("select",{className:P.select,value:r,onChange:o},v.map((_,h)=>e.createElement("option",{className:P.option,key:h+1,value:h+1},_))),e.createElement("select",{className:P.select,value:u,onChange:g},d.map(_=>e.createElement("option",{className:P.option,key:_,value:_},_))))},qa="_statisticsContainer_12lnp_1",Wa="_chartContainer_12lnp_27",Aa="_title_12lnp_31",Oa="_tableContainer_12lnp_36",Fa="_contentContainer_12lnp_59",M={statisticsContainer:qa,chartContainer:Wa,title:Aa,tableContainer:Oa,contentContainer:Fa},Ya="_tableContainer_g4cyy_1",Va="_table_g4cyy_1",Ha="_tableHeader_g4cyy_12",Ua="_tableCell_g4cyy_25",Xa="_tableRow_g4cyy_33",Ga="_paragraphContainer_g4cyy_37",Qa="_paragraph_g4cyy_37",C={tableContainer:Ya,table:Va,tableHeader:Ha,tableCell:Ua,tableRow:Xa,paragraphContainer:Ga,paragraph:Qa},Ja=({transactionsSummary:n})=>{const t=(n==null?void 0:n.categoriesSummary)||[],a=(n==null?void 0:n.incomeSummary)||0,s=(n==null?void 0:n.expenseSummary)||0;return e.createElement("div",{className:C.tableContainer},e.createElement("table",{className:C.table},e.createElement("thead",{className:C.tableHeader},e.createElement("tr",null,e.createElement("th",{className:C.tableCell},"Category"),e.createElement("th",{className:C.tableCell},"Sum"))),e.createElement("tbody",null,t.map((r,c)=>e.createElement("tr",{key:c,className:C.tableRow},e.createElement("td",{className:C.tableCell},r.name),e.createElement("td",{className:C.tableCell},r.total))))),e.createElement("div",{className:C.paragraphContainer},e.createElement("p",{className:C.paragraph},"Income: ",a),e.createElement("p",{className:C.paragraph},"Expenses: ",s)))},Ka=()=>{const n=T(),t=w(wn),[a,s]=m.useState(new Date().getMonth()+1),[r,c]=m.useState(new Date().getFullYear());m.useEffect(()=>{n(G({month:a,year:r}))},[a,r,n]);const u=o=>{s(o)},E=o=>{c(o)};return e.createElement("section",{className:M.statisticsContainer},e.createElement("div",{className:M.titleContainer},e.createElement("h2",{className:M.title},"Statistics")),e.createElement("div",{className:M.contentContainer},e.createElement("div",{className:M.chartContainer}),e.createElement("div",{className:M.tableContainer},e.createElement(Pa,{onMonthChange:u,onYearChange:E}),e.createElement(Ja,{transactionsSummary:t}))))};function Za(){const n=w(J),t=w(_t);return T(),t?e.createElement(ve,null):e.createElement(e.Fragment,null,e.createElement(m.Suspense,{fallback:e.createElement(ve,null)},e.createElement(Qe,null,e.createElement(D,{path:"/",element:e.createElement(jt,null)},e.createElement(D,{index:!0,element:e.createElement(pe,{component:dn,redirectTo:"/home"})}),e.createElement(D,{path:"register",element:e.createElement(pe,{component:pn,redirectTo:"/home"})}),e.createElement(D,{path:"/home",element:e.createElement(ae,{component:Ra,redirectTo:"/"})}),e.createElement(D,{path:"/statistics",element:e.createElement(ae,{component:Ka,redirectTo:"/"})}),e.createElement(D,{path:"/currency",element:e.createElement(ae,{component:Pe,redirectTo:"/"})})),e.createElement(D,{path:"*",element:n?e.createElement(Q,{to:"/home"}):e.createElement(Q,{to:"/"})}))))}const es={key:"auth",version:1,storage:Ie,whitelist:["token"]},ts={key:"root",storage:Ie},qe=Je({reducer:{auth:Ee(es,ut),transactions:bn,currency:Ee(ts,pa)},middleware:n=>n({serializableCheck:{ignoredActions:[Ke,Ze,et,tt,nt,at]}}),devTools:!1}),ns=st(qe);rt.createRoot(document.getElementById("root")).render(e.createElement(ct,null,e.createElement(ot,{store:qe},e.createElement(lt,{loading:null,persistor:ns},e.createElement(Za,null),e.createElement(it,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
