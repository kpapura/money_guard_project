import{a as Ce,c as x,b as le,i as z,u as y,R as e,N as K,d as ie,e as I,r as i,f as ze,g as M,h as L,O as ge,_ as Fe,P as qe,j as Ye,k as ke,o as Ve,l as xe,m as P,B as A,n as He,p as B,S as Ue,D as Ge,q as Qe,s as Xe,t as R,v as Je,w as Ee,F as Ke,x as Ze,y as et,z as tt,A as nt,C as at,E as st,G as Se,H as ct,I as rt,J as ot,K as lt,Q as it}from"./assets/vendor-a3895937.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerPolicy&&(r.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?r.credentials="include":c.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(c){if(c.ep)return;c.ep=!0;const r=a(c);fetch(c.href,r)}})();const k=Ce.create({baseURL:"https://wallet.b.goit.study/api/"}),me=n=>{k.defaults.headers.common.Authorization=`Bearer ${n}`},mt=()=>{k.defaults.headers.common.Authorization=""},q=x("register",async(n,t)=>{try{const{data:a}=await k.post("auth/sign-up",n);return me(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),Y=x("login",async(n,t)=>{try{const{data:a}=await k.post("auth/sign-in",n);return me(a.token),a}catch(a){return console.log(a),t.rejectWithValue(a.response.data.message)}}),Ie=x("logout",async(n,t)=>{try{const{data:a}=await k.delete("auth/sign-out");return mt(),a}catch(a){return t.rejectWithValue(a.message)}}),V=x("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{me(a);const{data:s}=await k.get("users/current");return console.log(s),s}catch(s){return t.rejectWithValue(s.message)}}),ae={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},de=le({name:"auth",initialState:ae,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>ae},extraReducers:n=>{n.addCase(Ie.fulfilled,t=>ae).addCase(V.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(z(q.fulfilled,Y.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(z(q.pending,Y.pending,V.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(z(q.rejected,Y.rejected,V.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),dt=de.reducer,{selectIsLoggedIn:Z,selectUser:ut,selectToken:us,selectIsRefresh:_t,selectBalance:_s,selectIsLoading:gs}=de.selectors,{logout:gt}=de.actions,se=({component:n,redirectTo:t="/"})=>y(Z)?e.createElement(n,null):e.createElement(K,{to:t}),pe=({component:n,redirectTo:t="/"})=>y(Z)?e.createElement(K,{to:t}):e.createElement(n,null),Et="_wrap_1nzyu_1",pt="_logo_1nzyu_5",ht="_text_1nzyu_14",ce={wrap:Et,logo:pt,text:ht},bt=({closeModal:n})=>{const t=ie(),a=I(),s=()=>{a(Ie()),a(gt()),n(),t("/")};return e.createElement("div",{className:ce.wrap},e.createElement("a",{href:"",className:ce.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:ce.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},ft="_closeButton_11uif_2",vt="_modalContent_11uif_13",wt="_modalWrapper_11uif_33",re={closeButton:ft,modalContent:vt,modalWrapper:wt},Nt=document.querySelector("#modal"),Te=({closeModal:n,children:t})=>{const a=i.useCallback(c=>{c.key==="Escape"&&n()},[n]);i.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=c=>{c.target===c.currentTarget&&n()};return ze.createPortal(e.createElement("div",{onClick:s,className:re.modalWrapper},e.createElement("div",{className:re.modalContent},e.createElement("button",{className:re.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),Nt)},Le=()=>{const[n,t]=i.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(r=>!r)}},yt="_header_1snvw_1",Ct="_hederContainer_1snvw_9",kt="_logo_1snvw_17",xt="_wrap_1snvw_27",St="_user_1snvw_32",It="_button_1snvw_38",Tt="_icon_1snvw_52",Lt="_heder_1snvw_9",D={header:yt,hederContainer:Ct,logo:kt,wrap:xt,user:St,button:It,icon:Tt,heder:Lt},Rt=()=>{const{isOpen:n,toggle:t}=Le(),a=y(ut),s=a.email.indexOf("@"),c=a.email.slice(0,s);return e.createElement("header",{className:D.header},e.createElement("div",{className:D.hederContainer},e.createElement("a",{href:"",className:D.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("div",{className:D.wrap}," ",e.createElement("p",{className:D.user},c),e.createElement("button",{className:D.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:D.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement(Te,{closeModal:t},e.createElement(bt,{closeModal:t}))))},Re=()=>{const[n,t]=i.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return i.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Dt="_navLinkContainer_1q3yk_1",Mt="_navLinkWrapper_1q3yk_5",jt="_navLinkTitle_1q3yk_11",$t="_navLinkIcon_1q3yk_16",Bt="_active_1q3yk_34",p={navLinkContainer:Dt,navLinkWrapper:Mt,navLinkTitle:jt,navLinkIcon:$t,active:Bt},Wt=()=>{const n=Re().windowWidth;return e.createElement("div",{className:p.navLinkContainer},e.createElement("div",{className:p.navLinkWrapper},n<768?e.createElement(M,{to:"home",className:({isActive:t})=>L(p.navLinkTitle,t&&p.active)},e.createElement("svg",{width:"38",height:"38",className:p.navLinkIcon},e.createElement("use",{href:"../../img/sprite.svg#icon-home"}))):e.createElement(M,{to:"home",className:({isActive:t})=>L(p.navLinkTitle,t&&p.active)},e.createElement("svg",{width:"18",height:"18",className:p.navLinkIcon},e.createElement("use",{href:"../../img/sprite.svg#icon-home"})),"Home"),n<768?e.createElement(M,{to:"statistics",className:({isActive:t})=>L(p.navLinkTitle,t&&p.active)},e.createElement("svg",{width:"38",height:"38",className:p.navLinkIcon},e.createElement("use",{href:"../../img/sprite.svg#icon-statistics"}))):e.createElement(M,{to:"statistics",className:({isActive:t})=>L(p.navLinkTitle,t&&p.active)},e.createElement("svg",{width:"18",height:"18",className:({isActive:t})=>L(p.s.navLinkIcon,t&&p.active)},e.createElement("use",{href:"../../img/sprite.svg#icon-statistics"})),"Statistics"),n<768&&e.createElement(M,{to:"/currency",className:({isActive:t})=>L(p.navLinkTitle,t&&p.active)},e.createElement("svg",{width:"38",height:"38",className:({isActive:t})=>L(p.s.navLinkIcon,t&&p.active)},e.createElement("use",{href:"../../img/sprite.svg#icon-currency"})))))},Pt=()=>y(Z)?e.createElement(e.Fragment,null,e.createElement(Rt,null),e.createElement(Wt,null),e.createElement(ge,null)):e.createElement(e.Fragment,null,e.createElement(ge,null)),At="_login_register_section_1c8bj_1",Ot="_register_login_section_1c8bj_2",zt="_background_container_login_1c8bj_13",Ft="_background_container_registration_1c8bj_14",qt="_gradient_container_1c8bj_163",Yt="_form_container_1c8bj_171",Vt="_form_1c8bj_171",Ht="_submit_btn_1c8bj_210",Ut="_inactive_btn_1c8bj_230",Gt="_password_label_1c8bj_247",Qt="_password_input_1c8bj_256",Xt="_error_container_1c8bj_267",Jt="_username_1c8bj_271",Kt="_email_1c8bj_277",Zt="_password_1c8bj_247",en="_cpassword_1c8bj_289",tn="_eye_1c8bj_304",nn="_name_label_1c8bj_308",an="_name_input_1c8bj_316",sn="_name_user_icon_1c8bj_335",cn="_icon_email_cont_1c8bj_339",rn="_password_icon_1c8bj_343",on="_button_cont_1c8bj_347",ln="_strengthBar_1c8bj_353",mn="_porgress_container_1c8bj_373",dn="_logo_wrapper_1c8bj_378",un="_background_img_container_login_1c8bj_551",_n="_background_img_container_registration_1c8bj_552",gn="_background_container_1c8bj_13",d={login_register_section:At,register_login_section:Ot,background_container_login:zt,background_container_registration:Ft,gradient_container:qt,form_container:Yt,form:Vt,submit_btn:Ht,inactive_btn:Ut,password_label:Gt,password_input:Qt,error_container:Xt,username:Jt,email:Kt,password:Zt,cpassword:en,eye:tn,name_label:nn,name_input:an,name_user_icon:sn,icon_email_cont:cn,password_icon:rn,button_cont:on,strengthBar:ln,porgress_container:mn,logo_wrapper:dn,background_img_container_login:un,background_img_container_registration:_n,background_container:gn},he=({register:n,errors:t,name:a,placeholder:s,className:c})=>e.createElement(e.Fragment,null,e.createElement("div",{className:d.error_container},e.createElement("label",{className:d.name_label},a==="username"?e.createElement("div",{className:d.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:d.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:d.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:d[c]},t[a].message))),En=({password:n})=>e.createElement("div",{className:d.porgress_container},e.createElement(Fe,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:d.strengthBar})),be=({register:n,errors:t,name:a,placeholder:s,getValues:c,formType:r,className:u})=>{const[g,m]=i.useState("password"),[E,_]=i.useState("");function h(o){_(o.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:d.error_container},e.createElement("label",{className:d.password_label},e.createElement("div",{className:d.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:o=>o===c("password")||"Passwords do not match"}),type:g,placeholder:s,onChange:h,className:d.password_input})," ",e.createElement("div",{className:d.eye,onClick:()=>{m(g==="password"?"text":"password")}},g==="password"?e.createElement(qe,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Ye,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:d[u]},t[a].message)),a==="password"&&r!=="login"&&e.createElement(En,{password:E}))},De=({onDataSubmit:n,formType:t,schema:a})=>{const[s,c]=i.useState(0);i.useEffect(()=>{const _=()=>{c(window.innerWidth)};return window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[]);const{register:r,reset:u,handleSubmit:g,formState:{errors:m}}=ke({resolver:Ve(a)}),E=_=>{const{passwordConfirmation:h,...o}=_;n(o),u()};return e.createElement(e.Fragment,null,e.createElement("section",{className:t==="login"?`${d.login_register_section}`:`${d.register_login_section}`},t==="login"?e.createElement(e.Fragment,null,e.createElement("div",{className:d.background_img_container_login},e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:d.background_container_login},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))):e.createElement(e.Fragment,null,e.createElement("div",{className:d.background_container_registration},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:d.background_img_container_registration},e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:d.form_container,style:{padding:s<768&&t==="login"?"98px 20px":s>768&&t==="login"?"80px 62px":"40px 62px"}},e.createElement("a",{href:"",className:d.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("form",{className:d.form,onSubmit:g(E)},t==="register"&&e.createElement(he,{register:r,errors:m,name:"username",placeholder:"Name",className:"username"}),e.createElement(he,{register:r,errors:m,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(be,{register:r,errors:m,name:"password",placeholder:"Password",onChange:_=>handleChange(_),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(be,{register:r,errors:m,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:d.button_cont},e.createElement("button",{className:d.submit_btn,type:"submit"},"log in"),e.createElement(M,{className:d.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:d.button_cont},e.createElement("button",{className:d.submit_btn,type:"submit"},"register"),e.createElement(M,{className:d.inactive_btn,to:"/login"},"log in"))," "))))},pn=xe({password:P().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:P().required().email("Email is not valid")}).required(),hn=()=>{const n=ie(),t=I(),a=c=>{t(Y(c)).unwrap().then(()=>{n("/home")}).catch(r=>{console.log(r.message),A(r)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement("div",null,e.createElement(De,{formType:"login",onDataSubmit:a,values:s,schema:pn}))},bn=xe({username:P().required(),password:P().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:P().required().email("Email is not valid"),passwordConfirmation:P().oneOf([He("password"),null],"Passwords must match")}).required(),fn="_registerWrapper_15m0u_1",vn={registerWrapper:fn},wn=()=>{const n=I(),t=ie(),a=s=>{n(q(s)).unwrap().then(()=>{t("/home")}).catch(c=>{console.log(c),A(c)})};return e.createElement("div",{className:vn.registerWrapper},e.createElement(De,{onDataSubmit:a,formType:"register",schema:bn}))},H=x("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await k.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),U=x("deleteTransaction",async(n,t)=>{try{return await k.delete(`transactions/${n}`),n}catch(a){return t.rejectWithValue(a.message)}}),G=x("addTransaction",async(n,t)=>{try{const{data:a}=await k.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),Q=x("editTransaction",async(n,t)=>{try{const{data:a}=await k.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),X=x("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await k.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),J=x("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await k.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),ue=()=>{const n=B.useMediaQuery({query:"(min-width: 768px)"}),t=B.useMediaQuery({query:"(min-width: 1280px)"}),a=B.useMediaQuery({query:"(max-width: 768px)"}),s=B.useMediaQuery({query:"(max-width: 767px)"}),c=B.useMediaQuery({query:"(orientation: portrait)"}),r=B.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:c,isRetina:r}},Nn={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},_e=le({name:"transactions",initialState:Nn,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(H.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(U.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a),t.loading=!1}).addCase(G.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(Q.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(c=>c.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(X.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(J.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(z(H.pending,U.pending,G.pending,Q.pending,X.pending,J.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(z(H.rejected,U.rejected,G.rejected,Q.rejected,X.rejected,J.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),yn=_e.reducer;_e.actions;const{selectTransactions:Cn,selectIsLoading:Es,selectIsError:ps,selectTransactionCategories:Me,selectYear:hs,selectMonth:bs,selectCategoriesSummary:kn,selectExpenseSummary:fs,selectIncomeSummary:vs,selectPeriodTotal:ws}=_e.selectors,xn="_labelExpense_c530i_8",Sn="_labelIncome_c530i_15",In="_activeIncome_c530i_46",Tn="_activeExpense_c530i_53",Ln="_slider_c530i_59",Rn="_round_c530i_106",S={"transaction-switcher":"_transaction-switcher_c530i_2",switch:"_switch_c530i_22",labelExpense:xn,labelIncome:Sn,activeIncome:In,activeExpense:Tn,slider:Ln,round:Rn},Dn=({onChange:n})=>{const[t,a]=i.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:S["transaction-switcher"]},e.createElement("span",{className:t?S.activeIncome:S.labelIncome},"Income"),e.createElement("label",{className:`${S.switch} ${t?S.income:S.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${S.slider} ${S.round}`})),e.createElement("span",{className:t?S.labelExpense:S.activeExpense},"Expense"))},Mn="_container_1omsk_2",jn="_formWrapper_1omsk_13",$n="_header_1omsk_21",Bn="_secondContainer_1omsk_27",Wn="_category_1omsk_30",Pn="_boxDate_1omsk_43",An="_incomeInput_1omsk_52",On="_customInput_1omsk_53",zn="_svgBox_1omsk_70",Fn="_comment_1omsk_91",qn="_selectExpense_1omsk_92",Yn="_btnBox_1omsk_108",Vn="_activeIncome_1omsk_113",Hn="_activeExpense_1omsk_120",Un="_checkBox_1omsk_160",v={container:Mn,formWrapper:jn,header:$n,secondContainer:Bn,category:Wn,boxDate:Pn,incomeInput:An,customInput:On,svgBox:zn,comment:Fn,selectExpense:qn,btnBox:Yn,activeIncome:Vn,activeExpense:Hn,checkBox:Un},fe=n=>n<10?"0"+n:n,ve=n=>{const t=n.getFullYear(),a=fe(n.getMonth()+1),s=fe(n.getDate());return`${t}-${a}-${s}`},we=({name:n,register:t,errors:a,placeholder:s,className:c})=>e.createElement("div",{className:v.inputContainer},e.createElement("input",{className:c,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message));function je({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:c}){const{register:r,handleSubmit:u,formState:{errors:g},setValue:m,reset:E}=ke(),[_,h]=i.useState(""),[o,N]=i.useState(""),[j,ee]=i.useState(new Date);i.useEffect(()=>{N(n?n.type:"EXPENSE")},[n]),i.useEffect(()=>{m("amount",n&&n.amount)},[n,m]),i.useEffect(()=>{m("comment",n&&n.comment)},[n,m]);const T=i.useMemo(()=>t.map(({id:f,name:Oe})=>({value:f,label:Oe})),[t]),$=i.useMemo(()=>T.find(f=>(n==null?void 0:n.categoryId)===f.value),[n,T]),F=f=>{h(f)},te=f=>{s==="add"?(c({transactionDate:ve(j),amount:+f.amount,comment:f.comment,type:o,categoryId:o==="EXPENSE"?_.value||T[0].value:"063f1132-ba5d-42b4-951d-44011ca46262"}),E()):(c({transactionDate:ve(j),amount:+f.amount,comment:f.comment}),E()),E()},ne=f=>{N(f?"INCOME":"EXPENSE")};return e.createElement("div",{className:v.container},e.createElement("form",{className:v.formWrapper,onSubmit:u(te)},e.createElement("h1",{className:v.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(Dn,{onChange:ne}):e.createElement("div",null,e.createElement("ul",{className:v.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&o==="EXPENSE"||ne(!0)},className:n.type==="INCOME"||o==="INCOME"?v.activeIncome:"",disabled:s==="edit"&&o==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&o==="INCOME"||ne(!1)},className:o==="EXPENSE"?v.activeExpense:"",disabled:s==="edit"&&o==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:v.secondContainer},o==="EXPENSE"&&e.createElement("div",{className:v.category},e.createElement(Ue,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:T,placeholder:"Select category",defaultValue:$&&$,onChange:F,isDisabled:s==="edit"}),g.category&&e.createElement("span",null,g.category.message)),e.createElement("div",{className:v.boxDate},e.createElement(we,{className:v.incomeInput,name:"amount",placeholder:"0.00",errors:g,register:r}),e.createElement("div",{className:v.svgBox},e.createElement(Ge,{className:v.customInput,selected:n?n.transactionDate:j,onChange:f=>{m("transactionDate",f),ee(f)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-date"})),g.transactionDate&&e.createElement("span",null,g.transactionDate.message))),e.createElement(we,{className:v.comment,name:"comment",placeholder:"Comment",errors:g,register:r}),e.createElement("div",{className:v.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}function Gn({categories:n,editContent:t,toggle:a}){const s=I(),c=r=>{s(Q({content:{...r},id:t.id})).unwrap().then(u=>{A.success("Changed!"),a()}).catch(u=>{A.error("Credentials is not valid!")})};return e.createElement(je,{toggle:a,content:t.content,categories:n,onDataSubmit:c,typeForm:"edit"})}function Qn({categories:n,toggle:t}){const a=I(),s=c=>{a(G(c)).unwrap().then(()=>{A.success("Transaction was successfully added"),t()}).catch(r=>{A.error("Credentials is not valid!")})};return e.createElement(je,{categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const $e="/money_guard_project/assets/sprite-d3dedbbb.svg",Xn="_transaction_item_1bzo6_1",Jn="_income_border_1bzo6_6",Kn="_expense_border_1bzo6_10",Zn="_income_text_1bzo6_14",ea="_expense_text_1bzo6_19",ta="_transactions_table_mobile_1bzo6_24",na="_transaction_colum_1bzo6_30",aa="_transaction_first_column_1bzo6_34",sa="_transaction_row_mobile_1bzo6_38",ca="_transaction_row_1bzo6_38",ra="_table_body_1bzo6_57",oa="_btn_delete_1bzo6_61",la="_btn_edit_1bzo6_76",ia="_btn_wrapper_1bzo6_86",ma="_icon_edit_1bzo6_93",l={transaction_item:Xn,income_border:Jn,expense_border:Kn,income_text:Zn,expense_text:ea,transactions_table_mobile:ta,transaction_colum:na,transaction_first_column:aa,transaction_row_mobile:sa,transaction_row:ca,table_body:ra,btn_delete:oa,btn_edit:la,btn_wrapper:ia,icon_edit:ma},Ne=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:c,categoryId:r,comment:u,amount:g}=n,{isBigScreenOrTablet:m,isMobile:E}=ue(),_=I(),h=y(Me);function o($){const F=h.find(te=>te.id===$);return F?F.name:"Unknown Category"}const N=$=>{_(U($))},j=c.toLowerCase()==="income"?"+":"-",ee=c.toLowerCase()==="income"?l.income_border:l.expense_border,T=c.toLowerCase()==="income"?l.income_text:l.expense_text;return e.createElement(e.Fragment,null,E&&e.createElement("li",{key:a,className:`${l.transaction_item} ${ee}`},e.createElement("table",{className:l.transactions_table_mobile},e.createElement("tbody",{className:l.table_body},e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Type"),e.createElement("td",null,j)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Category"),e.createElement("td",null,o(r))),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Comment"),e.createElement("td",null,u)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Sum"),e.createElement("td",{className:T},g)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:l.btn_delete,onClick:()=>N(a)},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:r,type:c,amount:g,comment:u,transactionDate:s},a),className:l.btn_edit},e.createElement("svg",{className:l.icon_edit},e.createElement("use",{xlinkHref:`${$e}#icon-edit`}))," ","Edit")))))),m&&e.createElement("tr",{className:l.transaction_row},e.createElement("td",{className:l.transaction_colum},s),e.createElement("td",{className:l.transaction_colum,style:{textAlign:"center"}},j),e.createElement("td",{className:l.transaction_colum},o(r)),e.createElement("td",{className:l.transaction_colum},u),e.createElement("td",{className:`${l.transaction_colum} ${T}`,style:{textAlign:"right"}},g),e.createElement("td",{className:l.transaction_colum},e.createElement("div",{className:l.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:r,type:c,amount:g,comment:u,transactionDate:s},a),className:l.btn_edit},"Edit"),e.createElement("button",{className:l.btn_delete,onClick:()=>N(a)},"Delete")))))},da="_transactions_section_smf2v_1",ua="_transactions_container_smf2v_34",_a="_transactions_table_smf2v_85",ga="_transactions_list_smf2v_92",Ea="_transaction_row_head_smf2v_98",pa="_table_body_smf2v_121",ha="_btn_add_smf2v_125",ba="_icon_plus_smf2v_140",fa="_empty_transactions_smf2v_146",C={transactions_section:da,transactions_container:ua,transactions_table:_a,transactions_list:ga,transaction_row_head:Ea,table_body:pa,btn_add:ha,icon_plus:ba,empty_transactions:fa},va=()=>{const{isOpen:n,toggle:t}=Le(),[a,s]=i.useState(""),c=y(Cn),r=y(Me),{isBigScreenOrTablet:u,isMobile:g}=ue();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const m=(_,h,o)=>{t(),s({content:_,id:h,name:o}),n&&document.body.classList.add("modal-open")},E=()=>{t(),s(null)};return e.createElement("section",{className:C.transactions_section},e.createElement("div",{className:C.transactions_container},g&&e.createElement("ul",{className:C.transactions_list},c.length>0?c.map(_=>e.createElement(Ne,{handleEditItem:m,key:_.id,transaction:_})):e.createElement("div",{className:C.empty_transactions},"No transactions")),u&&e.createElement(e.Fragment,null,c.length>0?e.createElement("table",{className:C.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:C.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:C.table_body},c.map(_=>e.createElement(Ne,{handleEditItem:m,key:_.id,transaction:_})))):e.createElement(e.Fragment,null,e.createElement("table",{className:C.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:C.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:C.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>E(),className:C.btn_add}," ",e.createElement("svg",{className:C.icon_plus},e.createElement("use",{xlinkHref:`${$e}#icon-plus`})))),n&&e.createElement(Te,{closeModal:t},a?e.createElement(Gn,{editContent:a,categories:r,toggle:t}):e.createElement(Qn,{categories:r,toggle:t})))},Be=x("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await Ce.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),wa={usdRate:null,eurRate:null,lastFetchTime:null},We=le({name:"currency",initialState:wa,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(Be.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),Na=We.reducer,{selectUsdRate:ya,selectEurRate:Ca,selectLastFetchTime:ka}=We.selectors,xa="_wrapper_d2ubo_14",Sa="_title_d2ubo_49",Ia="_row_d2ubo_79",Ta="_titleItem_d2ubo_97",La="_rowItem_d2ubo_98",Ra="_vector_d2ubo_104",Da="_image_d2ubo_109",Ma="_secondimage_d2ubo_132",ja="_smallnumeur_d2ubo_148",$a="_smallnumusd_d2ubo_158",b={wrapper:xa,title:Sa,row:Ia,titleItem:Ta,rowItem:La,vector:Ra,image:Da,secondimage:Ma,smallnumeur:ja,smallnumusd:$a};function Pe(){const n=I(),t=y(ya),a=y(Ca),s=y(ka),{isDesktopOrLaptop:c,isBigScreen:r,isTabletOrMobile:u,isRetina:g}=ue();let m="../../img/images/currency_mobile.webp",E="../../img/images/line_desc_mob_1x.webp";return window.devicePixelRatio>=2?c||r?(m="../../img/images/currency_desk@2x.webp",E="../../img/images/line_desc_2x.webp"):u&&(m="../../img/images/currency_tablet@2x.webp",E="../../img/images/line_desc_tab_2x.webp"):c||r?(m="../../img/images/currency_desk.webp",E="../../img/images/line_desc_1x.webp"):u&&(m="../../img/images/currency_tablet.webp",E="../../img/images/line_desc_tab_1x.webp"),i.useEffect(()=>{(new Date().getTime()-s)/(1e3*60*60)>1&&n(Be())},[n,s]),e.createElement("div",{className:b.wrapper},e.createElement("div",{className:b.secondwrapper},e.createElement("ul",{className:b.title},e.createElement("li",{className:b.titleItem},"Currency"),e.createElement("li",{className:b.titleItem},"Purchase"),e.createElement("li",{className:b.titleItem},"Sale")),t&&e.createElement("ul",{className:b.row},e.createElement("li",{className:b.rowItem},"USD"),e.createElement("li",{className:b.rowItem},t.rateBuy),e.createElement("li",{className:b.rowItem},t.rateSell)),a&&e.createElement("ul",{className:b.row},e.createElement("li",{className:b.rowItem},"EUR"),e.createElement("li",{className:b.rowItem},a.rateBuy),e.createElement("li",{className:b.rowItem},a.rateSell)),c&&e.createElement(e.Fragment,null,e.createElement("p",{className:b.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:b.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:b.image,src:m,alt:"Currency rate"}),e.createElement("img",{className:b.secondimage,src:E,alt:"Currency rate"})))}const Ba=()=>{const n=Re().windowWidth,t=I();return i.useEffect(()=>{t(H())},[t]),i.useEffect(()=>{t(X())},[t]),e.createElement(e.Fragment,null,n>=768&&e.createElement(Pe,null),e.createElement(va,null))},Wa="_loaderWrapper_1hccn_1",Pa="_loader_1hccn_1",Aa="_spinner_1hccn_1",Oa="_loaderName_1hccn_34",oe={loaderWrapper:Wa,loader:Pa,spinner:Aa,loaderName:Oa},ye=()=>e.createElement("div",{className:oe.loaderWrapper},e.createElement("div",{className:oe.loader},e.createElement("span",{className:oe.loaderName}))),za="_selectContainers_1ftgu_1",Fa="_select_1ftgu_1",qa="_option_1ftgu_19",O={selectContainers:za,select:Fa,option:qa},Ya=({onMonthChange:n,onYearChange:t})=>{const a=new Date,s=a.getFullYear(),[c,r]=i.useState(a.getMonth()+1),[u,g]=i.useState(s),m=o=>{r(parseInt(o.target.value)),n(parseInt(o.target.value))},E=o=>{g(parseInt(o.target.value)),t(parseInt(o.target.value))},_=Array.from({length:s-2019},(o,N)=>s-N).reverse(),h=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.createElement("div",{className:O.selectContainers},e.createElement("select",{className:O.select,value:c,onChange:m},h.map((o,N)=>e.createElement("option",{className:O.option,key:N+1,value:N+1},o))),e.createElement("select",{className:O.select,value:u,onChange:E},_.map(o=>e.createElement("option",{className:O.option,key:o,value:o},o))))},Va="_statisticsContainer_12lnp_1",Ha="_chartContainer_12lnp_27",Ua="_title_12lnp_31",Ga="_tableContainer_12lnp_36",Qa="_contentContainer_12lnp_59",W={statisticsContainer:Va,chartContainer:Ha,title:Ua,tableContainer:Ga,contentContainer:Qa},Xa="_tableContainer_g4cyy_1",Ja="_table_g4cyy_1",Ka="_tableHeader_g4cyy_12",Za="_tableCell_g4cyy_25",es="_tableRow_g4cyy_33",ts="_paragraphContainer_g4cyy_37",ns="_paragraph_g4cyy_37",w={tableContainer:Xa,table:Ja,tableHeader:Ka,tableCell:Za,tableRow:es,paragraphContainer:ts,paragraph:ns},as=({transactionsSummary:n,colors:t})=>{const a=(n==null?void 0:n.categoriesSummary)||[],s=(n==null?void 0:n.incomeSummary)||0,c=(n==null?void 0:n.expenseSummary)||0;return e.createElement("div",{className:w.tableContainer},e.createElement("table",{className:w.table},e.createElement("thead",{className:w.tableHeader},e.createElement("tr",null,e.createElement("th",{className:w.tableCell}),e.createElement("th",{className:w.tableCell},"Category"),e.createElement("th",{className:w.tableCell},"Sum"))),e.createElement("tbody",null,a.map((r,u)=>e.createElement("tr",{key:u,className:w.tableRow},e.createElement("td",{className:w.colorCell},e.createElement("div",{className:w.colorSquare,style:{backgroundColor:t[r.name]}})),e.createElement("td",{className:w.tableCell},r.name),e.createElement("td",{className:w.tableCell},r.total))))),e.createElement("div",{className:w.paragraphContainer},e.createElement("p",{className:w.paragraph},"Income: ",s),e.createElement("p",{className:w.paragraph},"Expenses: ",c)))},ss={},cs=({transactions:n,colors:t})=>{if(!n||!t)return e.createElement("div",null,"No data available");const a={labels:n==null?void 0:n.map(s=>s.name),datasets:[{data:n==null?void 0:n.map(s=>s.total),backgroundColor:n==null?void 0:n.map(s=>t[s.name]),hoverBackgroundColor:n==null?void 0:n.map(s=>t[s.name])}]};return e.createElement("div",{className:ss.chartContainer},e.createElement(Qe,{data:a}))},rs=()=>{const n=I(),t=y(kn),[a,s]=i.useState(new Date().getMonth()+1),[c,r]=i.useState(new Date().getFullYear()),[u,g]=i.useState({});console.log(t),i.useEffect(()=>{n(J({month:a,year:c}))},[a,c,n]);const m=()=>{const h={};t==null||t.forEach(({name:o,index:N})=>{h[o]=`#${Math.floor(Math.random()*16777215).toString(16)}`}),g(h)};i.useEffect(()=>{m()},[t]);const E=h=>{s(h)},_=h=>{r(h)};return e.createElement("section",{className:W.statisticsContainer},e.createElement("div",{className:W.titleContainer},e.createElement("h2",{className:W.title},"Statistics")),e.createElement("div",{className:W.contentContainer},e.createElement("div",{className:W.chartContainer},e.createElement(cs,{transactions:t,colors:u})),e.createElement("div",{className:W.tableContainer},e.createElement(Ya,{onMonthChange:E,onYearChange:_}),e.createElement(as,{transactionsSummary:t,colors:u}))))};function os(){const n=y(Z),t=y(_t),a=I();return i.useEffect(()=>{a(V())},[a]),t?e.createElement(ye,null):e.createElement(e.Fragment,null,e.createElement(i.Suspense,{fallback:e.createElement(ye,null)},e.createElement(Xe,null,e.createElement(R,{path:"/",element:e.createElement(Pt,null)},e.createElement(R,{index:!0,element:e.createElement(pe,{component:hn,redirectTo:"/home"})}),e.createElement(R,{path:"register",element:e.createElement(pe,{component:wn,redirectTo:"/home"})}),e.createElement(R,{path:"/home",element:e.createElement(se,{component:Ba,redirectTo:"/"})}),e.createElement(R,{path:"/statistics",element:e.createElement(se,{component:rs,redirectTo:"/"})}),e.createElement(R,{path:"/currency",element:e.createElement(se,{component:Pe,redirectTo:"/"})})),e.createElement(R,{path:"*",element:n?e.createElement(K,{to:"/home"}):e.createElement(K,{to:"/"})}))))}const ls={key:"auth",version:1,storage:Se,whitelist:["token"]},is={key:"root",storage:Se},Ae=Je({reducer:{auth:Ee(ls,dt),transactions:yn,currency:Ee(is,Na)},middleware:n=>n({serializableCheck:{ignoredActions:[Ke,Ze,et,tt,nt,at]}}),devTools:!1}),ms=st(Ae);ct.createRoot(document.getElementById("root")).render(e.createElement(rt,null,e.createElement(ot,{store:Ae},e.createElement(lt,{loading:null,persistor:ms},e.createElement(os,null),e.createElement(it,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
