import{a as Se,c as I,b as ue,i as z,u as f,R as e,N as te,d as de,e as j,r as u,f as Ue,L as Ge,g as $,h as F,O as Ee,_ as Xe,P as Qe,j as Je,k as Ie,o as Te,l as ne,m as L,B as W,n as Ke,p as M,S as Ze,D as et,q as je,s as Le,t as tt,v as nt,w as D,x as at,y as be,F as st,z as rt,A as ct,C as ot,E as lt,G as it,H as mt,I as De,J as ut,K as dt,M as _t,Q as gt,T as pt}from"./assets/vendor-0af93e1b.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const _ of c.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&s(_)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const S=Se.create({baseURL:"https://wallet.b.goit.study/api/"}),_e=n=>{S.defaults.headers.common.Authorization=`Bearer ${n}`},ht=()=>{S.defaults.headers.common.Authorization=""},V=I("register",async(n,t)=>{try{const{data:a}=await S.post("auth/sign-up",n);return _e(a.token),a}catch(a){return t.rejectWithValue(a.response.data.message)}}),U=I("login",async(n,t)=>{try{const{data:a}=await S.post("auth/sign-in",n);return _e(a.token),a}catch(a){return console.log(a),t.rejectWithValue(a.response.data.message)}}),Re=I("logout",async(n,t)=>{try{const{data:a}=await S.delete("auth/sign-out");return ht(),a}catch(a){return t.rejectWithValue(a.message)}}),G=I("refresh",async(n,t)=>{const a=t.getState().auth.token;if(!a)return t.rejectWithValue("Token is not exist!");try{_e(a);const{data:s}=await S.get("users/current");return console.log(s),s}catch(s){return t.rejectWithValue(s.message)}}),re={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1,balance:0},ge=ue({name:"auth",initialState:re,selectors:{selectUser:n=>n.user,selectIsLoggedIn:n=>n.isLoggedIn,selectToken:n=>n.isLoggedIn,selectIsRefresh:n=>n.isRefresh,selectBalance:n=>n.balance},reducers:{logout:n=>re},extraReducers:n=>{n.addCase(Re.fulfilled,t=>re).addCase(G.fulfilled,(t,{payload:a})=>{t.user.username=a.username,t.user.email=a.email,t.balance=a.balance,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1,t.loading=!1}).addMatcher(z(V.fulfilled,U.fulfilled),(t,{payload:a})=>{t.user.username=a.user.username,t.user.email=a.user.email,t.user.password=a.user.password,t.token=a.token,t.loading=!1,t.isLoggedIn=!0,t.loading=!1,t.isRefresh=!1}).addMatcher(z(V.pending,U.pending,G.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(z(V.rejected,U.rejected,G.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1,t.isRefresh=!1})}}),Et=ge.reducer,{selectIsLoggedIn:ae,selectUser:bt,selectToken:Ss,selectIsRefresh:yt,selectBalance:Is,selectIsLoading:Ts}=ge.selectors,{logout:ft}=ge.actions,X=I("fetchTransactionsData",async(n,t)=>{try{const{data:a}=await S.get("transactions");return a}catch(a){return t.rejectWithValue(a.message)}}),Q=I("deleteTransaction",async(n,t)=>{try{return await S.delete(`transactions/${n.id}`),n}catch(a){return t.rejectWithValue(a.message)}}),J=I("addTransaction",async(n,t)=>{try{const{data:a}=await S.post("transactions",n);return a}catch(a){return t.rejectWithValue(a.message)}}),K=I("editTransaction",async(n,t)=>{try{const{data:a}=await S.patch(`/transactions/${n.id}`,n.content);return a}catch(a){return t.rejectWithValue(a.message)}}),Z=I("fetchTransactionCategories",async(n,t)=>{try{const{data:a}=await S.get("transaction-categories");return a}catch(a){return t.rejectWithValue(a.message)}}),ee=I("fetchTransactionSummaryController",async(n,t)=>{try{const{data:a}=await S.get(`transactions-summary?month=${n.month}&year=${n.year}`);return a}catch(a){return t.rejectWithValue(a.message)}}),ce=({component:n,redirectTo:t="/"})=>f(ae)?e.createElement(n,null):e.createElement(te,{to:t}),ye=({component:n,redirectTo:t="/"})=>f(ae)?e.createElement(te,{to:t}):e.createElement(n,null),k="/money_guard_project/assets/sprite-7c7b64a9.svg",vt="_wrap_1nzyu_1",wt="_logo_1nzyu_5",Nt="_text_1nzyu_14",oe={wrap:vt,logo:wt,text:Nt},Ct=({closeModal:n})=>{const t=de(),a=j(),s=()=>{a(Re()),a(ft()),n(),t("/")};return e.createElement("div",{className:oe.wrap},e.createElement("a",{href:"",className:oe.logo},e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{href:"../../img/sprite.svg#icon-logo"})),"Money Guard"),e.createElement("p",{className:oe.text},"Are you sure you want to log out?"),e.createElement("button",{className:"modalButtonColor",onClick:s},"Logout"),e.createElement("button",{className:"modalButton",onClick:n},"Cancel"))},xt="_closeButton_11wgo_1",kt="_modalContent_11wgo_16",St="_modalWrapper_11wgo_41",le={closeButton:xt,modalContent:kt,modalWrapper:St},It=document.querySelector("#modal"),$e=({closeModal:n,children:t})=>{const a=u.useCallback(r=>{r.key==="Escape"&&n()},[n]);u.useEffect(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}),[n,a]);const s=r=>{r.target===r.currentTarget&&n()};return Ue.createPortal(e.createElement("div",{onClick:s,className:le.modalWrapper},e.createElement("div",{className:le.modalContent},e.createElement("button",{className:le.closeButton,onClick:n},e.createElement("svg",{width:"16",height:"16"},e.createElement("use",{href:"../../img/sprite.svg#icon-close"}))),t)),It)},Be=()=>{const[n,t]=u.useState(!1);return{isOpen:n,close:()=>t(!1),open:()=>t(!0),toggle:()=>t(c=>!c)}},Tt="_header_3tysc_1",jt="_hederContainer_3tysc_16",Lt="_logo_3tysc_24",Dt="_wrap_3tysc_34",Rt="_user_3tysc_39",$t="_button_3tysc_45",Bt="_icon_3tysc_59",Mt="_heder_3tysc_16",R={header:Tt,hederContainer:jt,logo:Lt,wrap:Dt,user:Rt,button:$t,icon:Bt,heder:Mt},qt=()=>{const{isOpen:n,toggle:t}=Be(),a=f(bt),s=a.email.indexOf("@"),r=a.email.slice(0,s);return e.createElement("header",{className:R.header},e.createElement("div",{className:R.hederContainer},e.createElement(Ge,{to:"/",className:R.logo},e.createElement("svg",{width:"24",height:"23"},e.createElement("use",{xlinkHref:`${k}#icon-logo`})),"Money Guard"),e.createElement("div",{className:R.wrap}," ",e.createElement("p",{className:R.user},r),e.createElement("button",{className:R.button,onClick:t},e.createElement("svg",{width:"18",height:"18",className:R.icon},e.createElement("use",{href:"../../img/sprite.svg#icon-exit"}))," ","Exit")),n&&e.createElement($e,{closeModal:t},e.createElement(Ct,{closeModal:t}))))},Me=()=>{const[n,t]=u.useState(window.innerWidth),a=()=>{t(window.innerWidth)};return u.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{windowWidth:n}},Wt="_navLinkContainer_ark7r_1",Pt="_navLinkWrapper_ark7r_10",At="_navLinkTitle_ark7r_17",Ft="_active_ark7r_40",Ot="_navLinkIconBg_ark7r_49",zt="_navLinkIcon_ark7r_49",p={navLinkContainer:Wt,navLinkWrapper:Pt,navLinkTitle:At,active:Ft,navLinkIconBg:Ot,navLinkIcon:zt},Ht=()=>{const n=Me().windowWidth;return e.createElement("div",{className:p.navLinkContainer},e.createElement("div",{className:p.navLinkWrapper},n<768?e.createElement($,{to:"home",className:({isActive:t})=>F(p.navLinkTitle,t&&p.active)},e.createElement("div",{className:p.navLinkIconBg},e.createElement("svg",{width:"38",height:"38",className:p.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-home`})))):e.createElement($,{to:"home",className:({isActive:t})=>F(p.navLinkTitle,t&&p.active)},e.createElement("div",{className:p.navLinkIconBg},e.createElement("svg",{width:"18",height:"18",className:p.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-home`}))),"Home"),n<768?e.createElement($,{to:"statistics",className:({isActive:t})=>F(p.navLinkTitle,t&&p.active)},e.createElement("div",{className:p.navLinkIconBg},e.createElement("svg",{width:"32",height:"32",className:p.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-statistics`})))):e.createElement($,{to:"statistics",className:({isActive:t})=>F(p.navLinkTitle,t&&p.active)},e.createElement("div",{className:p.navLinkIconBg},e.createElement("svg",{width:"16",height:"16",className:p.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-statistics`}))),"Statistics"),n<768&&e.createElement($,{to:"/currency",className:({isActive:t})=>F(p.navLinkTitle,t&&p.active)},e.createElement("div",{className:p.navLinkIconBg},e.createElement("svg",{width:"38",height:"38",className:p.navLinkIcon},e.createElement("use",{xlinkHref:`${k}#icon-currency`}))))))},Yt=()=>f(ae)?e.createElement(e.Fragment,null,e.createElement(qt,null),e.createElement(Ht,null),e.createElement(Ee,null)):e.createElement(e.Fragment,null,e.createElement(Ee,null)),Vt="_login_register_section_1xhyp_1",Ut="_register_login_section_1xhyp_2",Gt="_background_container_login_1xhyp_13",Xt="_background_container_registration_1xhyp_14",Qt="_gradient_container_1xhyp_163",Jt="_form_container_login_1xhyp_169",Kt="_form_container_register_1xhyp_170",Zt="_form_1xhyp_169",en="_submit_btn_1xhyp_207",tn="_inactive_btn_1xhyp_227",nn="_password_label_1xhyp_244",an="_password_input_1xhyp_253",sn="_error_container_1xhyp_263",rn="_username_1xhyp_267",cn="_email_1xhyp_273",on="_password_1xhyp_244",ln="_cpassword_1xhyp_285",mn="_eye_1xhyp_299",un="_name_label_1xhyp_303",dn="_name_input_1xhyp_311",_n="_name_user_icon_1xhyp_336",gn="_icon_email_cont_1xhyp_340",pn="_password_icon_1xhyp_344",hn="_button_cont_1xhyp_348",En="_strengthBar_1xhyp_354",bn="_porgress_container_1xhyp_374",yn="_logo_wrapper_1xhyp_379",fn="_background_img_container_login_1xhyp_583",vn="_background_img_container_registration_1xhyp_584",wn="_background_container_1xhyp_13",i={login_register_section:Vt,register_login_section:Ut,background_container_login:Gt,background_container_registration:Xt,gradient_container:Qt,form_container_login:Jt,form_container_register:Kt,form:Zt,submit_btn:en,inactive_btn:tn,password_label:nn,password_input:an,error_container:sn,username:rn,email:cn,password:on,cpassword:ln,eye:mn,name_label:un,name_input:dn,name_user_icon:_n,icon_email_cont:gn,password_icon:pn,button_cont:hn,strengthBar:En,porgress_container:bn,logo_wrapper:yn,background_img_container_login:fn,background_img_container_registration:vn,background_container:wn},fe=({register:n,errors:t,name:a,placeholder:s,className:r})=>e.createElement(e.Fragment,null,e.createElement("div",{className:i.error_container},e.createElement("label",{className:i.name_label},a==="username"?e.createElement("div",{className:i.name_user_icon},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-user"}))," "):e.createElement("div",{className:i.icon_email_cont},e.createElement("svg",{width:"20",height:"24"},e.createElement("use",{href:"../../img/sprite.svg#icon-email"}))),e.createElement("input",{className:i.name_input,autoComplete:"none",...n(a),type:"text",placeholder:s}))," ",(t==null?void 0:t[a])&&e.createElement("span",{className:i[r]},t[a].message))),Nn=({password:n})=>e.createElement("div",{className:i.porgress_container},e.createElement(Xe,{password:n,minLength:6,scoreWordStyle:{display:"none"},className:i.strengthBar})),ve=({register:n,errors:t,name:a,placeholder:s,getValues:r,formType:c,className:_})=>{const[h,d]=u.useState("password"),[g,m]=u.useState("");function w(o){m(o.target.value)}return e.createElement(e.Fragment,null,e.createElement("div",{className:i.error_container},e.createElement("label",{className:i.password_label},e.createElement("div",{className:i.password_icon},e.createElement("svg",{width:"20",height:"20"},e.createElement("use",{href:"../../img/sprite.svg#icon-lock"}))),e.createElement("input",{autoComplete:a,...n(a,{required:"Password is required",validate:o=>o===r("password")||"Passwords do not match"}),type:h,placeholder:s,onChange:w,className:i.password_input})," ",e.createElement("div",{className:i.eye,onClick:()=>{d(h==="password"?"text":"password")}},h==="password"?e.createElement(Qe,{style:{color:"rgba(255, 255, 255, 0.4)"}}):e.createElement(Je,{style:{color:"rgba(255, 255, 255, 0.6)"}}))),(t==null?void 0:t[a])&&e.createElement("span",{className:i[_]},t[a].message)),a==="password"&&c!=="login"&&e.createElement(Nn,{password:g}))},qe=({onDataSubmit:n,formType:t,schema:a})=>{const[s,r]=u.useState(0);u.useEffect(()=>{const m=()=>{r(window.innerWidth)};return window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},[]);const{register:c,reset:_,handleSubmit:h,formState:{errors:d}}=Ie({resolver:Te(a)}),g=m=>{const{passwordConfirmation:w,...o}=m;n(o),_()};return e.createElement(e.Fragment,null,e.createElement("section",{className:t==="login"?`${i.login_register_section}`:`${i.register_login_section}`},t==="login"?e.createElement(e.Fragment,null,e.createElement("div",{className:i.background_container_login},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null))," ",e.createElement("div",{className:i.background_img_container_login},e.createElement("div",null),e.createElement("div",null))):e.createElement(e.Fragment,null,e.createElement("div",{className:i.background_container_registration},e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null),e.createElement("div",null)),e.createElement("div",{className:i.background_img_container_registration},e.createElement("div",null),e.createElement("div",null))),e.createElement("div",{className:t==="login"?i.form_container_login:i.form_container_register},e.createElement("a",{href:"",className:i.logo_wrapper,style:{paddingBottom:t==="login"?"11px":"0px"}},s<768?e.createElement("svg",{width:"25.5",height:"25.5"},e.createElement("use",{xlinkHref:`${k}#icon-logo`})):e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{xlinkHref:`${k}#icon-logo`})),"Money Guard"),e.createElement("form",{className:i.form,onSubmit:h(g)},t==="register"&&e.createElement(fe,{register:c,errors:d,name:"username",placeholder:"Name",className:"username"}),e.createElement(fe,{register:c,errors:d,name:"email",placeholder:"E-mail",className:"email"}),e.createElement(ve,{register:c,errors:d,name:"password",placeholder:"Password",onChange:m=>handleChange(m),formType:t,className:"password"}),t==="register"&&e.createElement(e.Fragment,null,e.createElement(ve,{register:c,errors:d,name:"passwordConfirmation",placeholder:"Confirm password",className:"cpassword"})),t==="login"?e.createElement("div",{className:i.button_cont},e.createElement("button",{className:i.submit_btn,type:"submit"},"log in"),e.createElement($,{className:i.inactive_btn,to:"/register"},"register")):e.createElement("div",{className:i.button_cont},e.createElement("button",{className:i.submit_btn,type:"submit"},"register"),e.createElement($,{className:i.inactive_btn,to:"/login"},"log in"))," "))))},Cn=ne({password:L().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:L().required().email("Email is not valid")}).required(),xn=()=>{const n=de(),t=j(),a=r=>{t(U(r)).unwrap().then(()=>{n("/home")}).catch(c=>{console.log(c.message),W(c)})},s={email:"tomato9@gmail.com",password:"0000000"};return e.createElement(e.Fragment,null,e.createElement(qe,{formType:"login",onDataSubmit:a,values:s,schema:Cn}))},kn=ne({username:L().required(),password:L().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:L().required().email("Email is not valid"),passwordConfirmation:L().oneOf([Ke("password"),null],"Passwords must match")}).required();const Sn=()=>{const n=j(),t=de(),a=s=>{n(V(s)).unwrap().then(()=>{t("/home")}).catch(r=>{console.log(r),W(r)})};return e.createElement(e.Fragment,null,e.createElement(qe,{onDataSubmit:a,formType:"register",schema:kn}))},pe=()=>{const n=M.useMediaQuery({query:"(min-width: 768px)"}),t=M.useMediaQuery({query:"(min-width: 1280px)"}),a=M.useMediaQuery({query:"(max-width: 768px)"}),s=M.useMediaQuery({query:"(max-width: 767px)"}),r=M.useMediaQuery({query:"(orientation: portrait)"}),c=M.useMediaQuery({query:"(min-resolution: 2dppx)"});return{isBigScreenOrTablet:n,isBigScreen:t,isMobile:s,isTabletOrMobile:a,isPortrait:r,isRetina:c}},In={transactionsList:[],transactionCategories:[],categoriesSummary:[],expenseSummary:0,incomeSummary:0,month:new Date().getMonth()+1,year:new Date().getFullYear(),periodTotal:0,loading:!1,error:!1},he=ue({name:"transactions",initialState:In,selectors:{selectTransactions:n=>n.transactionsList,selectIsLoading:n=>n.loading,selectIsError:n=>n.error,selectTransactionCategories:n=>n.transactionCategories,selectMonth:n=>n.month,selectYear:n=>n.year,selectCategoriesSummary:n=>n.categoriesSummary,selectExpenseSummary:n=>n.expenseSummary,selectIncomeSummary:n=>n.incomeSummary,selectPeriodTotal:n=>n.periodTotal},reducers:{selectedYear:(n,{payload:t})=>{n.year=t},selectedMonth:(n,{payload:t})=>{n.month=t}},extraReducers:n=>{n.addCase(X.fulfilled,(t,{payload:a})=>{t.transactionsList=a,t.loading=!1}).addCase(Q.fulfilled,(t,{payload:a})=>{t.transactionsList=t.transactionsList.filter(s=>s.id!==a.id),t.loading=!1}).addCase(J.fulfilled,(t,{payload:a})=>{t.transactionsList.push(a),t.loading=!1}).addCase(K.fulfilled,(t,{payload:a})=>{const s=t.transactionsList.findIndex(r=>r.id===a.id);t.transactionsList.splice(s,1,a),t.loading=!1}).addCase(Z.fulfilled,(t,{payload:a})=>{t.transactionCategories=a,t.loading=!1}).addCase(ee.fulfilled,(t,{payload:a})=>{t.categoriesSummary=a.categoriesSummary,t.expenseSummary=a.expenseSummary,t.incomeSummary=a.incomeSummary,t.periodTotal=a.periodTotal,t.loading=!1}).addMatcher(z(X.pending,Q.pending,J.pending,K.pending,Z.pending,ee.pending),(t,{payload:a})=>{t.loading=!0,t.error=null}).addMatcher(z(X.rejected,Q.rejected,J.rejected,K.rejected,Z.rejected,ee.rejected),(t,{payload:a})=>{t.error=a,t.loading=!1})}}),Tn=he.reducer;he.actions;const{selectTransactions:jn,selectIsLoading:js,selectIsError:Ls,selectTransactionCategories:We,selectYear:Ds,selectMonth:Rs,selectCategoriesSummary:Ln,selectExpenseSummary:Dn,selectIncomeSummary:Rn,selectPeriodTotal:$n}=he.selectors,Bn="_labelExpense_quz5u_21",Mn="_labelIncome_quz5u_27",qn="_activeIncome_quz5u_33",Wn="_activeExpense_quz5u_40",Pn="_slider_quz5u_46",An="_round_quz5u_91",T={"transaction-switcher":"_transaction-switcher_quz5u_2",switch:"_switch_quz5u_9",labelExpense:Bn,labelIncome:Mn,activeIncome:qn,activeExpense:Wn,slider:Pn,round:An},Fn=({onChange:n})=>{const[t,a]=u.useState(!1),s=()=>{a(!t),n(!t)};return e.createElement("div",{className:T["transaction-switcher"]},e.createElement("span",{className:t?T.activeIncome:T.labelIncome},"Income"),e.createElement("label",{className:`${T.switch} ${t?T.income:T.expense}`},e.createElement("input",{type:"checkbox",onChange:s,checked:!t}),e.createElement("span",{className:`${T.slider} ${T.round}`})),e.createElement("span",{className:t?T.labelExpense:T.activeExpense},"Expense"))},On="_container_jwgjq_1",zn="_formWrapper_jwgjq_18",Hn="_header_jwgjq_30",Yn="_secondContainer_jwgjq_40",Vn="_category_jwgjq_49",Un="_boxDate_jwgjq_62",Gn="_incomeInput_jwgjq_76",Xn="_customInput_jwgjq_77",Qn="_svgBox_jwgjq_106",Jn="_comment_jwgjq_135",Kn="_selectExpense_jwgjq_136",Zn="_btnBox_jwgjq_155",ea="_activeIncome_jwgjq_162",ta="_activeExpense_jwgjq_169",na="_checkBox_jwgjq_175",aa="_inputContainer_jwgjq_188",sa="_active_jwgjq_162",ra="_hidden_jwgjq_203",y={container:On,formWrapper:zn,header:Hn,secondContainer:Yn,category:Vn,boxDate:Un,incomeInput:Gn,customInput:Xn,svgBox:Qn,comment:Jn,selectExpense:Kn,btnBox:Zn,activeIncome:ea,activeExpense:ta,checkBox:na,inputContainer:aa,active:sa,hidden:ra},we=({name:n,register:t,errors:a,placeholder:s,className:r})=>e.createElement("div",{className:y.inputContainer},e.createElement("input",{autoComplete:"off",className:r,...t(n),placeholder:s}),a[n]&&e.createElement("span",null,a[n].message)),Ne=n=>n<10?"0"+n:n,Ce=n=>{const t=n.getFullYear(),a=Ne(n.getMonth()+1),s=Ne(n.getDate());return`${t}-${a}-${s}`};function Pe({content:n,categories:t,toggle:a,typeForm:s,onDataSubmit:r,schema:c}){const{register:_,handleSubmit:h,formState:{errors:d},setValue:g}=Ie({resolver:Te(c),mode:"onChange"}),[m,w]=u.useState(null),[o,v]=u.useState(""),[N,P]=u.useState(null),[A,H]=u.useState(!0);u.useEffect(()=>{v(n?n.type:"EXPENSE"),g("amount",n&&+n.amount.toString().replace("-","")),g("comment",n&&n.comment)},[n,g]);const B=u.useMemo(()=>t.map(({id:b,name:Ve})=>({value:b,label:Ve})),[t]),Y=u.useMemo(()=>B.find(b=>(n==null?void 0:n.categoryId)===b.value),[n,B]),He=b=>{w(b)},Ye=b=>{if(s==="add"&&m)r({transactionDate:Ce(N),amount:o==="EXPENSE"?+`-${b.amount}`:+b.amount,comment:b.comment,type:o,categoryId:o==="EXPENSE"?m==null?void 0:m.value:"063f1132-ba5d-42b4-951d-44011ca46262"}),H(!0);else if(s==="add"&&!m){H(!1);return}else r({transactionDate:n?n.transactionDate:Ce(N),amount:o==="EXPENSE"?+`-${b.amount}`:+b.amount,comment:b.comment})},se=b=>{v(b?"INCOME":"EXPENSE")};return e.createElement("div",{className:y.container},e.createElement("form",{className:y.formWrapper,onSubmit:h(Ye)},e.createElement("h1",{className:y.header},s==="add"?"Add transaction":"Edit transaction"),s==="add"?e.createElement(Fn,{onChange:se}):e.createElement("div",null,e.createElement("ul",{className:y.checkBox},e.createElement("li",{onClick:()=>{s==="edit"&&o==="EXPENSE"||se(!0)},className:n.type==="INCOME"||o==="INCOME"?y.activeIncome:"",disabled:s==="edit"&&o==="EXPENSE"}," ","Income"),e.createElement("span",null,"/"),e.createElement("li",{onClick:()=>{s==="edit"&&o==="INCOME"||se(!1)},className:o==="EXPENSE"?y.activeExpense:"",disabled:s==="edit"&&o==="INCOME"}," ","Expense"," "))),e.createElement("div",{className:y.secondContainer},o==="EXPENSE"&&e.createElement("div",{className:y.category},e.createElement(Ze,{name:"category",className:"react-select-container",classNamePrefix:"react-select",options:B,placeholder:"Select category",defaultValue:Y&&Y,onChange:He,isDisabled:s==="edit"}),e.createElement("span",{className:A?y.hidden:y.active},"Please, choose the category")),e.createElement("div",{className:y.boxDate},e.createElement(we,{className:y.incomeInput,name:"amount",placeholder:"0.00",autoComplete:"false",errors:d,register:_}),e.createElement("div",{className:y.svgBox},e.createElement(et,{className:y.customInput,selected:n?n.transactionDate:N,placeholderText:"Enter the date",onChange:b=>{g("transactionDate",b),P(b)}}),e.createElement("svg",{width:"36",height:"36"},e.createElement("use",{xlinkHref:`${k}#icon-date`})),d.transactionDate&&e.createElement("span",null,d.transactionDate.message))),e.createElement(we,{className:y.comment,name:"comment",placeholder:"Comment",errors:d,register:_}),e.createElement("div",{className:y.btnBox},e.createElement("button",{className:"modalButtonColor"},s==="add"?"ADD":"EDIT"),e.createElement("button",{type:"button",onClick:a,className:"modalButton"},"CANCEL")))))}const ca=ne({comment:L().min(5,"Give more details"),transactionDate:je(),amount:Le().typeError("Please enter the number").min(1,"Number must be at least 1 character")});function oa({categories:n,editContent:t,toggle:a}){const s=j(),r=c=>{s(K({content:{...c},id:t.id})).unwrap().then(_=>{W.success("Changed!"),a()}).catch(_=>{W.error("Credentials is not valid!")})};return e.createElement(Pe,{schema:ca,toggle:a,content:t.content,categories:n,onDataSubmit:r,typeForm:"edit"})}const la=ne({comment:L().required("Describe your transaction").min(5,"Give more details"),transactionDate:je().required("Please choose the date"),amount:Le().typeError("Please enter the number").min(1,"Number must be at least 1 character").required("Sum is required")});function ia({categories:n,toggle:t}){const a=j(),s=r=>{a(J(r)).unwrap().then(()=>{W.success("Transaction was successfully added"),t()}).catch(c=>{W.error("Credentials is not valid!")})};return e.createElement(Pe,{schema:la,categories:n,onDataSubmit:s,toggle:t,typeForm:"add"})}const ma="_transaction_item_jemjf_1",ua="_income_border_jemjf_6",da="_expense_border_jemjf_10",_a="_income_text_jemjf_14",ga="_expense_text_jemjf_19",pa="_transactions_table_mobile_jemjf_24",ha="_transaction_colum_jemjf_30",Ea="_transaction_first_column_jemjf_34",ba="_transaction_row_mobile_jemjf_38",ya="_transaction_row_jemjf_38",fa="_table_body_jemjf_57",va="_btn_delete_jemjf_61",wa="_btn_edit_jemjf_76",Na="_btn_wrapper_jemjf_86",Ca="_icon_edit_jemjf_93",l={transaction_item:ma,income_border:ua,expense_border:da,income_text:_a,expense_text:ga,transactions_table_mobile:pa,transaction_colum:ha,transaction_first_column:Ea,transaction_row_mobile:ba,transaction_row:ya,table_body:fa,btn_delete:va,btn_edit:wa,btn_wrapper:Na,icon_edit:Ca},xe=({transaction:n,handleEditItem:t})=>{const{id:a,transactionDate:s,type:r,categoryId:c,comment:_,amount:h}=n,{isBigScreenOrTablet:d,isMobile:g}=pe(),m=j(),w=f(We);function o(H){const B=w.find(Y=>Y.id===H);return B?B.name:"Unknown Category"}const v=()=>{m(Q(n))},N=r.toLowerCase()==="income"?"+":"-",P=r.toLowerCase()==="income"?l.income_border:l.expense_border,A=r.toLowerCase()==="income"?l.income_text:l.expense_text;return e.createElement(e.Fragment,null,g&&e.createElement("li",{key:a,className:`${l.transaction_item} ${P}`},e.createElement("table",{className:l.transactions_table_mobile},e.createElement("tbody",{className:l.table_body},e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Date"),e.createElement("td",null,s)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Type"),e.createElement("td",null,N)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Category"),e.createElement("td",null,o(c))),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Comment"),e.createElement("td",null,_)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",{className:l.transaction_first_column},"Sum"),e.createElement("td",{className:A},h)),e.createElement("tr",{className:l.transaction_row_mobile},e.createElement("td",null,e.createElement("button",{className:l.btn_delete,onClick:v},"Delete")),e.createElement("td",null,e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:h,comment:_,transactionDate:s},a),className:l.btn_edit},e.createElement("svg",{className:l.icon_edit},e.createElement("use",{xlinkHref:`${k}#icon-edit`}))," ","Edit")))))),d&&e.createElement("tr",{className:l.transaction_row},e.createElement("td",{className:l.transaction_colum},s),e.createElement("td",{className:l.transaction_colum,style:{textAlign:"center"}},N),e.createElement("td",{className:l.transaction_colum},o(c)),e.createElement("td",{className:l.transaction_colum},_),e.createElement("td",{className:`${l.transaction_colum} ${A}`,style:{textAlign:"right"}},h),e.createElement("td",{className:l.transaction_colum},e.createElement("div",{className:l.btn_wrapper},e.createElement("button",{onClick:()=>t({categoryId:c,type:r,amount:h,comment:_,transactionDate:s},a),className:l.btn_edit},e.createElement("svg",{className:l.icon_edit},e.createElement("use",{xlinkHref:`${k}#icon-edit`}))),e.createElement("button",{className:l.btn_delete,onClick:v},"Delete")))))},xa="_transactions_section_smf2v_1",ka="_transactions_container_smf2v_34",Sa="_transactions_table_smf2v_85",Ia="_transactions_list_smf2v_92",Ta="_transaction_row_head_smf2v_98",ja="_table_body_smf2v_121",La="_btn_add_smf2v_125",Da="_icon_plus_smf2v_140",Ra="_empty_transactions_smf2v_146",x={transactions_section:xa,transactions_container:ka,transactions_table:Sa,transactions_list:Ia,transaction_row_head:Ta,table_body:ja,btn_add:La,icon_plus:Da,empty_transactions:Ra},$a=()=>{const{isOpen:n,toggle:t}=Be(),[a,s]=u.useState(""),r=f(jn),c=f(We),{isBigScreenOrTablet:_,isMobile:h}=pe();n?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open");const d=(m,w,o)=>{t(),s({content:m,id:w,name:o}),n&&document.body.classList.add("modal-open")},g=()=>{t(),s(null)};return e.createElement("section",{className:x.transactions_section},e.createElement("div",{className:x.transactions_container},h&&e.createElement("ul",{className:x.transactions_list},r.length>0?r.map(m=>e.createElement(xe,{handleEditItem:d,key:m.id,transaction:m})):e.createElement("div",{className:x.empty_transactions},"No transactions")),_&&e.createElement(e.Fragment,null,r.length>0?e.createElement("table",{className:x.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:x.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null))),e.createElement("tbody",{className:x.table_body},r.map(m=>e.createElement(xe,{handleEditItem:d,key:m.id,transaction:m})))):e.createElement(e.Fragment,null,e.createElement("table",{className:x.transactions_table},e.createElement("thead",null,e.createElement("tr",{className:x.transaction_row_head},e.createElement("th",null,"Date"),e.createElement("th",{style:{textAlign:"center"}},"Type"),e.createElement("th",null,"Category"),e.createElement("th",null,"Comment"),e.createElement("th",{style:{textAlign:"right"}},"Sum"),e.createElement("th",null)))),e.createElement("div",{className:x.empty_transactions},"No transactions"))),e.createElement("button",{onClick:()=>g(),className:x.btn_add}," ",e.createElement("svg",{className:x.icon_plus},e.createElement("use",{xlinkHref:`${k}#icon-plus`})))),n&&e.createElement($e,{closeModal:t},a?e.createElement(oa,{editContent:a,categories:c,toggle:t}):e.createElement(ia,{categories:c,toggle:t})))},Ae=I("currency/fetchCurrencyRate",async()=>{const n=localStorage.getItem("currencyRate"),t=localStorage.getItem("lastFetchTime");if(n&&t&&(new Date().getTime()-t)/(1e3*60*60)<1)return JSON.parse(n);try{const a=await Se.get("https://api.monobank.ua/bank/currency");return localStorage.setItem("currencyRate",JSON.stringify(a.data)),localStorage.setItem("lastFetchTime",new Date().getTime().toString()),a.data}catch(a){console.error("Помилка при виконанні запиту до Monobank:",a)}}),Ba={usdRate:null,eurRate:null,lastFetchTime:null},Fe=ue({name:"currency",initialState:Ba,selectors:{selectUsdRate:n=>n.usdRate,selectEurRate:n=>n.eurRate,selectLastFetchTime:n=>n.lastFetchTime},extraReducers:n=>{n.addCase(Ae.fulfilled,(t,{payload:a})=>{t.usdRate=a.find(s=>s.currencyCodeA===840&&s.currencyCodeB===980),t.eurRate=a.find(s=>s.currencyCodeA===978&&s.currencyCodeB===980),t.lastFetchTime=new Date().getTime().toString()})}}),Ma=Fe.reducer,{selectUsdRate:qa,selectEurRate:Wa,selectLastFetchTime:Pa}=Fe.selectors,Aa="_wrapper_1ympg_14",Fa="_title_1ympg_55",Oa="_row_1ympg_85",za="_titleItem_1ympg_103",Ha="_rowItem_1ympg_112",Ya="_vector_1ympg_120",Va="_image_1ympg_125",Ua="_secondimage_1ympg_148",Ga="_smallnumeur_1ympg_164",Xa="_smallnumusd_1ympg_174",E={wrapper:Aa,title:Fa,row:Oa,titleItem:za,rowItem:Ha,vector:Ya,image:Va,secondimage:Ua,smallnumeur:Ga,smallnumusd:Xa};function Oe(){const n=j(),t=f(qa),a=f(Wa),s=f(Pa),{isDesktopOrLaptop:r,isBigScreen:c,isTabletOrMobile:_,isRetina:h}=pe();let d="",g="";return h?c?(d="../../img/images/currency_desk@2x.webp",g="../../img/images/line_desc_2x.webp"):_?(d="../../img/images/currency_tablet@2x.webp",g="../../img/images/line_desc_tab_2x.webp"):(d="../../img/images/currency_mobile@2x.webp",g="../../img/images/line_desc_mob_2x.webp"):c?(d="../../img/images/currency_desk.webp",g="../../img/images/line_desc_1x.webp"):_?(d="../../img/images/currency_tablet.webp",g="../../img/images/line_desc_tab_1x.webp"):(d="../../img/images/currency_mobile.webp",g="../../img/images/line_desc_mob_1x.webp"),u.useEffect(()=>{(new Date().getTime()-s)/(1e3*60*60)>1&&n(Ae())},[n,s]),e.createElement("div",{className:E.wrapper},e.createElement("div",{className:E.secondwrapper},e.createElement("ul",{className:E.title},e.createElement("li",{className:E.titleItem},"Currency"),e.createElement("li",{className:E.titleItem},"Purchase"),e.createElement("li",{className:E.titleItem},"Sale")),t&&e.createElement("ul",{className:E.row},e.createElement("li",{className:E.rowItem},"USD"),e.createElement("li",{className:E.rowItem},t.rateBuy),e.createElement("li",{className:E.rowItem},t.rateSell)),a&&e.createElement("ul",{className:E.row},e.createElement("li",{className:E.rowItem},"EUR"),e.createElement("li",{className:E.rowItem},a.rateBuy),e.createElement("li",{className:E.rowItem},a.rateSell)),c&&e.createElement(e.Fragment,null,e.createElement("p",{className:E.smallnumeur}," ",a.rateBuy),e.createElement("p",{className:E.smallnumusd}," ",t.rateBuy)),e.createElement("img",{className:E.image,src:d,alt:"Currency rate"}),e.createElement("img",{className:E.secondimage,src:g,alt:"Currency rate"})))}const Qa=()=>{const n=Me().windowWidth,t=j();return u.useEffect(()=>{t(X())},[t]),e.createElement(e.Fragment,null,n>=768&&e.createElement(Oe,null),e.createElement($a,null))},Ja="_loaderWrapper_1hccn_1",Ka="_loader_1hccn_1",Za="_spinner_1hccn_1",es="_loaderName_1hccn_34",ie={loaderWrapper:Ja,loader:Ka,spinner:Za,loaderName:es},ke=()=>e.createElement("div",{className:ie.loaderWrapper},e.createElement("div",{className:ie.loader},e.createElement("span",{className:ie.loaderName}))),ts="_selectContainers_1uewu_1",ns="_select_1uewu_1",as="_option_1uewu_17",O={selectContainers:ts,select:ns,option:as},ss=({onMonthChange:n,onYearChange:t})=>{const a=new Date,s=a.getFullYear(),[r,c]=u.useState(a.getMonth()+1),[_,h]=u.useState(s),d=o=>{c(parseInt(o.target.value)),n(parseInt(o.target.value))},g=o=>{h(parseInt(o.target.value)),t(parseInt(o.target.value))},m=Array.from({length:s-2019},(o,v)=>s-v).reverse(),w=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.createElement("div",{className:O.selectContainers},e.createElement("select",{className:O.select,value:r,onChange:d},w.map((o,v)=>e.createElement("option",{className:O.option,key:v+1,value:v+1},o))),e.createElement("select",{className:O.select,value:_,onChange:g},m.map(o=>e.createElement("option",{className:O.option,key:o,value:o},o))))},rs="_statisticsContainer_12lnp_1",cs="_chartContainer_12lnp_27",os="_title_12lnp_31",ls="_tableContainer_12lnp_36",is="_contentContainer_12lnp_59",q={statisticsContainer:rs,chartContainer:cs,title:os,tableContainer:ls,contentContainer:is},ms="_tableContainer_g4cyy_1",us="_table_g4cyy_1",ds="_tableHeader_g4cyy_12",_s="_tableCell_g4cyy_25",gs="_tableRow_g4cyy_33",ps="_paragraphContainer_g4cyy_37",hs="_paragraph_g4cyy_37",C={tableContainer:ms,table:us,tableHeader:ds,tableCell:_s,tableRow:gs,paragraphContainer:ps,paragraph:hs},Es=({transactionsSummary:n,colors:t,incomeSummary:a,expenseSummary:s})=>e.createElement("div",{className:C.tableContainer},e.createElement("table",{className:C.table},e.createElement("thead",{className:C.tableHeader},e.createElement("tr",null,e.createElement("th",{className:C.tableCell}),e.createElement("th",{className:C.tableCell},"Category"),e.createElement("th",{className:C.tableCell},"Sum"))),e.createElement("tbody",null,n.map((r,c)=>e.createElement("tr",{key:c,className:C.tableRow},e.createElement("td",{className:C.tableCell,style:{backgroundColor:t[r.name]}}),e.createElement("td",{className:C.tableCell},r.name),e.createElement("td",{className:C.tableCell},r.total))))),e.createElement("div",{className:C.paragraphContainer},e.createElement("p",{className:C.paragraph},"Income: ",a),e.createElement("p",{className:C.paragraph},"Expenses: ",s))),bs="_chartWrapper_9z5tw_1",ys="_periodText_9z5tw_5",me={chartWrapper:bs,periodText:ys},fs=({transactions:n,colors:t,period:a})=>{if(!n||!t)return e.createElement("div",null,"No data available");const s=a.toFixed(2),r={datasets:[{data:n==null?void 0:n.map(c=>c.total),backgroundColor:n==null?void 0:n.map(c=>t[c.name]),hoverBackgroundColor:n==null?void 0:n.map(c=>t[c.name]),cutout:95}]};return e.createElement("div",{className:me.chartContainer},e.createElement("div",{className:me.chartWrapper},e.createElement(tt,{data:r}),e.createElement("p",{className:me.periodText}," ₴ ",s)))},vs=()=>{const n=j(),t=f(Ln),a=f(Rn),s=f(Dn),r=f($n),[c,_]=u.useState(new Date().getMonth()+1),[h,d]=u.useState(new Date().getFullYear()),[g,m]=u.useState({});u.useEffect(()=>{n(ee({month:c,year:h}))},[c,h,n]);const w=()=>{const N={};t==null||t.forEach(({name:P,index:A})=>{N[P]=`#${Math.floor(Math.random()*16777215).toString(16)}`}),m(N)};u.useEffect(()=>{w()},[t]);const o=N=>{_(N)},v=N=>{d(N)};return e.createElement("section",{className:q.statisticsContainer},e.createElement("div",{className:q.titleContainer},e.createElement("h2",{className:q.title},"Statistics")),e.createElement("div",{className:q.contentContainer},e.createElement("div",{className:q.chartContainer},e.createElement(fs,{transactions:t,period:r,colors:g})),e.createElement("div",{className:q.tableContainer},e.createElement(ss,{onMonthChange:o,onYearChange:v}),e.createElement(Es,{transactionsSummary:t,colors:g,incomeSummary:a,expenseSummary:s}))))};function ws(){const n=f(ae),t=f(yt),a=j();return u.useEffect(()=>{a(G()),a(Z())},[a]),t?e.createElement(ke,null):e.createElement(e.Fragment,null,e.createElement(u.Suspense,{fallback:e.createElement(ke,null)},e.createElement(nt,null,e.createElement(D,{index:!0,element:e.createElement(ye,{component:xn,redirectTo:"/home"})}),e.createElement(D,{path:"register",element:e.createElement(ye,{component:Sn,redirectTo:"/home"})}),e.createElement(D,{path:"/",element:e.createElement(Yt,null)},e.createElement(D,{path:"/home",element:e.createElement(ce,{component:Qa,redirectTo:"/"})}),e.createElement(D,{path:"/statistics",element:e.createElement(ce,{component:vs,redirectTo:"/"})}),e.createElement(D,{path:"/currency",element:e.createElement(ce,{component:Oe,redirectTo:"/"})})),e.createElement(D,{path:"*",element:n?e.createElement(te,{to:"/home"}):e.createElement(te,{to:"/"})}))))}const Ns={key:"auth",version:1,storage:De,whitelist:["token"]},Cs={key:"root",storage:De},ze=at({reducer:{auth:be(Ns,Et),transactions:Tn,currency:be(Cs,Ma)},middleware:n=>n({serializableCheck:{ignoredActions:[st,rt,ct,ot,lt,it]}}),devTools:!1}),xs=mt(ze);ut.createRoot(document.getElementById("root")).render(e.createElement(dt,{basename:"/money_guard_project"},e.createElement(_t,{store:ze},e.createElement(gt,{loading:null,persistor:xs},e.createElement(ws,null),e.createElement(pt,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
