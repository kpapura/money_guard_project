import{R as s,r as R,A as q,a as A,u as V,N as g,o as W,b as N,c,d as b,e as u,f as v,g as I,O as M,h as G,i as $,j as E,k,l as y,p as B,m as D,n as z,q as U,F as H,s as K,P as Q,t as Y,v as J,w as X,x as Z,B as ee,y as te,z as re,Q as se}from"./assets/vendor-64bbee20.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();const ae="_form_jpfz7_1",ne={form:ae},C=({register:r,errors:t,name:e,placeholder:a})=>s.createElement("label",null,s.createElement("input",{autoComplete:e,...r(e),type:"text",placeholder:a}),(t==null?void 0:t[e])&&s.createElement("span",null,t[e].message)),oe=()=>s.createElement("div",null,"ProgressBar"),S=({register:r,errors:t,name:e,placeholder:a,getValues:n})=>{const[o,i]=R.useState("password"),[d,m]=R.useState("");function _(p){m(p.target.value)}return s.createElement("label",null,s.createElement("input",{autoComplete:e,...r(e,{required:"Password is required",validate:p=>{n("password")}}),type:o,placeholder:a,onChange:_})," ",s.createElement("div",{onClick:()=>{i(o==="password"?"text":"password")}},o==="password"?s.createElement(q,null):s.createElement(A,null)),(t==null?void 0:t[e])&&s.createElement("span",null,t[e].message),e==="passwordConfirmation"&&s.createElement(oe,{password:d}))},P=({onDataSubmit:r,formType:t,schema:e})=>{const{register:a,reset:n,handleSubmit:o,formState:{errors:i}}=V({resolver:W(e)}),d=m=>{delete m.passwordConfirmation,r(m),console.log(m),n()};return s.createElement("form",{className:ne.form,onSubmit:o(d)},t==="register"&&s.createElement(C,{register:a,errors:i,name:"username",placeholder:"Name"}),s.createElement(C,{register:a,errors:i,name:"email",placeholder:"Email"}),s.createElement(S,{register:a,errors:i,name:"password",placeholder:"Password"}),t==="register"&&s.createElement(s.Fragment,null,s.createElement(S,{register:a,errors:i,name:"passwordConfirmation",placeholder:"Confirm password"})),t==="login"?s.createElement(s.Fragment,null,s.createElement(g,{to:"/login",onClick:o(d)},"LOG IN"),s.createElement(g,{to:"/register"},"REGISTER")):s.createElement(s.Fragment,null,s.createElement(g,{to:"/register",onClick:o(d)},"REGISTER"),s.createElement(g,{to:"/login"},"LOGIN")),s.createElement("button",{hidden:!0}))},l=N.create({baseURL:"https://wallet.b.goit.study/api/"}),T=r=>{l.defaults.headers.common.Authorization=`Bearer ${r}`},le=()=>{l.defaults.headers.common.Authorization=""},h=c("register",async(r,t)=>{try{const{data:e}=await l.post("auth/sign-up",r);return T(e.token),console.log(e),e}catch(e){return t.rejectWithValue(e.message)}}),f=c("login",async(r,t)=>{try{const{data:e}=await l.post("auth/sign-in",r);return T(e.token),console.log(e),e}catch(e){return t.rejectWithValue(e.message)}}),ie=c("logout",async(r,t)=>{try{const{data:e}=await l.delete("auth/sign-out");return console.log(e),le(),e}catch(e){return t.rejectWithValue(e.message)}}),w=c("refresh",async(r,t)=>{const e=t.getState().auth.token;if(!e)return t.rejectWithValue("Token is not exist!");try{T(e);const{data:a}=await l.get("users/current");return a}catch(a){return t.rejectWithValue(a.message)}}),ce=b({password:u().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:u().required().email("Email is not valid")}).required(),j=()=>{const r=v(),t=I(),e=n=>{t(f(n)).unwrap().then(()=>{r("/")}).catch(o=>{console.log(o.message)})},a={email:"tomato9@gmail.com",password:"0000000"};return s.createElement("div",null,s.createElement(P,{formType:"login",onDataSubmit:e,values:a,schema:ce}))},ue=()=>s.createElement("main",null,s.createElement(j,null),s.createElement(M,null)),de=b({username:u().required(),password:u().required().min(6,"Must be more then 6 symbols").max(12,"Must be less then 12 symbols"),email:u().required().email("Email is not valid"),passwordConfirmation:u().oneOf([G("password"),null],"Passwords must match")}).required(),me=()=>{const r=I(),t=v(),e=a=>{r(h(a)),t("/login")};return s.createElement("div",null,s.createElement(P,{onDataSubmit:e,formType:"register",schema:de}))},ge=c("fetchTransactionsData",async(r,t)=>{try{const{data:e}=await l.get("transactions");return e}catch(e){return t.rejectWithValue(e.message)}}),he=c("deleteTransaction",async(r,t)=>{try{const{data:e}=await l.delete(`transactions/${r}`);return e.id}catch(e){return t.rejectWithValue(e.message)}}),fe=c("addTransaction",async(r,t)=>{try{const{data:e}=await l.post("transactions",r);return e}catch(e){return t.rejectWithValue(e.message)}}),pe=c("editTransaction",async(r,t)=>{try{const{data:e}=await l.patch(`/transactions/${r.id}`,r);return e}catch(e){return t.rejectWithValue(e.message)}}),Ee=c("fetchTransactionCategories",async(r,t)=>{try{const{data:e}=await l.get("transaction-categories");return e}catch(e){return t.rejectWithValue(e.message)}});c("fetchTransactionSummaryController",async(r,t)=>{try{const{data:e}=await l.get("transactions-summary");return e}catch(e){return t.rejectWithValue(e.message)}});function ye(){return s.createElement("div",null,s.createElement("h1",null,"Hello"),s.createElement($,null,s.createElement(E,{path:"/",element:s.createElement(ue,null)},s.createElement(E,{path:"login",element:s.createElement(j,null)}),s.createElement(E,{path:"register",element:s.createElement(me,null)}))))}const L={user:{username:"",email:""},token:null,loading:!1,error:!1,isLoggedIn:!1,isRefresh:!1},x=k({name:"auth",initialState:L,selectors:{selectUser:r=>r.username,selectIsLoggedIn:r=>r.isLoggedIn,selectToken:r=>r.isLoggedIn,selectIsRefresh:r=>r.isRefresh},extraReducers:r=>{r.addCase(ie.fulfilled,t=>L).addCase(w.fulfilled,(t,{payload:e})=>{t.user.username=e.username,t.user.email=e.email,t.isLoggedIn=!0,t.isRefresh=!1}).addMatcher(y(h.fulfilled,f.fulfilled),(t,{payload:e})=>{t.user.username=e.user.username,t.user.email=e.user.email,t.user.password=e.user.password,t.token=e.token,t.isLoggedIn=!0}).addMatcher(y(h.pending,f.pending,w.pending),t=>{t.loading=!0,t.error=null,t.isRefresh=!0}).addMatcher(y(h.rejected,f.rejected,w.rejected),(t,{payload:e})=>{t.error=e,t.loading=!1,t.isRefresh=!1})}}),we=x.reducer;x.selectors;const Te={transactionsList:[],transactionCategories:[],transactionSummaryController:null,loading:!1,error:!1},F=k({name:"transactions",initialState:Te,selectors:{selectTransactions:r=>r.transactionsList,selectIsLoading:r=>r.loading,selectIsError:r=>r.error},extraReducers:r=>{r.addCase(ge.fulfilled,(t,{payload:e})=>{t.transactionsList=e,t.loading=!1}).addCase(he.fulfilled,(t,{payload:e})=>{t.transactionsList=t.transactionsList.filter(a=>a.id!==e),t.loading=!1}).addCase(fe.fulfilled,(t,{payload:e})=>{t.transactionsList.push(e),t.loading=!1}).addCase(pe.fulfilled,(t,{payload:e})=>{const a=t.transactionsList.findIndex(n=>n.id===e.id);t.transactionsList.splice(a,1,e),t.loading=!1}).addCase(Ee.fulfilled,(t,{payload:e})=>{t.transactionCategories=e,t.loading=!1})}}),Re=F.reducer;F.selectors;const Ce={key:"auth",version:1,storage:U,whitelist:["token"]},Se=B(Ce,we),O=D({reducer:{auth:Se,transactions:Re},middleware:r=>r({serializableCheck:{ignoredActions:[H,K,Q,Y,J,X]}}),devTools:!1}),Le=z(O);Z.createRoot(document.getElementById("root")).render(s.createElement(ee,{basename:"/money_guard_project/"},s.createElement(te,{store:O},s.createElement(re,{loading:null,persistor:Le},s.createElement(ye,null),s.createElement(se,{autoClose:1500})))));
//# sourceMappingURL=commonHelpers.js.map
